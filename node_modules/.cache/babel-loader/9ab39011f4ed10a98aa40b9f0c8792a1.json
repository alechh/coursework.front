{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar constants_1 = require(\"../../components/LocaleProvider/constants\");\n\nvar constants_2 = require(\"./constants\");\n\nvar InternalDateCalculator_1 = tslib_1.__importDefault(require(\"./InternalDateCalculator\"));\n\nvar InternalDateGetter_1 = tslib_1.__importDefault(require(\"./InternalDateGetter\"));\n\nvar InternalDateSetter_1 = tslib_1.__importDefault(require(\"./InternalDateSetter\"));\n\nvar InternalDateTransformer_1 = tslib_1.__importDefault(require(\"./InternalDateTransformer\"));\n\nvar InternalDateValidator_1 = tslib_1.__importDefault(require(\"./InternalDateValidator\"));\n\nvar localeSets_1 = require(\"./localeSets\");\n\nvar types_1 = require(\"./types\");\n\nvar InternalDate =\n/** @class */\nfunction () {\n  function InternalDate(_a) {\n    var _b = _a === void 0 ? {} : _a,\n        order = _b.order,\n        separator = _b.separator,\n        _c = _b.langCode,\n        langCode = _c === void 0 ? constants_1.defaultLangCode : _c,\n        value = _b.value;\n\n    this.components = tslib_1.__assign({}, constants_2.emptyDateComponents);\n    this.start = null;\n    this.end = null;\n    this.order = !order ? localeSets_1.internalDateLocale[langCode].order : order;\n    this.separator = !separator ? localeSets_1.internalDateLocale[langCode].separator : separator;\n\n    if (value !== undefined) {\n      this.parseInternalValue(value);\n    }\n  }\n\n  InternalDate.prototype.getComponentsRaw = function () {\n    return tslib_1.__assign({}, this.components);\n  };\n\n  InternalDate.prototype.getComponentsLikeNumber = function () {\n    return InternalDateTransformer_1[\"default\"].dateComponentsStringToNumber(this.getComponentsRaw());\n  };\n\n  InternalDate.prototype.getSeparator = function () {\n    return this.separator;\n  };\n\n  InternalDate.prototype.getOrder = function () {\n    return this.order;\n  };\n\n  InternalDate.prototype.getYear = function () {\n    return this.components.year;\n  };\n\n  InternalDate.prototype.getMonth = function () {\n    return this.components.month;\n  };\n\n  InternalDate.prototype.getDate = function () {\n    return this.components.date;\n  };\n\n  InternalDate.prototype.getRangeStart = function () {\n    return this.start;\n  };\n\n  InternalDate.prototype.getRangeEnd = function () {\n    return this.end;\n  };\n\n  InternalDate.prototype.setOrder = function (order) {\n    if (order === void 0) {\n      order = constants_2.defaultDateComponentsOrder;\n    }\n\n    this.order = order;\n    return this;\n  };\n\n  InternalDate.prototype.setSeparator = function (separator) {\n    if (separator === void 0) {\n      separator = constants_2.defaultDateComponentsSeparator;\n    }\n\n    this.separator = separator;\n    return this;\n  };\n\n  InternalDate.prototype.setComponents = function (components, isNativeMonth) {\n    if (isNativeMonth === void 0) {\n      isNativeMonth = false;\n    }\n\n    if (components && isNativeMonth) {\n      var clone = this.clone().setComponents(components).shiftMonth(1);\n\n      if (clone.validate({\n        checks: [types_1.InternalDateValidateCheck.Native]\n      })) {\n        this.components = tslib_1.__assign({}, clone.getComponentsLikeNumber());\n      }\n\n      return this;\n    }\n\n    this.components = components || tslib_1.__assign({}, constants_2.emptyDateComponents);\n    return this;\n  };\n\n  InternalDate.prototype.setYear = function (year) {\n    this.components.year = year;\n    return this;\n  };\n\n  InternalDate.prototype.setMonth = function (month) {\n    this.components.month = month;\n    return this;\n  };\n\n  InternalDate.prototype.setDate = function (date) {\n    this.components.date = date;\n    return this;\n  };\n\n  InternalDate.prototype.shiftYear = function (step, _a) {\n    var _b = _a === void 0 ? {} : _a,\n        isLoop = _b.isLoop,\n        isRange = _b.isRange,\n        isCutFeb = _b.isCutFeb;\n\n    var min = this.getMinValue(types_1.InternalDateComponentType.Year, isRange);\n    var max = this.getMaxValue(types_1.InternalDateComponentType.Year, {\n      isRange: isRange,\n      isCutFeb: isCutFeb\n    });\n    var year = this.getComponentsLikeNumber().year;\n    this.components.year = InternalDateCalculator_1[\"default\"].calcShiftValueDateComponent(step, year, min, max, isLoop);\n    return this;\n  };\n\n  InternalDate.prototype.shiftMonth = function (step, _a) {\n    var _b = _a === void 0 ? {} : _a,\n        isLoop = _b.isLoop,\n        isRange = _b.isRange,\n        isCutFeb = _b.isCutFeb;\n\n    var min = this.getMinValue(types_1.InternalDateComponentType.Month, isRange);\n    var max = this.getMaxValue(types_1.InternalDateComponentType.Month, {\n      isRange: isRange,\n      isCutFeb: isCutFeb\n    });\n    var month = this.getComponentsLikeNumber().month;\n    this.components.month = InternalDateCalculator_1[\"default\"].calcShiftValueDateComponent(step, month, min, max, isLoop);\n    return this;\n  };\n\n  InternalDate.prototype.shiftDate = function (step, _a) {\n    var _b = _a === void 0 ? {} : _a,\n        isLoop = _b.isLoop,\n        isRange = _b.isRange,\n        isCutFeb = _b.isCutFeb;\n\n    var min = this.getMinValue(types_1.InternalDateComponentType.Date, isRange);\n    var max = this.getMaxValue(types_1.InternalDateComponentType.Date, {\n      isRange: isRange,\n      isCutFeb: isCutFeb\n    });\n    var date = this.getComponentsLikeNumber().date;\n    this.components.date = InternalDateCalculator_1[\"default\"].calcShiftValueDateComponent(step, date, min, max, isLoop);\n    return this;\n  };\n\n  InternalDate.prototype.setRangeStart = function (internalDate) {\n    this.start = internalDate;\n    return this;\n  };\n\n  InternalDate.prototype.setRangeEnd = function (internalDate) {\n    this.end = internalDate;\n    return this;\n  };\n\n  InternalDate.prototype.get = function (type) {\n    return type !== null ? InternalDateGetter_1[\"default\"].getValueDateComponent(type, this.getComponentsRaw()) : null;\n  };\n\n  InternalDate.prototype.set = function (type, value) {\n    return type !== null ? InternalDateSetter_1[\"default\"].setValueDateComponent(this, type, value) : this;\n  };\n\n  InternalDate.prototype.shift = function (type, step, settings) {\n    return type !== null ? InternalDateSetter_1[\"default\"].shiftValueDateComponent(this, type, step, settings) : this;\n  };\n\n  InternalDate.prototype.parseValue = function (value) {\n    if (value === void 0) {\n      value = '';\n    }\n\n    var components = InternalDateTransformer_1[\"default\"].parseValueToDate(value, this.order) || tslib_1.__assign({}, constants_2.emptyDateComponents);\n\n    this.setComponents(components);\n    return this;\n  };\n\n  InternalDate.prototype.parseInternalValue = function (value) {\n    if (value === void 0) {\n      value = '';\n    }\n\n    var components = InternalDateTransformer_1[\"default\"].parseValueToDate(value, types_1.InternalDateOrder.DMY) || tslib_1.__assign({}, constants_2.emptyDateComponents);\n\n    this.setComponents(components);\n    return this;\n  };\n\n  InternalDate.prototype.validate = function (_a) {\n    var _b = _a === void 0 ? {} : _a,\n        type = _b.type,\n        nextValue = _b.nextValue,\n        _c = _b.checks,\n        checks = _c === void 0 ? Object.values(types_1.InternalDateValidateCheck) : _c;\n\n    var self = this;\n\n    if (type !== undefined) {\n      var clone = this.clone();\n\n      if (nextValue !== undefined) {\n        clone.set(type, nextValue);\n      }\n\n      self = clone;\n    }\n\n    if (checks.includes(types_1.InternalDateValidateCheck.NotNull) && !InternalDateValidator_1[\"default\"].checkForNull(self.getComponentsRaw(), type)) {\n      return false;\n    }\n\n    if (checks.includes(types_1.InternalDateValidateCheck.Number) && !Object.values(self.getComponentsRaw()).every(InternalDateValidator_1[\"default\"].testParseToNumber)) {\n      return false;\n    }\n\n    if (checks.includes(types_1.InternalDateValidateCheck.Limits) && !InternalDateValidator_1[\"default\"].checkLimits(self.getComponentsLikeNumber(), type)) {\n      return false;\n    }\n\n    if (checks.includes(types_1.InternalDateValidateCheck.Native) && !InternalDateValidator_1[\"default\"].compareWithNativeDate(self.getComponentsLikeNumber())) {\n      return false;\n    }\n\n    if (checks.includes(types_1.InternalDateValidateCheck.Range)) {\n      return type !== undefined ? InternalDateValidator_1[\"default\"].checkRangePiecemeal(type, self.getComponentsLikeNumber(), self.start && self.start.getComponentsLikeNumber(), self.end && self.end.getComponentsLikeNumber()) : InternalDateValidator_1[\"default\"].checkRangeFully(self.toNumber(), self.start && self.start.toNumber(), self.end && self.end.toNumber());\n    }\n\n    return true;\n  };\n\n  InternalDate.prototype.toFragments = function (settings, components) {\n    if (settings === void 0) {\n      settings = {};\n    }\n\n    if (components === void 0) {\n      components = this.getComponentsRaw();\n    }\n\n    return InternalDateTransformer_1[\"default\"].dateToFragments(components, tslib_1.__assign({\n      order: this.order,\n      separator: this.separator\n    }, settings));\n  };\n  /**\r\n      * Перевод даты в числовое представление (**НЕ** аналог `timestamp`)\r\n      * Предназначено для быстрого сравнивания дат `<=>`\r\n      */\n\n\n  InternalDate.prototype.toNumber = function () {\n    return Number(this.toFragments({\n      order: types_1.InternalDateOrder.YMD,\n      withPad: true\n    }).map(function (_a) {\n      var valueWithPad = _a.valueWithPad;\n      return valueWithPad;\n    }).join(''));\n  };\n\n  InternalDate.prototype.toString = function (settings) {\n    if (settings === void 0) {\n      settings = {};\n    }\n\n    return this.toFragments(tslib_1.__assign({\n      withPad: true,\n      withSeparator: true\n    }, settings)).filter(function (_a) {\n      var value = _a.value;\n      return value !== null;\n    }).map(function (_a) {\n      var type = _a.type,\n          valueWithPad = _a.valueWithPad,\n          value = _a.value;\n      return settings.withPad && type !== types_1.InternalDateComponentType.Separator ? valueWithPad : value;\n    }).join('');\n  };\n\n  InternalDate.prototype.toInternalString = function () {\n    return InternalDateTransformer_1[\"default\"].dateToInternalString(this.getComponentsRaw());\n  };\n\n  InternalDate.prototype.toNativeFormat = function () {\n    var components = this.getComponentsLikeNumber();\n\n    if (InternalDateValidator_1[\"default\"].compareWithNativeDate(components)) {\n      return tslib_1.__assign({}, components, {\n        month: components.month - 1\n      });\n    }\n\n    return null;\n  };\n\n  InternalDate.prototype.clone = function () {\n    return new InternalDate({\n      order: this.order,\n      separator: this.separator\n    }).setComponents(tslib_1.__assign({}, this.components)).setRangeStart(this.start && this.start.clone()).setRangeEnd(this.end && this.end.clone());\n  };\n\n  InternalDate.prototype.restore = function (type) {\n    if (type === void 0) {\n      type = null;\n    }\n\n    var prev = this.getComponentsRaw();\n    var today = InternalDateGetter_1[\"default\"].getTodayComponents();\n\n    if (prev.year === null && prev.month === null && prev.date === null) {\n      return this;\n    }\n\n    var restoreYear = prev.year !== null && InternalDateValidator_1[\"default\"].testParseToNumber(prev.year) ? prev.year > 50 && prev.year < 100 ? Number(prev.year) + 1900 : prev.year > 0 && prev.year < 51 ? Number(prev.year) + 2000 : prev.year : today.year;\n\n    if (type === null && restoreYear !== prev.year || type === types_1.InternalDateComponentType.Year) {\n      this.setYear(restoreYear);\n    }\n\n    if (type === null && prev.month === null || type === types_1.InternalDateComponentType.Month) {\n      this.setMonth(today.month);\n    }\n\n    if (type === null && prev.date === null || type === types_1.InternalDateComponentType.Date) {\n      this.setDate(today.date);\n    }\n\n    return this;\n  };\n\n  InternalDate.prototype.cutOffExcess = function (type, _a) {\n    if (type === void 0) {\n      type = null;\n    }\n\n    var _b = _a === void 0 ? {} : _a,\n        _c = _b.isLoop,\n        isLoop = _c === void 0 ? false : _c,\n        isRange = _b.isRange,\n        _d = _b.isCutFeb,\n        isCutFeb = _d === void 0 ? false : _d;\n\n    var _e = this.components,\n        year = _e.year,\n        month = _e.month,\n        date = _e.date;\n\n    if ((type === null || type === types_1.InternalDateComponentType.Year) && InternalDateValidator_1[\"default\"].testParseToNumber(year)) {\n      this.shiftYear(0, {\n        isLoop: isLoop,\n        isRange: isRange,\n        isCutFeb: isCutFeb\n      });\n    }\n\n    if ((type === null || type === types_1.InternalDateComponentType.Month) && InternalDateValidator_1[\"default\"].testParseToNumber(month)) {\n      this.shiftMonth(0, {\n        isLoop: isLoop,\n        isRange: isRange,\n        isCutFeb: isCutFeb\n      });\n    }\n\n    if ((type === null || type === types_1.InternalDateComponentType.Date) && InternalDateValidator_1[\"default\"].testParseToNumber(date)) {\n      this.shiftDate(0, {\n        isLoop: isLoop,\n        isRange: isRange,\n        isCutFeb: isCutFeb\n      });\n    }\n\n    return this;\n  };\n\n  InternalDate.prototype.isIncomplete = function () {\n    return !this.isEmpty() && Object.values(this.components).some(function (component) {\n      return component === null;\n    });\n  };\n\n  InternalDate.prototype.isEmpty = function () {\n    return Object.values(this.components).every(function (component) {\n      return component === null;\n    });\n  };\n\n  InternalDate.prototype.getMinValue = function (type, isRange) {\n    if (isRange === true && this.start !== null) {\n      return Number(InternalDateCalculator_1[\"default\"].calcRangeStartDateComponent(type, this.getComponentsLikeNumber(), this.start.getComponentsLikeNumber()));\n    }\n\n    return InternalDateGetter_1[\"default\"].getDefaultMin(type);\n  };\n\n  InternalDate.prototype.getMaxValue = function (type, _a) {\n    var _b = _a === void 0 ? {} : _a,\n        isRange = _b.isRange,\n        isCutFeb = _b.isCutFeb;\n\n    if (isRange && this.end !== null) {\n      return Number(InternalDateCalculator_1[\"default\"].calcRangeEndDateComponent(type, this.getComponentsLikeNumber(), this.end.getComponentsLikeNumber()));\n    }\n\n    if (!isCutFeb) {\n      return InternalDateGetter_1[\"default\"].getDefaultMax(type);\n    }\n\n    return InternalDateGetter_1[\"default\"].getDefaultMax(type, this.getComponentsLikeNumber());\n  };\n\n  return InternalDate;\n}();\n\nexports.InternalDate = InternalDate;","map":{"version":3,"sources":["C:/Users/Sasha/Documents/coursework.front/node_modules/@skbkontur/react-ui/lib/date/InternalDate.js"],"names":["Object","defineProperty","exports","value","tslib_1","require","constants_1","constants_2","InternalDateCalculator_1","__importDefault","InternalDateGetter_1","InternalDateSetter_1","InternalDateTransformer_1","InternalDateValidator_1","localeSets_1","types_1","InternalDate","_a","_b","order","separator","_c","langCode","defaultLangCode","components","__assign","emptyDateComponents","start","end","internalDateLocale","undefined","parseInternalValue","prototype","getComponentsRaw","getComponentsLikeNumber","dateComponentsStringToNumber","getSeparator","getOrder","getYear","year","getMonth","month","getDate","date","getRangeStart","getRangeEnd","setOrder","defaultDateComponentsOrder","setSeparator","defaultDateComponentsSeparator","setComponents","isNativeMonth","clone","shiftMonth","validate","checks","InternalDateValidateCheck","Native","setYear","setMonth","setDate","shiftYear","step","isLoop","isRange","isCutFeb","min","getMinValue","InternalDateComponentType","Year","max","getMaxValue","calcShiftValueDateComponent","Month","shiftDate","Date","setRangeStart","internalDate","setRangeEnd","get","type","getValueDateComponent","set","setValueDateComponent","shift","settings","shiftValueDateComponent","parseValue","parseValueToDate","InternalDateOrder","DMY","nextValue","values","self","includes","NotNull","checkForNull","Number","every","testParseToNumber","Limits","checkLimits","compareWithNativeDate","Range","checkRangePiecemeal","checkRangeFully","toNumber","toFragments","dateToFragments","YMD","withPad","map","valueWithPad","join","toString","withSeparator","filter","Separator","toInternalString","dateToInternalString","toNativeFormat","restore","prev","today","getTodayComponents","restoreYear","cutOffExcess","_d","_e","isIncomplete","isEmpty","some","component","calcRangeStartDateComponent","getDefaultMin","calcRangeEndDateComponent","getDefaultMax"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar constants_1 = require(\"../../components/LocaleProvider/constants\");\nvar constants_2 = require(\"./constants\");\nvar InternalDateCalculator_1 = tslib_1.__importDefault(require(\"./InternalDateCalculator\"));\nvar InternalDateGetter_1 = tslib_1.__importDefault(require(\"./InternalDateGetter\"));\nvar InternalDateSetter_1 = tslib_1.__importDefault(require(\"./InternalDateSetter\"));\nvar InternalDateTransformer_1 = tslib_1.__importDefault(require(\"./InternalDateTransformer\"));\nvar InternalDateValidator_1 = tslib_1.__importDefault(require(\"./InternalDateValidator\"));\nvar localeSets_1 = require(\"./localeSets\");\nvar types_1 = require(\"./types\");\nvar InternalDate = /** @class */function () {\n  function InternalDate(_a) {\n    var _b = _a === void 0 ? {} : _a,order = _b.order,separator = _b.separator,_c = _b.langCode,langCode = _c === void 0 ? constants_1.defaultLangCode : _c,value = _b.value;\n    this.components = tslib_1.__assign({}, constants_2.emptyDateComponents);\n    this.start = null;\n    this.end = null;\n    this.order = !order ? localeSets_1.internalDateLocale[langCode].order : order;\n    this.separator = !separator ? localeSets_1.internalDateLocale[langCode].separator : separator;\n    if (value !== undefined) {\n      this.parseInternalValue(value);\n    }\n  }\n  InternalDate.prototype.getComponentsRaw = function () {\n    return tslib_1.__assign({}, this.components);\n  };\n  InternalDate.prototype.getComponentsLikeNumber = function () {\n    return InternalDateTransformer_1[\"default\"].dateComponentsStringToNumber(this.getComponentsRaw());\n  };\n  InternalDate.prototype.getSeparator = function () {\n    return this.separator;\n  };\n  InternalDate.prototype.getOrder = function () {\n    return this.order;\n  };\n  InternalDate.prototype.getYear = function () {\n    return this.components.year;\n  };\n  InternalDate.prototype.getMonth = function () {\n    return this.components.month;\n  };\n  InternalDate.prototype.getDate = function () {\n    return this.components.date;\n  };\n  InternalDate.prototype.getRangeStart = function () {\n    return this.start;\n  };\n  InternalDate.prototype.getRangeEnd = function () {\n    return this.end;\n  };\n  InternalDate.prototype.setOrder = function (order) {\n    if (order === void 0) {order = constants_2.defaultDateComponentsOrder;}\n    this.order = order;\n    return this;\n  };\n  InternalDate.prototype.setSeparator = function (separator) {\n    if (separator === void 0) {separator = constants_2.defaultDateComponentsSeparator;}\n    this.separator = separator;\n    return this;\n  };\n  InternalDate.prototype.setComponents = function (components, isNativeMonth) {\n    if (isNativeMonth === void 0) {isNativeMonth = false;}\n    if (components && isNativeMonth) {\n      var clone = this.clone().\n      setComponents(components).\n      shiftMonth(1);\n      if (clone.validate({ checks: [types_1.InternalDateValidateCheck.Native] })) {\n        this.components = tslib_1.__assign({}, clone.getComponentsLikeNumber());\n      }\n      return this;\n    }\n    this.components = components || tslib_1.__assign({}, constants_2.emptyDateComponents);\n    return this;\n  };\n  InternalDate.prototype.setYear = function (year) {\n    this.components.year = year;\n    return this;\n  };\n  InternalDate.prototype.setMonth = function (month) {\n    this.components.month = month;\n    return this;\n  };\n  InternalDate.prototype.setDate = function (date) {\n    this.components.date = date;\n    return this;\n  };\n  InternalDate.prototype.shiftYear = function (step, _a) {\n    var _b = _a === void 0 ? {} : _a,isLoop = _b.isLoop,isRange = _b.isRange,isCutFeb = _b.isCutFeb;\n    var min = this.getMinValue(types_1.InternalDateComponentType.Year, isRange);\n    var max = this.getMaxValue(types_1.InternalDateComponentType.Year, { isRange: isRange, isCutFeb: isCutFeb });\n    var year = this.getComponentsLikeNumber().year;\n    this.components.year = InternalDateCalculator_1[\"default\"].calcShiftValueDateComponent(step, year, min, max, isLoop);\n    return this;\n  };\n  InternalDate.prototype.shiftMonth = function (step, _a) {\n    var _b = _a === void 0 ? {} : _a,isLoop = _b.isLoop,isRange = _b.isRange,isCutFeb = _b.isCutFeb;\n    var min = this.getMinValue(types_1.InternalDateComponentType.Month, isRange);\n    var max = this.getMaxValue(types_1.InternalDateComponentType.Month, { isRange: isRange, isCutFeb: isCutFeb });\n    var month = this.getComponentsLikeNumber().month;\n    this.components.month = InternalDateCalculator_1[\"default\"].calcShiftValueDateComponent(step, month, min, max, isLoop);\n    return this;\n  };\n  InternalDate.prototype.shiftDate = function (step, _a) {\n    var _b = _a === void 0 ? {} : _a,isLoop = _b.isLoop,isRange = _b.isRange,isCutFeb = _b.isCutFeb;\n    var min = this.getMinValue(types_1.InternalDateComponentType.Date, isRange);\n    var max = this.getMaxValue(types_1.InternalDateComponentType.Date, { isRange: isRange, isCutFeb: isCutFeb });\n    var date = this.getComponentsLikeNumber().date;\n    this.components.date = InternalDateCalculator_1[\"default\"].calcShiftValueDateComponent(step, date, min, max, isLoop);\n    return this;\n  };\n  InternalDate.prototype.setRangeStart = function (internalDate) {\n    this.start = internalDate;\n    return this;\n  };\n  InternalDate.prototype.setRangeEnd = function (internalDate) {\n    this.end = internalDate;\n    return this;\n  };\n  InternalDate.prototype.get = function (type) {\n    return type !== null ? InternalDateGetter_1[\"default\"].getValueDateComponent(type, this.getComponentsRaw()) : null;\n  };\n  InternalDate.prototype.set = function (type, value) {\n    return type !== null ? InternalDateSetter_1[\"default\"].setValueDateComponent(this, type, value) : this;\n  };\n  InternalDate.prototype.shift = function (type, step, settings) {\n    return type !== null ? InternalDateSetter_1[\"default\"].shiftValueDateComponent(this, type, step, settings) : this;\n  };\n  InternalDate.prototype.parseValue = function (value) {\n    if (value === void 0) {value = '';}\n    var components = InternalDateTransformer_1[\"default\"].parseValueToDate(value, this.order) || tslib_1.__assign({}, constants_2.emptyDateComponents);\n    this.setComponents(components);\n    return this;\n  };\n  InternalDate.prototype.parseInternalValue = function (value) {\n    if (value === void 0) {value = '';}\n    var components = InternalDateTransformer_1[\"default\"].parseValueToDate(value, types_1.InternalDateOrder.DMY) || tslib_1.__assign({}, constants_2.emptyDateComponents);\n    this.setComponents(components);\n    return this;\n  };\n  InternalDate.prototype.validate = function (_a) {\n    var _b = _a === void 0 ? {} : _a,type = _b.type,nextValue = _b.nextValue,_c = _b.checks,checks = _c === void 0 ? Object.values(types_1.InternalDateValidateCheck) : _c;\n    var self = this;\n    if (type !== undefined) {\n      var clone = this.clone();\n      if (nextValue !== undefined) {\n        clone.set(type, nextValue);\n      }\n      self = clone;\n    }\n    if (checks.includes(types_1.InternalDateValidateCheck.NotNull) &&\n    !InternalDateValidator_1[\"default\"].checkForNull(self.getComponentsRaw(), type)) {\n      return false;\n    }\n    if (checks.includes(types_1.InternalDateValidateCheck.Number) &&\n    !Object.values(self.getComponentsRaw()).every(InternalDateValidator_1[\"default\"].testParseToNumber)) {\n      return false;\n    }\n    if (checks.includes(types_1.InternalDateValidateCheck.Limits) &&\n    !InternalDateValidator_1[\"default\"].checkLimits(self.getComponentsLikeNumber(), type)) {\n      return false;\n    }\n    if (checks.includes(types_1.InternalDateValidateCheck.Native) &&\n    !InternalDateValidator_1[\"default\"].compareWithNativeDate(self.getComponentsLikeNumber())) {\n      return false;\n    }\n    if (checks.includes(types_1.InternalDateValidateCheck.Range)) {\n      return type !== undefined ?\n      InternalDateValidator_1[\"default\"].checkRangePiecemeal(type, self.getComponentsLikeNumber(), self.start && self.start.getComponentsLikeNumber(), self.end && self.end.getComponentsLikeNumber()) :\n      InternalDateValidator_1[\"default\"].checkRangeFully(self.toNumber(), self.start && self.start.toNumber(), self.end && self.end.toNumber());\n    }\n    return true;\n  };\n  InternalDate.prototype.toFragments = function (settings, components) {\n    if (settings === void 0) {settings = {};}\n    if (components === void 0) {components = this.getComponentsRaw();}\n    return InternalDateTransformer_1[\"default\"].dateToFragments(components, tslib_1.__assign({ order: this.order, separator: this.separator }, settings));\n  };\n  /**\r\n      * Перевод даты в числовое представление (**НЕ** аналог `timestamp`)\r\n      * Предназначено для быстрого сравнивания дат `<=>`\r\n      */\n  InternalDate.prototype.toNumber = function () {\n    return Number(this.toFragments({ order: types_1.InternalDateOrder.YMD, withPad: true }).\n    map(function (_a) {\n      var valueWithPad = _a.valueWithPad;\n      return valueWithPad;\n    }).\n    join(''));\n  };\n  InternalDate.prototype.toString = function (settings) {\n    if (settings === void 0) {settings = {};}\n    return this.toFragments(tslib_1.__assign({ withPad: true, withSeparator: true }, settings)).\n    filter(function (_a) {\n      var value = _a.value;\n      return value !== null;\n    }).\n    map(function (_a) {\n      var type = _a.type,valueWithPad = _a.valueWithPad,value = _a.value;\n      return settings.withPad && type !== types_1.InternalDateComponentType.Separator ? valueWithPad : value;\n    }).\n    join('');\n  };\n  InternalDate.prototype.toInternalString = function () {\n    return InternalDateTransformer_1[\"default\"].dateToInternalString(this.getComponentsRaw());\n  };\n  InternalDate.prototype.toNativeFormat = function () {\n    var components = this.getComponentsLikeNumber();\n    if (InternalDateValidator_1[\"default\"].compareWithNativeDate(components)) {\n      return tslib_1.__assign({}, components, { month: components.month - 1 });\n    }\n    return null;\n  };\n  InternalDate.prototype.clone = function () {\n    return new InternalDate({ order: this.order, separator: this.separator }).\n    setComponents(tslib_1.__assign({}, this.components)).\n    setRangeStart(this.start && this.start.clone()).\n    setRangeEnd(this.end && this.end.clone());\n  };\n  InternalDate.prototype.restore = function (type) {\n    if (type === void 0) {type = null;}\n    var prev = this.getComponentsRaw();\n    var today = InternalDateGetter_1[\"default\"].getTodayComponents();\n    if (prev.year === null && prev.month === null && prev.date === null) {\n      return this;\n    }\n    var restoreYear = prev.year !== null && InternalDateValidator_1[\"default\"].testParseToNumber(prev.year) ?\n    prev.year > 50 && prev.year < 100 ?\n    Number(prev.year) + 1900 :\n    prev.year > 0 && prev.year < 51 ?\n    Number(prev.year) + 2000 :\n    prev.year :\n    today.year;\n    if (type === null && restoreYear !== prev.year || type === types_1.InternalDateComponentType.Year) {\n      this.setYear(restoreYear);\n    }\n    if (type === null && prev.month === null || type === types_1.InternalDateComponentType.Month) {\n      this.setMonth(today.month);\n    }\n    if (type === null && prev.date === null || type === types_1.InternalDateComponentType.Date) {\n      this.setDate(today.date);\n    }\n    return this;\n  };\n  InternalDate.prototype.cutOffExcess = function (type, _a) {\n    if (type === void 0) {type = null;}\n    var _b = _a === void 0 ? {} : _a,_c = _b.isLoop,isLoop = _c === void 0 ? false : _c,isRange = _b.isRange,_d = _b.isCutFeb,isCutFeb = _d === void 0 ? false : _d;\n    var _e = this.components,year = _e.year,month = _e.month,date = _e.date;\n    if ((type === null || type === types_1.InternalDateComponentType.Year) && InternalDateValidator_1[\"default\"].testParseToNumber(year)) {\n      this.shiftYear(0, { isLoop: isLoop, isRange: isRange, isCutFeb: isCutFeb });\n    }\n    if ((type === null || type === types_1.InternalDateComponentType.Month) && InternalDateValidator_1[\"default\"].testParseToNumber(month)) {\n      this.shiftMonth(0, { isLoop: isLoop, isRange: isRange, isCutFeb: isCutFeb });\n    }\n    if ((type === null || type === types_1.InternalDateComponentType.Date) && InternalDateValidator_1[\"default\"].testParseToNumber(date)) {\n      this.shiftDate(0, { isLoop: isLoop, isRange: isRange, isCutFeb: isCutFeb });\n    }\n    return this;\n  };\n  InternalDate.prototype.isIncomplete = function () {\n    return !this.isEmpty() && Object.values(this.components).some(function (component) {return component === null;});\n  };\n  InternalDate.prototype.isEmpty = function () {\n    return Object.values(this.components).every(function (component) {return component === null;});\n  };\n  InternalDate.prototype.getMinValue = function (type, isRange) {\n    if (isRange === true && this.start !== null) {\n      return Number(InternalDateCalculator_1[\"default\"].calcRangeStartDateComponent(type, this.getComponentsLikeNumber(), this.start.getComponentsLikeNumber()));\n    }\n    return InternalDateGetter_1[\"default\"].getDefaultMin(type);\n  };\n  InternalDate.prototype.getMaxValue = function (type, _a) {\n    var _b = _a === void 0 ? {} : _a,isRange = _b.isRange,isCutFeb = _b.isCutFeb;\n    if (isRange && this.end !== null) {\n      return Number(InternalDateCalculator_1[\"default\"].calcRangeEndDateComponent(type, this.getComponentsLikeNumber(), this.end.getComponentsLikeNumber()));\n    }\n    if (!isCutFeb) {\n      return InternalDateGetter_1[\"default\"].getDefaultMax(type);\n    }\n    return InternalDateGetter_1[\"default\"].getDefaultMax(type, this.getComponentsLikeNumber());\n  };\n  return InternalDate;\n}();\nexports.InternalDate = InternalDate;"]},"metadata":{},"sourceType":"script"}