{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar React = tslib_1.__importStar(require(\"react\"));\n\nvar react_dom_1 = tslib_1.__importDefault(require(\"react-dom\"));\n\nvar isActiveElement_1 = tslib_1.__importDefault(require(\"./isActiveElement\"));\n\nvar ScrollContainer_1 = tslib_1.__importDefault(require(\"../ScrollContainer/ScrollContainer\"));\n\nvar MenuItem_1 = require(\"../MenuItem/MenuItem\");\n\nvar MenuHeader_1 = require(\"../MenuHeader/MenuHeader\");\n\nvar Menu_module_less_1 = tslib_1.__importDefault(require(\"./Menu.module.css\"));\n\nvar Emotion_1 = require(\"../../lib/theming/Emotion\");\n\nvar Menu_styles_1 = tslib_1.__importDefault(require(\"./Menu.styles\"));\n\nvar ThemeConsumer_1 = require(\"../ThemeConsumer\");\n\nvar Menu =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Menu, _super);\n\n  function Menu() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      highlightedIndex: -1\n    };\n    _this.unmounted = false;\n\n    _this.refScrollContainer = function (scrollContainer) {\n      _this.scrollContainer = scrollContainer;\n    };\n\n    _this.scrollToSelected = function () {\n      if (_this.scrollContainer && _this.highlighted) {\n        _this.scrollContainer.scrollTo(react_dom_1[\"default\"].findDOMNode(_this.highlighted));\n      }\n    };\n\n    _this.scrollToTop = function () {\n      if (_this.scrollContainer) {\n        _this.scrollContainer.scrollToTop();\n      }\n    };\n\n    _this.scrollToBottom = function () {\n      if (_this.scrollContainer) {\n        _this.scrollContainer.scrollToBottom();\n      }\n    };\n\n    _this.highlight = function (index) {\n      _this.setState({\n        highlightedIndex: index\n      });\n    };\n\n    _this.unhighlight = function () {\n      _this.setState({\n        highlightedIndex: -1\n      });\n    };\n\n    return _this;\n  }\n\n  Menu.prototype.componentWillUnmount = function () {\n    this.unmounted = true;\n  };\n\n  Menu.prototype.render = function () {\n    var _this = this;\n\n    return React.createElement(ThemeConsumer_1.ThemeConsumer, null, function (theme) {\n      _this.theme = theme;\n      return _this.renderMain();\n    });\n  };\n  /**\r\n      * @public\r\n      */\n\n\n  Menu.prototype.up = function () {\n    this.move(-1);\n  };\n  /**\r\n      * @public\r\n      */\n\n\n  Menu.prototype.down = function () {\n    this.move(1);\n  };\n  /**\r\n      * @public\r\n      */\n\n\n  Menu.prototype.enter = function (event) {\n    return this.select(this.state.highlightedIndex, true, event);\n  };\n  /**\r\n      * @public\r\n      */\n\n\n  Menu.prototype.reset = function () {\n    this.setState({\n      highlightedIndex: -1\n    });\n  };\n  /**\r\n      * @public\r\n      */\n\n\n  Menu.prototype.hasHighlightedItem = function () {\n    return this.state.highlightedIndex !== -1;\n  };\n\n  Menu.prototype.highlightItem = function (index) {\n    this.highlight(index);\n  };\n\n  Menu.prototype.renderMain = function () {\n    var _this = this;\n\n    var enableIconPadding = React.Children.toArray(this.props.children).some(function (x) {\n      return typeof x === 'object' && x.props.icon;\n    });\n\n    if (this.isEmpty()) {\n      return null;\n    }\n\n    return React.createElement(\"div\", {\n      className: Emotion_1.cx(Menu_module_less_1[\"default\"].root, Menu_styles_1[\"default\"].root(this.theme), this.props.hasShadow && Menu_styles_1[\"default\"].shadow(this.theme)),\n      style: {\n        width: this.props.width,\n        maxHeight: this.props.maxHeight\n      }\n    }, React.createElement(ScrollContainer_1[\"default\"], {\n      ref: this.refScrollContainer,\n      maxHeight: this.props.maxHeight,\n      preventWindowScroll: this.props.preventWindowScroll\n    }, React.Children.map(this.props.children, function (child, index) {\n      if (!child) {\n        return child;\n      }\n\n      if (typeof child === 'string' || typeof child === 'number') {\n        return child;\n      }\n\n      if (enableIconPadding && (MenuItem_1.isMenuItem(child) || MenuHeader_1.isMenuHeader(child))) {\n        child = React.cloneElement(child, {\n          _enableIconPadding: true\n        });\n      }\n\n      if (isActiveElement_1[\"default\"](child)) {\n        var highlight = _this.state.highlightedIndex === index;\n        var ref = child.ref;\n\n        if (highlight && typeof child.ref !== 'string') {\n          ref = _this.refHighlighted.bind(_this, child.ref);\n        }\n\n        return React.cloneElement(child, {\n          ref: ref,\n          state: highlight ? 'hover' : child.props.state,\n          onClick: _this.select.bind(_this, index, false),\n          onMouseEnter: _this.highlight.bind(_this, index),\n          onMouseLeave: _this.unhighlight\n        });\n      }\n\n      return child;\n    })));\n  };\n\n  Menu.prototype.refHighlighted = function (originalRef, menuItem) {\n    this.highlighted = menuItem;\n\n    if (typeof originalRef === 'function') {\n      originalRef(menuItem);\n    }\n  };\n\n  Menu.prototype.select = function (index, shouldHandleHref, event) {\n    var item = childrenToArray(this.props.children)[index];\n\n    if (isActiveElement_1[\"default\"](item)) {\n      if (shouldHandleHref && item.props.href) {\n        if (item.props.target) {\n          window.open(item.props.href, item.props.target);\n        } else {\n          location.href = item.props.href;\n        }\n      }\n\n      if (item.props.onClick) {\n        item.props.onClick(event);\n      }\n\n      if (this.props.onItemClick) {\n        this.props.onItemClick();\n      }\n\n      return true;\n    }\n\n    return false;\n  };\n\n  Menu.prototype.move = function (step) {\n    var _this = this;\n\n    if (this.unmounted) {\n      // NOTE workaround, because `ComboBox` call `process.nextTick` in reducer\n      return;\n    }\n\n    var children = childrenToArray(this.props.children);\n    var activeElements = children.filter(isActiveElement_1[\"default\"]);\n\n    if (!activeElements.length) {\n      return;\n    }\n\n    var index = this.state.highlightedIndex;\n\n    var _loop_1 = function _loop_1() {\n      index += step;\n\n      if (index < 0) {\n        index = children.length - 1;\n      } else if (index > children.length) {\n        index = 0;\n      }\n\n      var child = children[index];\n\n      if (isActiveElement_1[\"default\"](child)) {\n        this_1.setState({\n          highlightedIndex: index\n        }, function () {\n          switch (activeElements.indexOf(child)) {\n            case 0:\n              _this.scrollToTop();\n\n              break;\n\n            case activeElements.length - 1:\n              _this.scrollToBottom();\n\n              break;\n\n            default:\n              _this.scrollToSelected();\n\n          }\n        });\n        return {\n          value: void 0\n        };\n      }\n    };\n\n    var this_1 = this;\n\n    do {\n      var state_1 = _loop_1();\n\n      if (typeof state_1 === \"object\") return state_1.value;\n    } while (index !== this.state.highlightedIndex);\n  };\n\n  Menu.prototype.isEmpty = function () {\n    var children = this.props.children;\n    return !children || !childrenToArray(children).filter(isExist).length;\n  };\n\n  Menu.__KONTUR_REACT_UI__ = 'Menu';\n  Menu.defaultProps = {\n    width: 'auto',\n    maxHeight: 300,\n    hasShadow: true,\n    preventWindowScroll: true\n  };\n  return Menu;\n}(React.Component);\n\nexports[\"default\"] = Menu;\n\nfunction isExist(value) {\n  return value !== null && value !== undefined;\n}\n\nfunction childrenToArray(children) {\n  var ret = []; // Use forEach instead of map to avoid cloning for key unifying.\n\n  React.Children.forEach(children, function (child) {\n    ret.push(child);\n  });\n  return ret;\n}","map":{"version":3,"sources":["/home/aleksandr/coursework.front/node_modules/@skbkontur/react-ui/components/Menu/Menu.js"],"names":["Object","defineProperty","exports","value","tslib_1","require","React","__importStar","react_dom_1","__importDefault","isActiveElement_1","ScrollContainer_1","MenuItem_1","MenuHeader_1","Menu_module_less_1","Emotion_1","Menu_styles_1","ThemeConsumer_1","Menu","_super","__extends","_this","apply","arguments","state","highlightedIndex","unmounted","refScrollContainer","scrollContainer","scrollToSelected","highlighted","scrollTo","findDOMNode","scrollToTop","scrollToBottom","highlight","index","setState","unhighlight","prototype","componentWillUnmount","render","createElement","ThemeConsumer","theme","renderMain","up","move","down","enter","event","select","reset","hasHighlightedItem","highlightItem","enableIconPadding","Children","toArray","props","children","some","x","icon","isEmpty","className","cx","root","hasShadow","shadow","style","width","maxHeight","ref","preventWindowScroll","map","child","isMenuItem","isMenuHeader","cloneElement","_enableIconPadding","refHighlighted","bind","onClick","onMouseEnter","onMouseLeave","originalRef","menuItem","shouldHandleHref","item","childrenToArray","href","target","window","open","location","onItemClick","step","activeElements","filter","length","_loop_1","this_1","indexOf","state_1","isExist","__KONTUR_REACT_UI__","defaultProps","Component","undefined","ret","forEach","push"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = tslib_1.__importStar(require(\"react\"));\nvar react_dom_1 = tslib_1.__importDefault(require(\"react-dom\"));\nvar isActiveElement_1 = tslib_1.__importDefault(require(\"./isActiveElement\"));\nvar ScrollContainer_1 = tslib_1.__importDefault(require(\"../ScrollContainer/ScrollContainer\"));\nvar MenuItem_1 = require(\"../MenuItem/MenuItem\");\nvar MenuHeader_1 = require(\"../MenuHeader/MenuHeader\");\nvar Menu_module_less_1 = tslib_1.__importDefault(require(\"./Menu.module.css\"));\nvar Emotion_1 = require(\"../../lib/theming/Emotion\");\nvar Menu_styles_1 = tslib_1.__importDefault(require(\"./Menu.styles\"));\nvar ThemeConsumer_1 = require(\"../ThemeConsumer\");\nvar Menu = /** @class */function (_super) {\n  tslib_1.__extends(Menu, _super);\n  function Menu() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.state = {\n      highlightedIndex: -1 };\n\n    _this.unmounted = false;\n    _this.refScrollContainer = function (scrollContainer) {\n      _this.scrollContainer = scrollContainer;\n    };\n    _this.scrollToSelected = function () {\n      if (_this.scrollContainer && _this.highlighted) {\n        _this.scrollContainer.scrollTo(react_dom_1[\"default\"].findDOMNode(_this.highlighted));\n      }\n    };\n    _this.scrollToTop = function () {\n      if (_this.scrollContainer) {\n        _this.scrollContainer.scrollToTop();\n      }\n    };\n    _this.scrollToBottom = function () {\n      if (_this.scrollContainer) {\n        _this.scrollContainer.scrollToBottom();\n      }\n    };\n    _this.highlight = function (index) {\n      _this.setState({ highlightedIndex: index });\n    };\n    _this.unhighlight = function () {\n      _this.setState({ highlightedIndex: -1 });\n    };\n    return _this;\n  }\n  Menu.prototype.componentWillUnmount = function () {\n    this.unmounted = true;\n  };\n  Menu.prototype.render = function () {\n    var _this = this;\n    return React.createElement(ThemeConsumer_1.ThemeConsumer, null, function (theme) {\n      _this.theme = theme;\n      return _this.renderMain();\n    });\n  };\n  /**\r\n      * @public\r\n      */\n  Menu.prototype.up = function () {\n    this.move(-1);\n  };\n  /**\r\n      * @public\r\n      */\n  Menu.prototype.down = function () {\n    this.move(1);\n  };\n  /**\r\n      * @public\r\n      */\n  Menu.prototype.enter = function (event) {\n    return this.select(this.state.highlightedIndex, true, event);\n  };\n  /**\r\n      * @public\r\n      */\n  Menu.prototype.reset = function () {\n    this.setState({ highlightedIndex: -1 });\n  };\n  /**\r\n      * @public\r\n      */\n  Menu.prototype.hasHighlightedItem = function () {\n    return this.state.highlightedIndex !== -1;\n  };\n  Menu.prototype.highlightItem = function (index) {\n    this.highlight(index);\n  };\n  Menu.prototype.renderMain = function () {\n    var _this = this;\n    var enableIconPadding = React.Children.toArray(this.props.children).some(function (x) {return typeof x === 'object' && x.props.icon;});\n    if (this.isEmpty()) {\n      return null;\n    }\n    return React.createElement(\"div\", { className: Emotion_1.cx(Menu_module_less_1[\"default\"].root, Menu_styles_1[\"default\"].root(this.theme), this.props.hasShadow && Menu_styles_1[\"default\"].shadow(this.theme)), style: { width: this.props.width, maxHeight: this.props.maxHeight } },\n    React.createElement(ScrollContainer_1[\"default\"], { ref: this.refScrollContainer, maxHeight: this.props.maxHeight, preventWindowScroll: this.props.preventWindowScroll }, React.Children.map(this.props.children, function (child, index) {\n      if (!child) {\n        return child;\n      }\n      if (typeof child === 'string' || typeof child === 'number') {\n        return child;\n      }\n      if (enableIconPadding && (MenuItem_1.isMenuItem(child) || MenuHeader_1.isMenuHeader(child))) {\n        child = React.cloneElement(child, {\n          _enableIconPadding: true });\n\n      }\n      if (isActiveElement_1[\"default\"](child)) {\n        var highlight = _this.state.highlightedIndex === index;\n        var ref = child.ref;\n        if (highlight && typeof child.ref !== 'string') {\n          ref = _this.refHighlighted.bind(_this, child.ref);\n        }\n        return React.cloneElement(child, {\n          ref: ref,\n          state: highlight ? 'hover' : child.props.state,\n          onClick: _this.select.bind(_this, index, false),\n          onMouseEnter: _this.highlight.bind(_this, index),\n          onMouseLeave: _this.unhighlight });\n\n      }\n      return child;\n    })));\n  };\n  Menu.prototype.refHighlighted = function (originalRef, menuItem) {\n    this.highlighted = menuItem;\n    if (typeof originalRef === 'function') {\n      originalRef(menuItem);\n    }\n  };\n  Menu.prototype.select = function (index, shouldHandleHref, event) {\n    var item = childrenToArray(this.props.children)[index];\n    if (isActiveElement_1[\"default\"](item)) {\n      if (shouldHandleHref && item.props.href) {\n        if (item.props.target) {\n          window.open(item.props.href, item.props.target);\n        } else\n        {\n          location.href = item.props.href;\n        }\n      }\n      if (item.props.onClick) {\n        item.props.onClick(event);\n      }\n      if (this.props.onItemClick) {\n        this.props.onItemClick();\n      }\n      return true;\n    }\n    return false;\n  };\n  Menu.prototype.move = function (step) {\n    var _this = this;\n    if (this.unmounted) {\n      // NOTE workaround, because `ComboBox` call `process.nextTick` in reducer\n      return;\n    }\n    var children = childrenToArray(this.props.children);\n    var activeElements = children.filter(isActiveElement_1[\"default\"]);\n    if (!activeElements.length) {\n      return;\n    }\n    var index = this.state.highlightedIndex;\n    var _loop_1 = function _loop_1() {\n      index += step;\n      if (index < 0) {\n        index = children.length - 1;\n      } else\n      if (index > children.length) {\n        index = 0;\n      }\n      var child = children[index];\n      if (isActiveElement_1[\"default\"](child)) {\n        this_1.setState({ highlightedIndex: index }, function () {\n          switch (activeElements.indexOf(child)) {\n            case 0:\n              _this.scrollToTop();\n              break;\n            case activeElements.length - 1:\n              _this.scrollToBottom();\n              break;\n            default:\n              _this.scrollToSelected();}\n\n        });\n        return { value: void 0 };\n      }\n    };\n    var this_1 = this;\n    do {\n      var state_1 = _loop_1();\n      if (typeof state_1 === \"object\")\n      return state_1.value;\n    } while (index !== this.state.highlightedIndex);\n  };\n  Menu.prototype.isEmpty = function () {\n    var children = this.props.children;\n    return !children || !childrenToArray(children).filter(isExist).length;\n  };\n  Menu.__KONTUR_REACT_UI__ = 'Menu';\n  Menu.defaultProps = {\n    width: 'auto',\n    maxHeight: 300,\n    hasShadow: true,\n    preventWindowScroll: true };\n\n  return Menu;\n}(React.Component);\nexports[\"default\"] = Menu;\nfunction isExist(value) {\n  return value !== null && value !== undefined;\n}\nfunction childrenToArray(children) {\n  var ret = [];\n  // Use forEach instead of map to avoid cloning for key unifying.\n  React.Children.forEach(children, function (child) {\n    ret.push(child);\n  });\n  return ret;\n}"]},"metadata":{},"sourceType":"script"}