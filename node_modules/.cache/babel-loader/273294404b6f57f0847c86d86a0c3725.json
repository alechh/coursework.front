{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar React = tslib_1.__importStar(require(\"react\"));\n\nvar getComputedStyle_1 = tslib_1.__importDefault(require(\"../../lib/dom/getComputedStyle\"));\n\nvar getScrollWidth_1 = tslib_1.__importDefault(require(\"../../lib/dom/getScrollWidth\"));\n\nvar HideBodyVerticalScroll =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(HideBodyVerticalScroll, _super);\n\n  function HideBodyVerticalScroll() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.disposeDocumentStyle = null;\n    _this.initialScroll = 0;\n    _this.master = false;\n\n    _this.updateScrollVisibility = function () {\n      var documentElement = document.documentElement;\n\n      _this.restoreStyles();\n\n      if (!documentElement) {\n        return;\n      }\n\n      var clientHeight = documentElement.clientHeight,\n          scrollHeight = documentElement.scrollHeight;\n      var shouldRestore = VerticalScrollCounter.get() === 0;\n      var shouldHide = !shouldRestore && clientHeight < scrollHeight;\n\n      if (shouldHide) {\n        _this.makeSomeMagicWithScroll(documentElement);\n      }\n\n      if (shouldRestore) {\n        documentElement.scrollTop = _this.initialScroll;\n      }\n    };\n\n    _this.makeSomeMagicWithScroll = function (document) {\n      var documentComputedStyle = getComputedStyle_1[\"default\"](document);\n      var scrollWidth = getScrollWidth_1[\"default\"]();\n      var documentMargin = parseFloat(documentComputedStyle.marginRight || '');\n      var documentStyle = generateDocumentStyle(documentMargin + scrollWidth);\n      _this.disposeDocumentStyle = _this.attachStyle(document, documentStyle);\n    };\n\n    _this.attachStyle = function (element, style) {\n      element.classList.add(style.className);\n      var removeStyleNode = attachStylesheet(style.css);\n      return function () {\n        removeStyleNode();\n        element.classList.remove(style.className);\n      };\n    };\n\n    _this.restoreStyles = function () {\n      if (_this.disposeDocumentStyle) {\n        _this.disposeDocumentStyle();\n\n        _this.disposeDocumentStyle = null;\n      } // Forcing reflow for Firefix\n\n\n      attachStylesheet('html, body { height: auto; }')();\n    };\n\n    return _this;\n  }\n\n  HideBodyVerticalScroll.prototype.componentDidMount = function () {\n    var counter = VerticalScrollCounter.increment();\n\n    if (counter === 1) {\n      this.master = true;\n      this.initialScroll = document.documentElement ? document.documentElement.scrollTop : 0;\n      this.updateScrollVisibility();\n      window.addEventListener('resize', this.updateScrollVisibility);\n    }\n  };\n\n  HideBodyVerticalScroll.prototype.componentDidUpdate = function () {\n    if (this.master) {\n      this.updateScrollVisibility();\n    }\n  };\n\n  HideBodyVerticalScroll.prototype.componentWillUnmount = function () {\n    this.restoreStyles();\n    var counter = VerticalScrollCounter.decrement();\n\n    if (counter === 0) {\n      this.updateScrollVisibility();\n      window.removeEventListener('resize', this.updateScrollVisibility);\n    }\n  };\n\n  HideBodyVerticalScroll.prototype.render = function () {\n    return null;\n  };\n\n  HideBodyVerticalScroll.__KONTUR_REACT_UI__ = 'HideBodyVerticalScroll';\n  HideBodyVerticalScroll.hash = Math.random().toString(16).slice(2, 6);\n  return HideBodyVerticalScroll;\n}(React.Component);\n\nexports[\"default\"] = HideBodyVerticalScroll;\n\nvar VerticalScrollCounter =\n/** @class */\nfunction () {\n  function VerticalScrollCounter() {}\n\n  VerticalScrollCounter.increment = function () {\n    var counter = window.RetailUIVerticalScrollCounter || 0;\n    return window.RetailUIVerticalScrollCounter = counter + 1;\n  };\n\n  VerticalScrollCounter.decrement = function () {\n    var counter = window.RetailUIVerticalScrollCounter || 0;\n    return window.RetailUIVerticalScrollCounter = counter - 1;\n  };\n\n  VerticalScrollCounter.get = function () {\n    return window.RetailUIVerticalScrollCounter || 0;\n  };\n\n  return VerticalScrollCounter;\n}();\n\nfunction generateClassName(className) {\n  var name = HideBodyVerticalScroll.name,\n      hash = HideBodyVerticalScroll.hash;\n  return name + \"-\" + className + \"-\" + hash;\n}\n\nfunction generateDocumentStyle(documentMargin) {\n  var className = generateClassName('document');\n  var css = \".\" + className + \" {\\n  overflow: hidden !important;\\n  margin-right: \" + documentMargin + \"px !important;\\n  height: 100%;\\n}\\n\";\n  return {\n    className: className,\n    css: css\n  };\n}\n\nfunction attachStylesheet(sheet) {\n  var style = document.createElement('style');\n  style.setAttribute('type', 'text/css'); // @ts-ignore IE specific api\n\n  if (style.styleSheet) {\n    // @ts-ignore IE specific api\n    style.styleSheet.cssText = sheet;\n  } else {\n    var textnode = document.createTextNode(sheet);\n    style.appendChild(textnode);\n  }\n\n  var head = document.getElementsByTagName('head')[0];\n  head.appendChild(style);\n  return function () {\n    if (head.contains(style)) {\n      head.removeChild(style);\n    }\n  };\n}","map":{"version":3,"sources":["C:/Users/Sasha/Documents/coursework.front/node_modules/@skbkontur/react-ui/components/HideBodyVerticalScroll/HideBodyVerticalScroll.js"],"names":["Object","defineProperty","exports","value","tslib_1","require","React","__importStar","getComputedStyle_1","__importDefault","getScrollWidth_1","HideBodyVerticalScroll","_super","__extends","_this","apply","arguments","disposeDocumentStyle","initialScroll","master","updateScrollVisibility","documentElement","document","restoreStyles","clientHeight","scrollHeight","shouldRestore","VerticalScrollCounter","get","shouldHide","makeSomeMagicWithScroll","scrollTop","documentComputedStyle","scrollWidth","documentMargin","parseFloat","marginRight","documentStyle","generateDocumentStyle","attachStyle","element","style","classList","add","className","removeStyleNode","attachStylesheet","css","remove","prototype","componentDidMount","counter","increment","window","addEventListener","componentDidUpdate","componentWillUnmount","decrement","removeEventListener","render","__KONTUR_REACT_UI__","hash","Math","random","toString","slice","Component","RetailUIVerticalScrollCounter","generateClassName","name","sheet","createElement","setAttribute","styleSheet","cssText","textnode","createTextNode","appendChild","head","getElementsByTagName","contains","removeChild"],"mappings":"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","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar React = tslib_1.__importStar(require(\"react\"));\r\nvar getComputedStyle_1 = tslib_1.__importDefault(require(\"../../lib/dom/getComputedStyle\"));\r\nvar getScrollWidth_1 = tslib_1.__importDefault(require(\"../../lib/dom/getScrollWidth\"));\r\nvar HideBodyVerticalScroll = /** @class */function (_super) {\r\n  tslib_1.__extends(HideBodyVerticalScroll, _super);\r\n  function HideBodyVerticalScroll() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n    _this.disposeDocumentStyle = null;\r\n    _this.initialScroll = 0;\r\n    _this.master = false;\r\n    _this.updateScrollVisibility = function () {\r\n      var documentElement = document.documentElement;\r\n      _this.restoreStyles();\r\n      if (!documentElement) {\r\n        return;\r\n      }\r\n      var clientHeight = documentElement.clientHeight,scrollHeight = documentElement.scrollHeight;\r\n      var shouldRestore = VerticalScrollCounter.get() === 0;\r\n      var shouldHide = !shouldRestore && clientHeight < scrollHeight;\r\n      if (shouldHide) {\r\n        _this.makeSomeMagicWithScroll(documentElement);\r\n      }\r\n      if (shouldRestore) {\r\n        documentElement.scrollTop = _this.initialScroll;\r\n      }\r\n    };\r\n    _this.makeSomeMagicWithScroll = function (document) {\r\n      var documentComputedStyle = getComputedStyle_1[\"default\"](document);\r\n      var scrollWidth = getScrollWidth_1[\"default\"]();\r\n      var documentMargin = parseFloat(documentComputedStyle.marginRight || '');\r\n      var documentStyle = generateDocumentStyle(documentMargin + scrollWidth);\r\n      _this.disposeDocumentStyle = _this.attachStyle(document, documentStyle);\r\n    };\r\n    _this.attachStyle = function (element, style) {\r\n      element.classList.add(style.className);\r\n      var removeStyleNode = attachStylesheet(style.css);\r\n      return function () {\r\n        removeStyleNode();\r\n        element.classList.remove(style.className);\r\n      };\r\n    };\r\n    _this.restoreStyles = function () {\r\n      if (_this.disposeDocumentStyle) {\r\n        _this.disposeDocumentStyle();\r\n        _this.disposeDocumentStyle = null;\r\n      }\r\n      // Forcing reflow for Firefix\r\n      attachStylesheet('html, body { height: auto; }')();\r\n    };\r\n    return _this;\r\n  }\r\n  HideBodyVerticalScroll.prototype.componentDidMount = function () {\r\n    var counter = VerticalScrollCounter.increment();\r\n    if (counter === 1) {\r\n      this.master = true;\r\n      this.initialScroll = document.documentElement ? document.documentElement.scrollTop : 0;\r\n      this.updateScrollVisibility();\r\n      window.addEventListener('resize', this.updateScrollVisibility);\r\n    }\r\n  };\r\n  HideBodyVerticalScroll.prototype.componentDidUpdate = function () {\r\n    if (this.master) {\r\n      this.updateScrollVisibility();\r\n    }\r\n  };\r\n  HideBodyVerticalScroll.prototype.componentWillUnmount = function () {\r\n    this.restoreStyles();\r\n    var counter = VerticalScrollCounter.decrement();\r\n    if (counter === 0) {\r\n      this.updateScrollVisibility();\r\n      window.removeEventListener('resize', this.updateScrollVisibility);\r\n    }\r\n  };\r\n  HideBodyVerticalScroll.prototype.render = function () {\r\n    return null;\r\n  };\r\n  HideBodyVerticalScroll.__KONTUR_REACT_UI__ = 'HideBodyVerticalScroll';\r\n  HideBodyVerticalScroll.hash = Math.random().\r\n  toString(16).\r\n  slice(2, 6);\r\n  return HideBodyVerticalScroll;\r\n}(React.Component);\r\nexports[\"default\"] = HideBodyVerticalScroll;\r\nvar VerticalScrollCounter = /** @class */function () {\r\n  function VerticalScrollCounter() {\r\n  }\r\n  VerticalScrollCounter.increment = function () {\r\n    var counter = window.RetailUIVerticalScrollCounter || 0;\r\n    return window.RetailUIVerticalScrollCounter = counter + 1;\r\n  };\r\n  VerticalScrollCounter.decrement = function () {\r\n    var counter = window.RetailUIVerticalScrollCounter || 0;\r\n    return window.RetailUIVerticalScrollCounter = counter - 1;\r\n  };\r\n  VerticalScrollCounter.get = function () {\r\n    return window.RetailUIVerticalScrollCounter || 0;\r\n  };\r\n  return VerticalScrollCounter;\r\n}();\r\nfunction generateClassName(className) {\r\n  var name = HideBodyVerticalScroll.name,hash = HideBodyVerticalScroll.hash;\r\n  return name + \"-\" + className + \"-\" + hash;\r\n}\r\nfunction generateDocumentStyle(documentMargin) {\r\n  var className = generateClassName('document');\r\n  var css = \".\" + className + \" {\\n  overflow: hidden !important;\\n  margin-right: \" + documentMargin + \"px !important;\\n  height: 100%;\\n}\\n\";\r\n  return { className: className, css: css };\r\n}\r\nfunction attachStylesheet(sheet) {\r\n  var style = document.createElement('style');\r\n  style.setAttribute('type', 'text/css');\r\n  // @ts-ignore IE specific api\r\n  if (style.styleSheet) {\r\n    // @ts-ignore IE specific api\r\n    style.styleSheet.cssText = sheet;\r\n  } else\r\n  {\r\n    var textnode = document.createTextNode(sheet);\r\n    style.appendChild(textnode);\r\n  }\r\n  var head = document.getElementsByTagName('head')[0];\r\n  head.appendChild(style);\r\n  return function () {\r\n    if (head.contains(style)) {\r\n      head.removeChild(style);\r\n    }\r\n  };\r\n}"]},"metadata":{},"sourceType":"script"}