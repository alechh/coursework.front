{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Sasha\\\\Documents\\\\coursework.front\\\\src\\\\Components\\\\MainWindow\\\\MainWindowComponents\\\\Content\\\\BiddingList\\\\BiddingList.tsx\";\nimport React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Gapped from '@skbkontur/react-ui/Gapped';\nimport './BiddingList.css';\nimport Button from '@skbkontur/react-ui/Button';\nimport Edit from '@skbkontur/react-icons/Edit';\nimport SidePage from '@skbkontur/react-ui/SidePage';\nimport Toast from '@skbkontur/react-ui/Toast';\nimport Ok from '@skbkontur/react-icons/Ok'; //curator\n\nclass BiddingList extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.openSidePage = courseWorkId => {\n      this.setState({\n        isSidePageOpen: true,\n        whichSidePage: courseWorkId\n      });\n    };\n\n    this.closeSidePage = () => {\n      this.setState({\n        isSidePageOpen: false\n      });\n    };\n\n    this.editBidding = event => {\n      const value = event.currentTarget.value;\n      const courseWorkId = Number(value.substr(11, value.indexOf('critic') - 12));\n      const criticId = value.substr(value.indexOf('critic') + 6); //запрос по courseWorkId и criticId на назначение рецензента на курсовую\n      //-------------------------------------------------------------------------\n\n      Toast.push('Курсовой ' + courseWorkId + ' назначен рецензент ' + criticId); //-------------------------------------------------------------------------\n\n      this.closeSidePage();\n      this.loadingData();\n    };\n\n    this.renderRejectButton = courseWorkId => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        onClick: () => {\n          this.openSidePage(courseWorkId);\n        },\n        icon: /*#__PURE__*/React.createElement(Edit, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 27\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 17\n        }\n      }, \"\\u041F\\u0435\\u0440\\u0435\\u043D\\u0430\\u0437\\u043D\\u0430\\u0447\\u0438\\u0442\\u044C\"));\n    };\n\n    this.state = {\n      data: [{}],\n      critics: [{}],\n      isSidePageOpen: false,\n      whichSidePage: 0,\n      isLoading: false\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      isLoading: true\n    });\n    this.loadingData();\n    this.setState({\n      isLoading: false\n    });\n  }\n\n  loadingData() {//Результат биддинга (token)\n    //this.setState({data : biddingList, critics : myCritics})\n  }\n\n  complete() {\n    // Завершение биддинга (token)\n    Toast.push('Рецензенты назначены');\n  }\n\n  renderSidePage(courseWorkId) {\n    let courseWorkTitle = ''; // eslint-disable-next-line\n\n    this.state.data.map(item => {\n      if (item.id === courseWorkId) courseWorkTitle = item.title;\n    });\n    return /*#__PURE__*/React.createElement(SidePage, {\n      onClose: this.closeSidePage,\n      blockBackground: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sideTitle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(SidePage.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 40\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 57\n      }\n    }, courseWorkTitle))), /*#__PURE__*/React.createElement(SidePage.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginLeft: '1vw',\n        marginTop: '1vh',\n        marginBottom: '2vh'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 92\n      }\n    }, \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0440\\u0435\\u0446\\u0435\\u043D\\u0437\\u0435\\u043D\\u0442\\u0430 \\u043D\\u0430 \\u044D\\u0442\\u0443 \\u043A\\u0443\\u0440\\u0441\\u043E\\u0432\\u0443\\u044E\")), this.state.critics.map(item => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          marginLeft: '3vw',\n          marginTop: '3vh',\n          borderBottom: 'rgb(199, 180, 180) 1px solid'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(Gapped, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          minWidth: '10vw'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"h6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 62\n        }\n      }, item.name, \", \\u043A\\u0430\\u0444\\u0435\\u0434\\u0440\\u0430 \", item.department)), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"buttonMore\",\n        onClick: this.editBidding,\n        value: 'editBidding' + courseWorkId + '_critic' + item.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"button\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 30\n        }\n      }, \"\\u041D\\u0430\\u0437\\u043D\\u0430\\u0447\\u0438\\u0442\\u044C\"))));\n    })), /*#__PURE__*/React.createElement(SidePage.Footer, {\n      panel: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: this.closeSidePage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 15\n      }\n    }, \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\")));\n  }\n\n  renderItem(item) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"biddingItem\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Gapped, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"biddingTitle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 51\n      }\n    }, item.title)), /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 21\n      }\n    }, \"--\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"biddingCritic\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 52\n      }\n    }, item.critic)), this.renderRejectButton(item.id)));\n  }\n\n  renderList() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 13\n      }\n    }, this.state.data.map(item => this.renderItem(item)), this.state.isSidePageOpen && this.renderSidePage(this.state.whichSidePage), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginTop: '3vh',\n        marginLeft: '1vw'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: this.complete,\n      use: \"success\",\n      icon: /*#__PURE__*/React.createElement(Ok, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 33\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 21\n      }\n    }, \"\\u041D\\u0430\\u0437\\u043D\\u0430\\u0447\\u0438\\u0442\\u044C \\u0440\\u0435\\u0446\\u0435\\u043D\\u0437\\u0435\\u043D\\u0442\\u043E\\u0432\")));\n  }\n\n  isEmpty(obj) {\n    return Object.keys(obj[0]).length === 0;\n  }\n\n  renderEmptyList() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        textAlign: \"center\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }\n    }, \"\\u041D\\u0435\\u0442 \\u0440\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\\u043E\\u0432 \\u0431\\u0438\\u0434\\u0434\\u0438\\u043D\\u0433\\u0430\"));\n  }\n\n  render() {\n    return !this.isEmpty(this.state.data) ? this.renderList() : this.renderEmptyList();\n  }\n\n}\n\nexport default BiddingList;","map":{"version":3,"sources":["C:/Users/Sasha/Documents/coursework.front/src/Components/MainWindow/MainWindowComponents/Content/BiddingList/BiddingList.tsx"],"names":["React","Typography","Gapped","Button","Edit","SidePage","Toast","Ok","BiddingList","Component","constructor","props","openSidePage","courseWorkId","setState","isSidePageOpen","whichSidePage","closeSidePage","editBidding","event","value","currentTarget","Number","substr","indexOf","criticId","push","loadingData","renderRejectButton","state","data","critics","isLoading","componentDidMount","complete","renderSidePage","courseWorkTitle","map","item","id","title","marginLeft","marginTop","marginBottom","borderBottom","minWidth","name","department","renderItem","critic","renderList","isEmpty","obj","Object","keys","length","renderEmptyList","textAlign","render"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Gapped from '@skbkontur/react-ui/Gapped'\r\nimport './BiddingList.css'\r\nimport Button from '@skbkontur/react-ui/Button'\r\nimport Edit from '@skbkontur/react-icons/Edit'\r\nimport SidePage from '@skbkontur/react-ui/SidePage'\r\nimport Toast from '@skbkontur/react-ui/Toast'\r\nimport Ok from '@skbkontur/react-icons/Ok'\r\n\r\n\r\n//curator\r\nimport biddingList from '../../../../../TestData/Curator/biddingList'\r\nimport myCritics from '../../../../../TestData/Curator/CurrentCritics'\r\n\r\ninterface Idata{\r\n    title?: string,\r\n    id?: number,\r\n    critic?: string,\r\n    criticId?: number\r\n}\r\n\r\ninterface ICritic{\r\n    name?: string,\r\n    id?: number,\r\n    course?: number,\r\n    department?: string\r\n}\r\n\r\ninterface Props{\r\n    token: string\r\n}\r\n\r\ninterface State{\r\n    data : Idata[],\r\n    critics : ICritic[],\r\n    isSidePageOpen?: boolean,\r\n    whichSidePage?: number,\r\n    isLoading?: boolean\r\n}\r\n\r\nclass BiddingList extends React.Component<Props,State>{\r\n    constructor(props : Props){\r\n        super(props)\r\n        this.state = {\r\n            data : [{}],\r\n            critics : [{}],\r\n            isSidePageOpen: false,\r\n            whichSidePage : 0,\r\n            isLoading : false\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.setState({isLoading : true})\r\n        this.loadingData()\r\n        this.setState({isLoading : false})\r\n    }\r\n\r\n    private loadingData(){\r\n        //Результат биддинга (token)\r\n\r\n        //this.setState({data : biddingList, critics : myCritics})\r\n    }\r\n\r\n    private openSidePage = (courseWorkId : number) => {\r\n        this.setState({isSidePageOpen : true, whichSidePage : courseWorkId})\r\n    }\r\n\r\n    private closeSidePage = () => {\r\n        this.setState({isSidePageOpen : false})\r\n    }\r\n\r\n    private complete(){\r\n        // Завершение биддинга (token)\r\n\r\n        Toast.push('Рецензенты назначены')\r\n    }\r\n\r\n    private editBidding = (event : React.MouseEvent<HTMLButtonElement>) => {\r\n        const value = event.currentTarget.value\r\n        const courseWorkId = Number(value.substr(11,value.indexOf('critic')-12))\r\n        const criticId = value.substr(value.indexOf('critic') + 6)\r\n\r\n        //запрос по courseWorkId и criticId на назначение рецензента на курсовую\r\n\r\n        //-------------------------------------------------------------------------\r\n        Toast.push('Курсовой ' + courseWorkId + ' назначен рецензент ' + criticId)\r\n        //-------------------------------------------------------------------------\r\n        \r\n        this.closeSidePage()\r\n        this.loadingData()\r\n    }\r\n\r\n    private renderSidePage(courseWorkId : number) {\r\n        let courseWorkTitle: string = ''  // eslint-disable-next-line\r\n        this.state.data.map(item => {\r\n            if(item.id === courseWorkId) courseWorkTitle = item.title!\r\n        })\r\n\r\n        return (\r\n          <SidePage onClose={this.closeSidePage} blockBackground>\r\n            <div className='sideTitle'><SidePage.Header><Typography variant='h4'>{courseWorkTitle}</Typography></SidePage.Header></div>\r\n            <SidePage.Body>\r\n                <div style={{marginLeft : '1vw', marginTop : '1vh', marginBottom : '2vh'}}><Typography variant='h5'>Выберите рецензента на эту курсовую</Typography></div>\r\n              {this.state.critics.map(item => {\r\n                  return (\r\n                      <div style={{marginLeft : '3vw', marginTop :'3vh', borderBottom : 'rgb(199, 180, 180) 1px solid'}}>\r\n                        <Gapped>\r\n                            <div style={{minWidth : '10vw'}}><Typography variant='h6'>{item.name}, кафедра {item.department}</Typography></div>\r\n                            <button\r\n                                className='buttonMore'\r\n                                onClick={this.editBidding}\r\n                                value={'editBidding' + courseWorkId + '_critic' + item.id}\r\n                            ><Typography variant='button'>Назначить</Typography></button>\r\n                        </Gapped>\r\n                        \r\n                      </div>\r\n                  )\r\n              })}\r\n            </SidePage.Body>\r\n            <SidePage.Footer panel>\r\n              <Button onClick={this.closeSidePage}>Отмена</Button>\r\n            </SidePage.Footer>\r\n          </SidePage>\r\n        );\r\n      }\r\n\r\n    private renderRejectButton = (courseWorkId : number) => {\r\n        return(\r\n            <div>\r\n                <Button\r\n                    onClick={() => {this.openSidePage(courseWorkId)}}\r\n                    icon={<Edit/>}\r\n                >Переназначить</Button>\r\n            </div>  \r\n        )\r\n    }\r\n\r\n    private renderItem(item : Idata){\r\n        return(\r\n            <div className='biddingItem'>\r\n                <Gapped>\r\n                    <div className='biddingTitle'><Typography variant='h6'>{item.title}</Typography></div>\r\n                    <Typography variant='h6'>--</Typography>\r\n                    <div className='biddingCritic'><Typography variant='h6'>{item.critic}</Typography></div>\r\n                    {this.renderRejectButton(item.id!)}\r\n                </Gapped>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    private renderList(){\r\n        return(\r\n            <div>\r\n                {this.state.data.map(item => this.renderItem(item))}\r\n                {this.state.isSidePageOpen && this.renderSidePage(this.state.whichSidePage!)}\r\n                <div style={{marginTop : '3vh', marginLeft : '1vw'}}>\r\n                    <Button\r\n                        onClick = {this.complete}\r\n                        use = 'success'\r\n                        icon = {<Ok/>}\r\n                    >Назначить рецензентов</Button>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    private isEmpty(obj : Idata[]) {\r\n        return Object.keys(obj[0]).length === 0;\r\n    }\r\n\r\n    private renderEmptyList(){\r\n        return(\r\n            <div style={{textAlign:\"center\"}}>\r\n                <Typography variant='h5'>Нет результатов биддинга</Typography>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            !this.isEmpty(this.state.data)?\r\n                this.renderList()\r\n            : this.renderEmptyList()\r\n        )\r\n    }\r\n}\r\n\r\nexport default BiddingList"]},"metadata":{},"sourceType":"module"}