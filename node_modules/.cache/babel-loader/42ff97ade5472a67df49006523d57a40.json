{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar React = tslib_1.__importStar(require(\"react\"));\n\nvar PropTypes = tslib_1.__importStar(require(\"prop-types\"));\n\nvar LayoutEvents_1 = tslib_1.__importDefault(require(\"../../lib/LayoutEvents\"));\n\nvar getScrollWidth_1 = tslib_1.__importDefault(require(\"../../lib/dom/getScrollWidth\"));\n\nvar ScrollContainer_module_less_1 = tslib_1.__importDefault(require(\"./ScrollContainer.module.css\"));\n\nvar utils_1 = require(\"../../lib/utils\");\n\nvar Emotion_1 = require(\"../../lib/theming/Emotion\");\n\nvar PADDING_RIGHT = 30;\nvar MIN_SCROLL_SIZE = 20;\nvar SCROLL_HIDDEN = utils_1.isChrome || utils_1.isOpera || utils_1.isSafari;\n\nvar ScrollContainer =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(ScrollContainer, _super);\n\n  function ScrollContainer() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      scrollActive: false,\n      scrollSize: 0,\n      scrollPos: 0,\n      // Mouse is moving where big scrollbar can be located.\n      hover: false,\n      // True when scroll is following mouse (mouse down on scroll).\n      scrolling: false,\n      scrollState: 'top'\n    };\n\n    _this.refInner = function (element) {\n      if (!_this.inner && element && _this.props.preventWindowScroll) {\n        element.addEventListener('wheel', _this.handleInnerScrollWheel, {\n          passive: false\n        });\n      }\n\n      if (_this.inner && !element) {\n        _this.inner.removeEventListener('wheel', _this.handleInnerScrollWheel);\n      }\n\n      _this.inner = element;\n    };\n\n    _this.refScroll = function (element) {\n      if (!_this.scroll && element) {\n        element.addEventListener('wheel', _this.handleScrollWheel, {\n          passive: false\n        });\n      }\n\n      if (_this.scroll && !element) {\n        _this.scroll.removeEventListener('wheel', _this.handleScrollWheel);\n      }\n\n      _this.scroll = element;\n    };\n\n    _this.handleNativeScroll = function (event) {\n      _this.reflow();\n\n      if (_this.props.preventWindowScroll) {\n        event.preventDefault();\n        return;\n      }\n\n      LayoutEvents_1[\"default\"].emit();\n    };\n\n    _this.reflow = function () {\n      if (!_this.inner) {\n        return;\n      }\n\n      var containerHeight = _this.inner.offsetHeight;\n      var contentHeight = _this.inner.scrollHeight;\n      var scrollTop = _this.inner.scrollTop;\n      var scrollActive = containerHeight < contentHeight;\n\n      if (!scrollActive && !_this.state.scrollActive) {\n        return;\n      }\n\n      if (scrollActive) {\n        var scrollSize = containerHeight / contentHeight * containerHeight;\n\n        if (scrollSize < MIN_SCROLL_SIZE) {\n          scrollSize = MIN_SCROLL_SIZE;\n        }\n\n        var scrollPos = scrollTop / (contentHeight - containerHeight) * (containerHeight - scrollSize);\n\n        if (_this.state.scrollSize !== scrollSize || _this.state.scrollPos !== scrollPos) {\n          var scrollState = _this.state.scrollState;\n\n          var updatedScrollState = _this.getImmediateScrollState();\n\n          var scrollParamsToUpdate = {\n            scrollActive: true,\n            scrollSize: scrollSize,\n            scrollPos: scrollPos,\n            scrollState: scrollState\n          };\n\n          if (updatedScrollState !== _this.state.scrollState) {\n            scrollParamsToUpdate.scrollState = updatedScrollState;\n\n            if (_this.props.onScrollStateChange) {\n              _this.props.onScrollStateChange(updatedScrollState);\n            }\n          }\n\n          _this.setState(scrollParamsToUpdate);\n        }\n      } else {\n        _this.setState({\n          scrollActive: false,\n          scrollSize: 0,\n          scrollPos: 0\n        });\n      }\n    };\n\n    _this.handleScrollMouseDown = function (event) {\n      if (!_this.inner) {\n        return;\n      }\n\n      var target = window.document;\n      var initialY = event.clientY;\n      var initialScrollTop = _this.inner.scrollTop;\n\n      var mouseMove = function mouseMove(mouseMoveEvent) {\n        if (!_this.inner) {\n          return;\n        }\n\n        var ratio = (_this.inner.scrollHeight - _this.inner.offsetHeight) / (_this.inner.offsetHeight - _this.state.scrollSize);\n        var deltaY = (mouseMoveEvent.clientY - initialY) * ratio;\n        _this.inner.scrollTop = initialScrollTop + deltaY;\n\n        if (mouseMoveEvent.preventDefault) {\n          mouseMoveEvent.preventDefault();\n        }\n\n        if (mouseMoveEvent.hasOwnProperty('returnValue')) {\n          mouseMoveEvent.returnValue = false;\n        }\n      };\n\n      var mouseUp = function mouseUp() {\n        target.removeEventListener('mousemove', mouseMove);\n        target.removeEventListener('mouseup', mouseUp);\n\n        _this.setState({\n          scrolling: false\n        });\n      };\n\n      target.addEventListener('mousemove', mouseMove);\n      target.addEventListener('mouseup', mouseUp);\n\n      _this.setState({\n        scrolling: true\n      });\n\n      event.preventDefault();\n    };\n\n    _this.handleScrollWheel = function (event) {\n      if (!_this.inner || !(event instanceof WheelEvent)) {\n        return;\n      }\n\n      if (event.deltaY > 0 && _this.inner.scrollHeight <= _this.inner.scrollTop + _this.inner.offsetHeight) {\n        return;\n      }\n\n      if (event.deltaY < 0 && _this.inner.scrollTop <= 0) {\n        return;\n      }\n\n      _this.inner.scrollTop += event.deltaY;\n      event.preventDefault();\n    };\n\n    _this.handleInnerScrollWheel = function (event) {\n      if (!_this.inner || !(event instanceof WheelEvent)) {\n        return;\n      }\n\n      if (event.deltaY > 0 && _this.inner.scrollHeight <= _this.inner.scrollTop + _this.inner.offsetHeight) {\n        event.preventDefault();\n        return false;\n      }\n\n      if (event.deltaY < 0 && _this.inner.scrollTop <= 0) {\n        event.preventDefault();\n        return false;\n      }\n    };\n\n    _this.handleMouseMove = function (event) {\n      var right = event.currentTarget.getBoundingClientRect().right - event.pageX;\n\n      _this.setHover(right <= 12);\n    };\n\n    _this.handleMouseLeave = function () {\n      _this.setHover(false);\n    };\n\n    return _this;\n  }\n\n  ScrollContainer.prototype.componentDidMount = function () {\n    this.reflow();\n  };\n\n  ScrollContainer.prototype.componentDidUpdate = function (prevProps) {\n    if (this.inner) {\n      if (prevProps.preventWindowScroll && !this.props.preventWindowScroll) {\n        this.inner.removeEventListener('wheel', this.handleInnerScrollWheel);\n      }\n\n      if (!prevProps.preventWindowScroll && this.props.preventWindowScroll) {\n        this.inner.addEventListener('wheel', this.handleInnerScrollWheel, {\n          passive: false\n        });\n      }\n    }\n\n    this.reflow();\n  };\n\n  ScrollContainer.prototype.render = function () {\n    var _a;\n\n    var state = this.state;\n    var props = this.props;\n    var scroll = null;\n\n    if (state.scrollActive) {\n      var scrollClass = Emotion_1.cx((_a = {}, _a[ScrollContainer_module_less_1[\"default\"].scroll] = true, _a[ScrollContainer_module_less_1[\"default\"].scrollInvert] = !!props.invert, _a[ScrollContainer_module_less_1[\"default\"].scrollHover] = state.hover || state.scrolling, _a));\n      var scrollStyle = {\n        top: state.scrollPos,\n        height: state.scrollSize\n      };\n      scroll = React.createElement(\"div\", {\n        ref: this.refScroll,\n        className: scrollClass,\n        style: scrollStyle,\n        onMouseDown: this.handleScrollMouseDown\n      });\n    }\n\n    var innerStyle = {\n      marginRight: this.getMarginRight(),\n      maxHeight: props.maxHeight,\n      paddingRight: PADDING_RIGHT,\n      scrollBehavior: props.scrollBehaviour\n    };\n    return React.createElement(\"div\", {\n      className: ScrollContainer_module_less_1[\"default\"].root,\n      onMouseMove: this.handleMouseMove,\n      onMouseLeave: this.handleMouseLeave\n    }, scroll, React.createElement(\"div\", {\n      className: ScrollContainer_module_less_1[\"default\"].inner,\n      style: innerStyle,\n      ref: this.refInner,\n      onScroll: this.handleNativeScroll\n    }, props.children));\n  };\n  /**\r\n      * @public\r\n      */\n\n\n  ScrollContainer.prototype.scrollTo = function (element) {\n    if (!element || !this.inner) {\n      return;\n    }\n\n    var maxScroll = element.offsetTop;\n\n    if (this.inner.scrollTop > maxScroll) {\n      this.inner.scrollTop = maxScroll;\n      return;\n    }\n\n    var minScroll = element.offsetTop + element.scrollHeight - this.inner.offsetHeight;\n\n    if (this.inner.scrollTop < minScroll) {\n      this.inner.scrollTop = minScroll;\n    }\n  };\n  /**\r\n      * @public\r\n      */\n\n\n  ScrollContainer.prototype.scrollToTop = function () {\n    if (!this.inner) {\n      return;\n    }\n\n    this.inner.scrollTop = 0;\n  };\n  /**\r\n      * @public\r\n      */\n\n\n  ScrollContainer.prototype.scrollToBottom = function () {\n    if (!this.inner) {\n      return;\n    }\n\n    this.inner.scrollTop = this.inner.scrollHeight - this.inner.offsetHeight;\n  };\n\n  ScrollContainer.prototype.setHover = function (hover) {\n    if (this.state.hover !== hover) {\n      this.setState({\n        hover: hover\n      });\n    }\n  };\n\n  ScrollContainer.prototype.getImmediateScrollState = function () {\n    if (!this.inner || this.inner.scrollTop === 0) {\n      return 'top';\n    } else if (this.inner.scrollTop === this.inner.scrollHeight - this.inner.offsetHeight) {\n      return 'bottom';\n    } else {\n      return 'scroll';\n    }\n  };\n\n  ScrollContainer.prototype.getMarginRight = function () {\n    return -1 * (PADDING_RIGHT + (SCROLL_HIDDEN ? 0 : getScrollWidth_1[\"default\"]()));\n  };\n\n  ScrollContainer.__KONTUR_REACT_UI__ = 'ScrollContainer';\n  ScrollContainer.propTypes = {\n    invert: PropTypes.bool,\n    maxHeight: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    scrollBehaviour: PropTypes.oneOf(['auto', 'smooth']),\n    preventWindowScroll: PropTypes.bool,\n    onScrollStateChange: PropTypes.func\n  };\n  ScrollContainer.defaultProps = {\n    scrollBehaviour: 'auto'\n  };\n  return ScrollContainer;\n}(React.Component);\n\nexports[\"default\"] = ScrollContainer;","map":{"version":3,"sources":["/home/aleksandr/coursework.front/node_modules/@skbkontur/react-ui/components/ScrollContainer/ScrollContainer.js"],"names":["Object","defineProperty","exports","value","tslib_1","require","React","__importStar","PropTypes","LayoutEvents_1","__importDefault","getScrollWidth_1","ScrollContainer_module_less_1","utils_1","Emotion_1","PADDING_RIGHT","MIN_SCROLL_SIZE","SCROLL_HIDDEN","isChrome","isOpera","isSafari","ScrollContainer","_super","__extends","_this","apply","arguments","state","scrollActive","scrollSize","scrollPos","hover","scrolling","scrollState","refInner","element","inner","props","preventWindowScroll","addEventListener","handleInnerScrollWheel","passive","removeEventListener","refScroll","scroll","handleScrollWheel","handleNativeScroll","event","reflow","preventDefault","emit","containerHeight","offsetHeight","contentHeight","scrollHeight","scrollTop","updatedScrollState","getImmediateScrollState","scrollParamsToUpdate","onScrollStateChange","setState","handleScrollMouseDown","target","window","document","initialY","clientY","initialScrollTop","mouseMove","mouseMoveEvent","ratio","deltaY","hasOwnProperty","returnValue","mouseUp","WheelEvent","handleMouseMove","right","currentTarget","getBoundingClientRect","pageX","setHover","handleMouseLeave","prototype","componentDidMount","componentDidUpdate","prevProps","render","_a","scrollClass","cx","scrollInvert","invert","scrollHover","scrollStyle","top","height","createElement","ref","className","style","onMouseDown","innerStyle","marginRight","getMarginRight","maxHeight","paddingRight","scrollBehavior","scrollBehaviour","root","onMouseMove","onMouseLeave","onScroll","children","scrollTo","maxScroll","offsetTop","minScroll","scrollToTop","scrollToBottom","__KONTUR_REACT_UI__","propTypes","bool","oneOfType","string","number","oneOf","func","defaultProps","Component"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = tslib_1.__importStar(require(\"react\"));\nvar PropTypes = tslib_1.__importStar(require(\"prop-types\"));\nvar LayoutEvents_1 = tslib_1.__importDefault(require(\"../../lib/LayoutEvents\"));\nvar getScrollWidth_1 = tslib_1.__importDefault(require(\"../../lib/dom/getScrollWidth\"));\nvar ScrollContainer_module_less_1 = tslib_1.__importDefault(require(\"./ScrollContainer.module.css\"));\nvar utils_1 = require(\"../../lib/utils\");\nvar Emotion_1 = require(\"../../lib/theming/Emotion\");\nvar PADDING_RIGHT = 30;\nvar MIN_SCROLL_SIZE = 20;\nvar SCROLL_HIDDEN = utils_1.isChrome || utils_1.isOpera || utils_1.isSafari;\nvar ScrollContainer = /** @class */function (_super) {\n  tslib_1.__extends(ScrollContainer, _super);\n  function ScrollContainer() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.state = {\n      scrollActive: false,\n      scrollSize: 0,\n      scrollPos: 0,\n      // Mouse is moving where big scrollbar can be located.\n      hover: false,\n      // True when scroll is following mouse (mouse down on scroll).\n      scrolling: false,\n      scrollState: 'top' };\n\n    _this.refInner = function (element) {\n      if (!_this.inner && element && _this.props.preventWindowScroll) {\n        element.addEventListener('wheel', _this.handleInnerScrollWheel, { passive: false });\n      }\n      if (_this.inner && !element) {\n        _this.inner.removeEventListener('wheel', _this.handleInnerScrollWheel);\n      }\n      _this.inner = element;\n    };\n    _this.refScroll = function (element) {\n      if (!_this.scroll && element) {\n        element.addEventListener('wheel', _this.handleScrollWheel, { passive: false });\n      }\n      if (_this.scroll && !element) {\n        _this.scroll.removeEventListener('wheel', _this.handleScrollWheel);\n      }\n      _this.scroll = element;\n    };\n    _this.handleNativeScroll = function (event) {\n      _this.reflow();\n      if (_this.props.preventWindowScroll) {\n        event.preventDefault();\n        return;\n      }\n      LayoutEvents_1[\"default\"].emit();\n    };\n    _this.reflow = function () {\n      if (!_this.inner) {\n        return;\n      }\n      var containerHeight = _this.inner.offsetHeight;\n      var contentHeight = _this.inner.scrollHeight;\n      var scrollTop = _this.inner.scrollTop;\n      var scrollActive = containerHeight < contentHeight;\n      if (!scrollActive && !_this.state.scrollActive) {\n        return;\n      }\n      if (scrollActive) {\n        var scrollSize = containerHeight / contentHeight * containerHeight;\n        if (scrollSize < MIN_SCROLL_SIZE) {\n          scrollSize = MIN_SCROLL_SIZE;\n        }\n        var scrollPos = scrollTop / (contentHeight - containerHeight) * (containerHeight - scrollSize);\n        if (_this.state.scrollSize !== scrollSize || _this.state.scrollPos !== scrollPos) {\n          var scrollState = _this.state.scrollState;\n          var updatedScrollState = _this.getImmediateScrollState();\n          var scrollParamsToUpdate = {\n            scrollActive: true,\n            scrollSize: scrollSize,\n            scrollPos: scrollPos,\n            scrollState: scrollState };\n\n          if (updatedScrollState !== _this.state.scrollState) {\n            scrollParamsToUpdate.scrollState = updatedScrollState;\n            if (_this.props.onScrollStateChange) {\n              _this.props.onScrollStateChange(updatedScrollState);\n            }\n          }\n          _this.setState(scrollParamsToUpdate);\n        }\n      } else\n      {\n        _this.setState({\n          scrollActive: false,\n          scrollSize: 0,\n          scrollPos: 0 });\n\n      }\n    };\n    _this.handleScrollMouseDown = function (event) {\n      if (!_this.inner) {\n        return;\n      }\n      var target = window.document;\n      var initialY = event.clientY;\n      var initialScrollTop = _this.inner.scrollTop;\n      var mouseMove = function mouseMove(mouseMoveEvent) {\n        if (!_this.inner) {\n          return;\n        }\n        var ratio = (_this.inner.scrollHeight - _this.inner.offsetHeight) / (_this.inner.offsetHeight - _this.state.scrollSize);\n        var deltaY = (mouseMoveEvent.clientY - initialY) * ratio;\n        _this.inner.scrollTop = initialScrollTop + deltaY;\n        if (mouseMoveEvent.preventDefault) {\n          mouseMoveEvent.preventDefault();\n        }\n        if (mouseMoveEvent.hasOwnProperty('returnValue')) {\n          mouseMoveEvent.returnValue = false;\n        }\n      };\n      var mouseUp = function mouseUp() {\n        target.removeEventListener('mousemove', mouseMove);\n        target.removeEventListener('mouseup', mouseUp);\n        _this.setState({ scrolling: false });\n      };\n      target.addEventListener('mousemove', mouseMove);\n      target.addEventListener('mouseup', mouseUp);\n      _this.setState({ scrolling: true });\n      event.preventDefault();\n    };\n    _this.handleScrollWheel = function (event) {\n      if (!_this.inner || !(event instanceof WheelEvent)) {\n        return;\n      }\n      if (event.deltaY > 0 && _this.inner.scrollHeight <= _this.inner.scrollTop + _this.inner.offsetHeight) {\n        return;\n      }\n      if (event.deltaY < 0 && _this.inner.scrollTop <= 0) {\n        return;\n      }\n      _this.inner.scrollTop += event.deltaY;\n      event.preventDefault();\n    };\n    _this.handleInnerScrollWheel = function (event) {\n      if (!_this.inner || !(event instanceof WheelEvent)) {\n        return;\n      }\n      if (event.deltaY > 0 && _this.inner.scrollHeight <= _this.inner.scrollTop + _this.inner.offsetHeight) {\n        event.preventDefault();\n        return false;\n      }\n      if (event.deltaY < 0 && _this.inner.scrollTop <= 0) {\n        event.preventDefault();\n        return false;\n      }\n    };\n    _this.handleMouseMove = function (event) {\n      var right = event.currentTarget.getBoundingClientRect().right - event.pageX;\n      _this.setHover(right <= 12);\n    };\n    _this.handleMouseLeave = function () {\n      _this.setHover(false);\n    };\n    return _this;\n  }\n  ScrollContainer.prototype.componentDidMount = function () {\n    this.reflow();\n  };\n  ScrollContainer.prototype.componentDidUpdate = function (prevProps) {\n    if (this.inner) {\n      if (prevProps.preventWindowScroll && !this.props.preventWindowScroll) {\n        this.inner.removeEventListener('wheel', this.handleInnerScrollWheel);\n      }\n      if (!prevProps.preventWindowScroll && this.props.preventWindowScroll) {\n        this.inner.addEventListener('wheel', this.handleInnerScrollWheel, { passive: false });\n      }\n    }\n    this.reflow();\n  };\n  ScrollContainer.prototype.render = function () {\n    var _a;\n    var state = this.state;\n    var props = this.props;\n    var scroll = null;\n    if (state.scrollActive) {\n      var scrollClass = Emotion_1.cx((_a = {},\n      _a[ScrollContainer_module_less_1[\"default\"].scroll] = true,\n      _a[ScrollContainer_module_less_1[\"default\"].scrollInvert] = !!props.invert,\n      _a[ScrollContainer_module_less_1[\"default\"].scrollHover] = state.hover || state.scrolling,\n      _a));\n      var scrollStyle = {\n        top: state.scrollPos,\n        height: state.scrollSize };\n\n      scroll = React.createElement(\"div\", { ref: this.refScroll, className: scrollClass, style: scrollStyle, onMouseDown: this.handleScrollMouseDown });\n    }\n    var innerStyle = {\n      marginRight: this.getMarginRight(),\n      maxHeight: props.maxHeight,\n      paddingRight: PADDING_RIGHT,\n      scrollBehavior: props.scrollBehaviour };\n\n    return React.createElement(\"div\", { className: ScrollContainer_module_less_1[\"default\"].root, onMouseMove: this.handleMouseMove, onMouseLeave: this.handleMouseLeave },\n    scroll,\n    React.createElement(\"div\", { className: ScrollContainer_module_less_1[\"default\"].inner, style: innerStyle, ref: this.refInner, onScroll: this.handleNativeScroll }, props.children));\n  };\n  /**\r\n      * @public\r\n      */\n  ScrollContainer.prototype.scrollTo = function (element) {\n    if (!element || !this.inner) {\n      return;\n    }\n    var maxScroll = element.offsetTop;\n    if (this.inner.scrollTop > maxScroll) {\n      this.inner.scrollTop = maxScroll;\n      return;\n    }\n    var minScroll = element.offsetTop + element.scrollHeight - this.inner.offsetHeight;\n    if (this.inner.scrollTop < minScroll) {\n      this.inner.scrollTop = minScroll;\n    }\n  };\n  /**\r\n      * @public\r\n      */\n  ScrollContainer.prototype.scrollToTop = function () {\n    if (!this.inner) {\n      return;\n    }\n    this.inner.scrollTop = 0;\n  };\n  /**\r\n      * @public\r\n      */\n  ScrollContainer.prototype.scrollToBottom = function () {\n    if (!this.inner) {\n      return;\n    }\n    this.inner.scrollTop = this.inner.scrollHeight - this.inner.offsetHeight;\n  };\n  ScrollContainer.prototype.setHover = function (hover) {\n    if (this.state.hover !== hover) {\n      this.setState({ hover: hover });\n    }\n  };\n  ScrollContainer.prototype.getImmediateScrollState = function () {\n    if (!this.inner || this.inner.scrollTop === 0) {\n      return 'top';\n    } else\n    if (this.inner.scrollTop === this.inner.scrollHeight - this.inner.offsetHeight) {\n      return 'bottom';\n    } else\n    {\n      return 'scroll';\n    }\n  };\n  ScrollContainer.prototype.getMarginRight = function () {\n    return -1 * (PADDING_RIGHT + (SCROLL_HIDDEN ? 0 : getScrollWidth_1[\"default\"]()));\n  };\n  ScrollContainer.__KONTUR_REACT_UI__ = 'ScrollContainer';\n  ScrollContainer.propTypes = {\n    invert: PropTypes.bool,\n    maxHeight: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    scrollBehaviour: PropTypes.oneOf(['auto', 'smooth']),\n    preventWindowScroll: PropTypes.bool,\n    onScrollStateChange: PropTypes.func };\n\n  ScrollContainer.defaultProps = {\n    scrollBehaviour: 'auto' };\n\n  return ScrollContainer;\n}(React.Component);\nexports[\"default\"] = ScrollContainer;"]},"metadata":{},"sourceType":"script"}