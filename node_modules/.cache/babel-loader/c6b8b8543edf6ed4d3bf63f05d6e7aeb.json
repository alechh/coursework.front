{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar Calendar_1 = tslib_1.__importDefault(require(\"@skbkontur/react-icons/Calendar\"));\n\nvar React = tslib_1.__importStar(require(\"react\"));\n\nvar constants_1 = require(\"../../lib/date/constants\");\n\nvar InternalDate_1 = require(\"../../lib/date/InternalDate\");\n\nvar InternalDateGetter_1 = tslib_1.__importDefault(require(\"../../lib/date/InternalDateGetter\"));\n\nvar InternalDateTransformer_1 = tslib_1.__importDefault(require(\"../../lib/date/InternalDateTransformer\"));\n\nvar types_1 = require(\"../../lib/date/types\");\n\nvar MouseDrag_1 = tslib_1.__importDefault(require(\"../../lib/events/MouseDrag\"));\n\nvar utils_1 = require(\"../../lib/utils\");\n\nvar locale_1 = require(\"../DatePicker/locale\");\n\nvar ensureOldIEClassName_1 = require(\"../ensureOldIEClassName\");\n\nvar InputLikeText_1 = tslib_1.__importDefault(require(\"../internal/InputLikeText\"));\n\nvar decorators_1 = require(\"../LocaleProvider/decorators\");\n\nvar DateInput_module_less_1 = tslib_1.__importDefault(require(\"./DateInput.module.css\"));\n\nvar DateFragmentsView_1 = require(\"./DateFragmentsView\");\n\nvar DateInputKeyboardActions_1 = require(\"./helpers/DateInputKeyboardActions\");\n\nvar inputNumber_1 = require(\"./helpers/inputNumber\");\n\nvar SelectionHelpers_1 = require(\"./helpers/SelectionHelpers\");\n\nvar Emotion_1 = require(\"../../lib/theming/Emotion\");\n\nvar DateInput_styles_1 = tslib_1.__importDefault(require(\"./DateInput.styles\"));\n\nvar ThemeConsumer_1 = tslib_1.__importDefault(require(\"../ThemeConsumer\"));\n\nvar lodash_debounce_1 = tslib_1.__importDefault(require(\"lodash.debounce\"));\n\nvar IS_IE = ensureOldIEClassName_1.isIE || ensureOldIEClassName_1.isEdge;\n\nvar DateInput =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(DateInput, _super);\n\n  function DateInput(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.inputLikeText = null;\n    _this.divInnerNode = null;\n    _this.isMouseDown = false;\n    _this.isFirstFocus = false;\n    _this.ieFrozen = false;\n\n    _this.divInnerNodeRef = function (el) {\n      _this.divInnerNode = el;\n    };\n\n    _this.handleMouseDown = function (event) {\n      _this.isMouseDown = true;\n\n      if (IS_IE && _this.state.focused && !_this.ieFrozen) {\n        event.preventDefault();\n        event.stopPropagation();\n      }\n    };\n\n    _this.handleMouseUp = function () {\n      _this.isMouseDown = false;\n\n      _this.setState({\n        selected: _this.getFirstDateComponentType()\n      });\n    };\n\n    _this.handleSelectDateComponent = function (type, event) {\n      _this.isMouseDown = false;\n\n      if (_this.isFirstFocus && _this.state.internalDate && _this.state.internalDate.isEmpty()) {\n        _this.isFirstFocus = false;\n        return;\n      }\n\n      _this.selectDateComponent(type);\n\n      event.preventDefault();\n      event.stopPropagation();\n      _this.isFirstFocus = false;\n    };\n\n    _this.changeSelectedDateComponent = function (type) {\n      type = type || _this.state.selected;\n\n      if (type === null) {\n        return;\n      }\n\n      if (type === types_1.InternalDateComponentType.All) {\n        _this.selectNodeContents(_this.divInnerNode);\n\n        return;\n      }\n\n      var index = _this.state.typesOrder.indexOf(type);\n\n      if (index > -1) {\n        _this.selectNodeContents(_this.divInnerNode, index * 2, index * 2 + 1);\n      }\n    };\n\n    _this.handleMouseDragStart = function () {\n      return _this.setState({\n        dragged: true,\n        selected: null\n      });\n    };\n\n    _this.handleMouseDragEnd = function () {\n      return _this.setState({\n        dragged: false\n      });\n    };\n\n    _this.updateInternalDate = function (_internalDate, state, callback) {\n      if (state === void 0) {\n        state = {};\n      }\n\n      if (callback === void 0) {\n        callback = _this.emitChange;\n      }\n\n      var internalDate = (_internalDate || _this.state.internalDate || new InternalDate_1.InternalDate()).clone();\n      internalDate.setOrder(_this.locale.order).setSeparator(_this.locale.separator);\n      var typesOrder = internalDate.toFragments().map(function (_a) {\n        var type = _a.type;\n        return type;\n      });\n\n      _this.setState(tslib_1.__assign({}, state, {\n        typesOrder: typesOrder,\n        internalDate: internalDate\n      }), callback);\n    };\n\n    _this.updateInternalDateFromProps = function () {\n      var isMod = false;\n\n      var internalDate = _this.state.internalDate.clone();\n\n      var start = internalDate.getRangeStart();\n      var min = start && start.toInternalString();\n      var end = internalDate.getRangeEnd();\n      var max = end && end.toInternalString();\n      var _a = _this.locale,\n          order = _a.order,\n          separator = _a.separator;\n\n      if (_this.props.minDate !== min) {\n        isMod = true;\n        internalDate.setRangeStart(new InternalDate_1.InternalDate({\n          order: order,\n          separator: separator,\n          value: _this.props.minDate\n        }));\n      }\n\n      if (_this.props.maxDate !== max) {\n        isMod = true;\n        internalDate.setRangeEnd(new InternalDate_1.InternalDate({\n          order: order,\n          separator: separator,\n          value: _this.props.maxDate\n        }));\n      }\n\n      if (!_this.props.value || _this.props.value !== internalDate.toInternalString()) {\n        isMod = true;\n        internalDate.parseInternalValue(_this.props.value);\n      }\n\n      if (isMod) {\n        _this.setState({\n          internalDate: internalDate\n        });\n      }\n    };\n\n    _this.handleFocus = function (event) {\n      if (_this.props.disabled) {\n        return;\n      }\n\n      if (IS_IE && _this.ieFrozen) {\n        _this.ieFrozen = false;\n        event.preventDefault();\n        return;\n      }\n\n      _this.setState(function (prevState) {\n        _this.isFirstFocus = !prevState.focused;\n        return {\n          focused: true,\n          selected: prevState.selected === null && !_this.isMouseDown ? _this.getFirstDateComponentType() : prevState.selected\n        };\n      });\n\n      if (_this.props.onFocus) {\n        _this.props.onFocus(event);\n      }\n    };\n\n    _this.handleBlur = function (event) {\n      if (IS_IE && _this.ieFrozen) {\n        event.preventDefault();\n        return;\n      }\n\n      event.persist();\n\n      _this.setState({\n        focused: false,\n        selected: null,\n        inputMode: false\n      }, function () {\n        var internalDate = _this.state.internalDate;\n        SelectionHelpers_1.removeAllSelections();\n\n        if (internalDate && internalDate.isIncomplete()) {\n          _this.updateInternalDate(internalDate.restore());\n        }\n\n        if (_this.props.onBlur) {\n          _this.props.onBlur(event);\n        }\n      });\n    };\n\n    _this.handleKeyDown = function (event) {\n      if (_this.props.disabled) {\n        return;\n      }\n\n      if (_this.props.onKeyDown) {\n        _this.props.onKeyDown(event);\n\n        if (event.defaultPrevented) {\n          return;\n        }\n      }\n\n      var action = DateInputKeyboardActions_1.extractAction(event);\n\n      if (action === DateInputKeyboardActions_1.Actions.MoveSelectionLeft) {\n        _this.moveSelection(-1);\n      }\n\n      if (action === DateInputKeyboardActions_1.Actions.MoveSelectionRight) {\n        _this.moveSelection(1);\n      }\n\n      if (action === DateInputKeyboardActions_1.Actions.Separator) {\n        _this.pressDelimiter();\n      }\n\n      if (action === DateInputKeyboardActions_1.Actions.MoveSelectionFirst) {\n        _this.selectDateComponent(_this.getFirstDateComponentType());\n      }\n\n      if (action === DateInputKeyboardActions_1.Actions.MoveSelectionLast) {\n        _this.selectDateComponent(_this.getLastDateComponentType());\n      }\n\n      if (action === DateInputKeyboardActions_1.Actions.Increment) {\n        _this.updateDateComponentBy(1);\n      }\n\n      if (action === DateInputKeyboardActions_1.Actions.Decrement) {\n        _this.updateDateComponentBy(-1);\n      }\n\n      if (action === DateInputKeyboardActions_1.Actions.Digit) {\n        _this.inputValue(event);\n      }\n\n      if (action === DateInputKeyboardActions_1.Actions.ClearSelection) {\n        _this.clearSelected();\n      }\n\n      if (action === DateInputKeyboardActions_1.Actions.ClearOneChar) {\n        if (_this.state.selected === types_1.InternalDateComponentType.All) {\n          _this.clearSelected();\n        } else {\n          _this.clearOneChar();\n        }\n      }\n\n      if (action === DateInputKeyboardActions_1.Actions.FullSelection) {\n        event.nativeEvent.stopImmediatePropagation();\n\n        _this.selectDateComponent(types_1.InternalDateComponentType.All);\n      }\n\n      if (action === DateInputKeyboardActions_1.Actions.PasteValue) {\n        // @ts-ignore (IE specific api)\n        if (ensureOldIEClassName_1.isIE && window.clipboardData) {\n          // @ts-ignore\n          _this.handlePaste(undefined, window.clipboardData.getData('text'));\n        }\n      }\n\n      if (action === DateInputKeyboardActions_1.Actions.WrongInput) {\n        _this.blink();\n      }\n\n      if (_this.state.focused && action !== DateInputKeyboardActions_1.Actions.Ignore) {\n        _this.selection();\n      }\n\n      if (action !== DateInputKeyboardActions_1.Actions.Ignore && action !== DateInputKeyboardActions_1.Actions.PasteValue && action !== DateInputKeyboardActions_1.Actions.CopyValue) {\n        event.preventDefault();\n      }\n    }; // tslint:disable:member-ordering\n\n\n    _this.selectionNotIe = function () {\n      _this.changeSelectedDateComponent(_this.state.selected);\n    };\n\n    _this.selectionIe = lodash_debounce_1[\"default\"](function () {\n      var node = _this.inputLikeText && _this.inputLikeText.getNode();\n\n      if (_this.inputLikeText && node && node.contains(document.activeElement)) {\n        _this.ieFrozen = true;\n\n        _this.changeSelectedDateComponent(_this.state.selected);\n\n        if (_this.inputLikeText) {\n          _this.inputLikeText.focus();\n        }\n      }\n    }, 10);\n    _this.selection = IS_IE ? _this.selectionIe : _this.selectionNotIe; // tslint:enable:member-ordering\n\n    _this.pressDelimiter = function () {\n      var value = _this.state.internalDate.get(_this.state.selected);\n\n      if (value !== null && value !== '') {\n        if (_this.state.autoMoved) {\n          _this.setState({\n            autoMoved: false\n          });\n        } else {\n          _this.moveSelection(1);\n        }\n      }\n    };\n\n    _this.handlePaste = function (e, pasted) {\n      pasted = pasted || e && e.clipboardData.getData('text').trim();\n\n      if (pasted && _this.state.internalDate !== null) {\n        _this.updateInternalDate(_this.state.internalDate.parseValue(pasted).restore().cutOffExcess());\n      }\n    };\n\n    _this.emitChange = function () {\n      var value = _this.state.internalDate.isEmpty() ? '' : _this.state.internalDate.toInternalString();\n\n      if (_this.props.value === value) {\n        return;\n      }\n\n      if (_this.props.onChange) {\n        _this.props.onChange({\n          target: {\n            value: value\n          }\n        }, value);\n      }\n    };\n\n    _this.inputNumberCallBack = function (next, inputMode) {\n      var type = _this.state.selected;\n\n      var internalDate = _this.state.internalDate.clone();\n\n      if (type === null || type === types_1.InternalDateComponentType.All) {\n        type = _this.getFirstDateComponentType();\n        inputMode = false;\n\n        _this.selectDateComponent(type);\n      }\n\n      internalDate.set(type, next);\n\n      if (!inputMode) {\n        if (type !== types_1.InternalDateComponentType.Year) {\n          internalDate.cutOffExcess(type);\n        } else {\n          internalDate.restore(type);\n        }\n\n        _this.moveSelection(1, true);\n      }\n\n      _this.updateInternalDate(internalDate, {\n        inputMode: inputMode\n      });\n    };\n\n    _this.selectNodeContents = function (node, start, end) {\n      if (_this.state.focused && node) {\n        if (utils_1.isFirefox) {\n          SelectionHelpers_1.selectNodeContents(node, start, end);\n          setTimeout(function () {\n            return _this.state.focused && SelectionHelpers_1.selectNodeContents(node, start, end);\n          }, 0);\n        } else {\n          SelectionHelpers_1.selectNodeContents(node, start, end);\n        }\n      }\n    };\n\n    _this.selectDateComponent = function (selected) {\n      if (IS_IE && _this.ieFrozen) {\n        return;\n      }\n\n      _this.setState({\n        selected: selected,\n        inputMode: false\n      });\n    };\n\n    _this.handleDoubleClick = function () {\n      _this.selectDateComponent(types_1.InternalDateComponentType.All);\n    };\n\n    _this.getFirstDateComponentType = function () {\n      return _this.state.typesOrder[0];\n    };\n\n    _this.getLastDateComponentType = function () {\n      return _this.state.typesOrder[_this.state.typesOrder.length - 1];\n    };\n\n    _this.renderIcon = function () {\n      var _a;\n\n      var _b = _this.props,\n          withIcon = _b.withIcon,\n          size = _b.size,\n          _c = _b.disabled,\n          disabled = _c === void 0 ? false : _c;\n\n      if (withIcon) {\n        var theme = _this.theme;\n        var iconStyles = Emotion_1.cx((_a = {}, _a[DateInput_module_less_1[\"default\"].icon] = true, _a[DateInput_styles_1[\"default\"].icon(theme)] = true, _a[DateInput_styles_1[\"default\"].iconSmall(theme)] = size === 'small', _a[DateInput_styles_1[\"default\"].iconMedium(theme)] = size === 'medium', _a[DateInput_styles_1[\"default\"].iconLarge(theme)] = size === 'large', _a[DateInput_module_less_1[\"default\"].iconDisabled] = disabled, _a[DateInput_styles_1[\"default\"].iconDisabled(theme)] = disabled, _a));\n        return React.createElement(\"span\", {\n          className: iconStyles\n        }, React.createElement(Calendar_1[\"default\"], null));\n      }\n\n      return null;\n    };\n\n    _this.state = {\n      notify: false,\n      selected: null,\n      internalDate: new InternalDate_1.InternalDate(),\n      typesOrder: [],\n      inputMode: false,\n      focused: false,\n      dragged: false,\n      autoMoved: false\n    };\n    return _this;\n  }\n\n  DateInput.prototype.componentDidUpdate = function (prevProps, prevState) {\n    if (prevProps.value !== this.props.value || prevProps.minDate !== this.props.minDate || prevProps.maxDate !== this.props.maxDate || prevState.internalDate.getOrder() !== this.locale.order || prevState.internalDate.getSeparator() !== this.locale.separator) {\n      this.updateInternalDate(undefined, {}, this.updateInternalDateFromProps);\n    }\n\n    if (this.state.focused && prevState.selected !== this.state.selected) {\n      this.selection();\n    }\n\n    if (this.state.notify && !prevState.notify) {\n      this.notify();\n    }\n  };\n\n  DateInput.prototype.componentDidMount = function () {\n    this.updateInternalDate(undefined, {}, this.updateInternalDateFromProps);\n\n    if (this.divInnerNode) {\n      MouseDrag_1[\"default\"].listen(this.divInnerNode);\n      this.divInnerNode.addEventListener('mousedragstart', this.handleMouseDragStart);\n      this.divInnerNode.addEventListener('mousedragend', this.handleMouseDragEnd);\n    }\n  };\n\n  DateInput.prototype.render = function () {\n    var _this = this;\n\n    return React.createElement(ThemeConsumer_1[\"default\"], null, function (theme) {\n      _this.theme = theme;\n      return _this.renderMain();\n    });\n  };\n\n  DateInput.prototype.blur = function () {\n    if (this.inputLikeText) {\n      this.inputLikeText.blur();\n    }\n\n    this.setState({\n      focused: false\n    });\n  };\n\n  DateInput.prototype.focus = function () {\n    if (!this.props.disabled) {\n      if (this.inputLikeText) {\n        this.inputLikeText.focus();\n      }\n\n      this.setState({\n        focused: true\n      });\n    }\n  };\n\n  DateInput.prototype.blink = function () {\n    if (!this.props.disabled) {\n      if (this.inputLikeText) {\n        this.inputLikeText.blink();\n      }\n    }\n  };\n\n  DateInput.prototype.renderMain = function () {\n    var _this = this;\n\n    var _a = this.state,\n        internalDate = _a.internalDate,\n        focused = _a.focused,\n        selected = _a.selected,\n        inputMode = _a.inputMode;\n    var fragments = internalDate && (focused || !internalDate.isEmpty()) ? internalDate.toFragments({\n      withSeparator: true,\n      withPad: true\n    }) : [];\n    return React.createElement(InputLikeText_1[\"default\"], {\n      width: this.props.width,\n      ref: function ref(el) {\n        _this.inputLikeText = el;\n      },\n      size: this.props.size,\n      disabled: this.props.disabled,\n      error: this.props.error,\n      warning: this.props.warning,\n      onBlur: this.handleBlur,\n      onFocus: this.handleFocus,\n      onKeyDown: this.handleKeyDown,\n      onMouseUp: this.handleMouseUp,\n      onMouseDown: this.handleMouseDown,\n      onPaste: this.handlePaste,\n      rightIcon: this.renderIcon,\n      onDoubleClickCapture: this.handleDoubleClick\n    }, React.createElement(DateFragmentsView_1.DateFragmentsView, {\n      nodeRef: this.divInnerNodeRef,\n      fragments: fragments,\n      onSelectDateComponent: this.handleSelectDateComponent,\n      selected: selected,\n      inputMode: inputMode\n    }));\n  };\n\n  DateInput.prototype.clearSelected = function () {\n    var selected = this.state.selected === null ? this.getFirstDateComponentType() : this.state.selected;\n    this.updateInternalDate(this.state.internalDate.clone().set(selected, null), {\n      inputMode: false,\n      selected: selected\n    });\n\n    if (selected === types_1.InternalDateComponentType.All) {\n      this.selectDateComponent(this.getFirstDateComponentType());\n    }\n  };\n\n  DateInput.prototype.clearOneChar = function () {\n    var _a = this.state,\n        selected = _a.selected,\n        internalDate = _a.internalDate,\n        inputMode = _a.inputMode;\n    var prevType = selected === null ? this.getLastDateComponentType() : selected;\n    var nextType = prevType === types_1.InternalDateComponentType.All ? internalDate.toFragments({\n      withSeparator: false\n    }).reduce(function (_type, _a) {\n      var value = _a.value,\n          type = _a.type;\n      return value !== null ? type : _type;\n    }, this.getLastDateComponentType()) : prevType;\n    var prev = internalDate.get(nextType);\n\n    if (prev === null) {\n      this.moveSelection(-1);\n      return;\n    }\n\n    prev = String(inputMode ? prev : InternalDateTransformer_1[\"default\"].padDateComponent(nextType, prev));\n    var next = prev.replace(/.$/, '') || null;\n    this.updateInternalDate(internalDate.clone().set(nextType, next), {\n      inputMode: next !== null,\n      selected: nextType\n    });\n  };\n\n  DateInput.prototype.updateDateComponentBy = function (step) {\n    var internalDate = this.state.internalDate.clone();\n    var initial = internalDate.clone();\n    var selected = this.state.selected;\n    selected = selected === null ? this.getFirstDateComponentType() : selected;\n    var isValidRange = internalDate.validate({\n      checks: [types_1.InternalDateValidateCheck.Range]\n    });\n    var start = internalDate.getRangeStart();\n    var end = internalDate.getRangeEnd();\n\n    if (!isValidRange) {\n      if (start && InternalDateGetter_1[\"default\"].max([internalDate, start]) === start) {\n        internalDate.setComponents(start.getComponentsRaw());\n      } else if (end && InternalDateGetter_1[\"default\"].min([internalDate, end]) === end) {\n        internalDate.setComponents(end.getComponentsRaw());\n      }\n    } else {\n      var clone = internalDate.clone().shift(selected, step, {\n        isRange: false,\n        isLoop: true\n      });\n\n      if (clone.validate({\n        checks: [types_1.InternalDateValidateCheck.Range]\n      })) {\n        internalDate.shift(selected, step, {\n          isRange: false,\n          isLoop: true\n        });\n      }\n    }\n\n    this.updateInternalDate(internalDate, {\n      inputMode: false,\n      selected: selected === types_1.InternalDateComponentType.All ? this.getFirstDateComponentType() : selected,\n      notify: initial.get(selected) === internalDate.get(selected)\n    });\n  };\n\n  DateInput.prototype.moveSelection = function (step, isAutoMoved) {\n    if (isAutoMoved === void 0) {\n      isAutoMoved = false;\n    }\n\n    var _a = this.state,\n        internalDate = _a.internalDate,\n        typesOrder = _a.typesOrder,\n        selected = _a.selected;\n    var index = selected === null ? 0 : typesOrder.indexOf(selected);\n\n    if (typesOrder[index] === this.getLastDateComponentType() && step > 0 || typesOrder[index] === this.getFirstDateComponentType() && step < 0) {\n      return;\n    }\n\n    var nextIndex = index + step;\n\n    if (selected === types_1.InternalDateComponentType.All) {\n      nextIndex = step < 0 ? 0 : typesOrder.length - 1;\n    }\n\n    if (selected === types_1.InternalDateComponentType.Year && internalDate.getYear() !== null) {\n      internalDate.restore(selected);\n    }\n\n    this.updateInternalDate(internalDate);\n\n    if (nextIndex >= 0 && nextIndex < typesOrder.length) {\n      this.setState({\n        selected: typesOrder[nextIndex],\n        inputMode: false,\n        autoMoved: isAutoMoved\n      });\n    }\n  };\n\n  DateInput.prototype.notify = function () {\n    this.blink();\n    this.setState({\n      notify: false\n    });\n  };\n\n  DateInput.prototype.inputValue = function (event) {\n    var _this = this;\n\n    event.persist();\n    var type = this.state.selected;\n    var internalDate = this.state.internalDate.clone();\n    var prev = internalDate.get(type);\n\n    if (type === null) {\n      type = this.getFirstDateComponentType();\n      prev = null;\n      internalDate.set(type, null);\n    }\n\n    if (type === types_1.InternalDateComponentType.All) {\n      type = this.getFirstDateComponentType();\n      prev = null;\n      internalDate.set(types_1.InternalDateComponentType.All, null);\n    }\n\n    this.setState({\n      selected: type,\n      internalDate: internalDate\n    }, function () {\n      inputNumber_1.inputNumber(type, prev, event.key, _this.state.inputMode, _this.inputNumberCallBack);\n    });\n  };\n\n  DateInput.__KONTUR_REACT_UI__ = 'DateInput';\n  DateInput.defaultProps = {\n    minDate: constants_1.MIN_FULLDATE,\n    maxDate: constants_1.MAX_FULLDATE,\n    size: 'small',\n    width: 125\n  };\n  DateInput = tslib_1.__decorate([decorators_1.locale('DatePicker', locale_1.DatePickerLocaleHelper)], DateInput);\n  return DateInput;\n}(React.Component);\n\nexports.DateInput = DateInput;\nexports[\"default\"] = DateInput;","map":{"version":3,"sources":["C:/Users/Sasha/Documents/coursework.front/node_modules/@skbkontur/react-ui/components/DateInput/DateInput.js"],"names":["Object","defineProperty","exports","value","tslib_1","require","Calendar_1","__importDefault","React","__importStar","constants_1","InternalDate_1","InternalDateGetter_1","InternalDateTransformer_1","types_1","MouseDrag_1","utils_1","locale_1","ensureOldIEClassName_1","InputLikeText_1","decorators_1","DateInput_module_less_1","DateFragmentsView_1","DateInputKeyboardActions_1","inputNumber_1","SelectionHelpers_1","Emotion_1","DateInput_styles_1","ThemeConsumer_1","lodash_debounce_1","IS_IE","isIE","isEdge","DateInput","_super","__extends","props","_this","call","inputLikeText","divInnerNode","isMouseDown","isFirstFocus","ieFrozen","divInnerNodeRef","el","handleMouseDown","event","state","focused","preventDefault","stopPropagation","handleMouseUp","setState","selected","getFirstDateComponentType","handleSelectDateComponent","type","internalDate","isEmpty","selectDateComponent","changeSelectedDateComponent","InternalDateComponentType","All","selectNodeContents","index","typesOrder","indexOf","handleMouseDragStart","dragged","handleMouseDragEnd","updateInternalDate","_internalDate","callback","emitChange","InternalDate","clone","setOrder","locale","order","setSeparator","separator","toFragments","map","_a","__assign","updateInternalDateFromProps","isMod","start","getRangeStart","min","toInternalString","end","getRangeEnd","max","minDate","setRangeStart","maxDate","setRangeEnd","parseInternalValue","handleFocus","disabled","prevState","onFocus","handleBlur","persist","inputMode","removeAllSelections","isIncomplete","restore","onBlur","handleKeyDown","onKeyDown","defaultPrevented","action","extractAction","Actions","MoveSelectionLeft","moveSelection","MoveSelectionRight","Separator","pressDelimiter","MoveSelectionFirst","MoveSelectionLast","getLastDateComponentType","Increment","updateDateComponentBy","Decrement","Digit","inputValue","ClearSelection","clearSelected","ClearOneChar","clearOneChar","FullSelection","nativeEvent","stopImmediatePropagation","PasteValue","window","clipboardData","handlePaste","undefined","getData","WrongInput","blink","Ignore","selection","CopyValue","selectionNotIe","selectionIe","node","getNode","contains","document","activeElement","focus","get","autoMoved","e","pasted","trim","parseValue","cutOffExcess","onChange","target","inputNumberCallBack","next","set","Year","isFirefox","setTimeout","handleDoubleClick","length","renderIcon","_b","withIcon","size","_c","theme","iconStyles","cx","icon","iconSmall","iconMedium","iconLarge","iconDisabled","createElement","className","notify","prototype","componentDidUpdate","prevProps","getOrder","getSeparator","componentDidMount","listen","addEventListener","render","renderMain","blur","fragments","withSeparator","withPad","width","ref","error","warning","onMouseUp","onMouseDown","onPaste","rightIcon","onDoubleClickCapture","DateFragmentsView","nodeRef","onSelectDateComponent","prevType","nextType","reduce","_type","prev","String","padDateComponent","replace","step","initial","isValidRange","validate","checks","InternalDateValidateCheck","Range","setComponents","getComponentsRaw","shift","isRange","isLoop","isAutoMoved","nextIndex","getYear","inputNumber","key","__KONTUR_REACT_UI__","defaultProps","MIN_FULLDATE","MAX_FULLDATE","__decorate","DatePickerLocaleHelper","Component"],"mappings":"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","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar Calendar_1 = tslib_1.__importDefault(require(\"@skbkontur/react-icons/Calendar\"));\r\nvar React = tslib_1.__importStar(require(\"react\"));\r\nvar constants_1 = require(\"../../lib/date/constants\");\r\nvar InternalDate_1 = require(\"../../lib/date/InternalDate\");\r\nvar InternalDateGetter_1 = tslib_1.__importDefault(require(\"../../lib/date/InternalDateGetter\"));\r\nvar InternalDateTransformer_1 = tslib_1.__importDefault(require(\"../../lib/date/InternalDateTransformer\"));\r\nvar types_1 = require(\"../../lib/date/types\");\r\nvar MouseDrag_1 = tslib_1.__importDefault(require(\"../../lib/events/MouseDrag\"));\r\nvar utils_1 = require(\"../../lib/utils\");\r\nvar locale_1 = require(\"../DatePicker/locale\");\r\nvar ensureOldIEClassName_1 = require(\"../ensureOldIEClassName\");\r\nvar InputLikeText_1 = tslib_1.__importDefault(require(\"../internal/InputLikeText\"));\r\nvar decorators_1 = require(\"../LocaleProvider/decorators\");\r\nvar DateInput_module_less_1 = tslib_1.__importDefault(require(\"./DateInput.module.css\"));\r\nvar DateFragmentsView_1 = require(\"./DateFragmentsView\");\r\nvar DateInputKeyboardActions_1 = require(\"./helpers/DateInputKeyboardActions\");\r\nvar inputNumber_1 = require(\"./helpers/inputNumber\");\r\nvar SelectionHelpers_1 = require(\"./helpers/SelectionHelpers\");\r\nvar Emotion_1 = require(\"../../lib/theming/Emotion\");\r\nvar DateInput_styles_1 = tslib_1.__importDefault(require(\"./DateInput.styles\"));\r\nvar ThemeConsumer_1 = tslib_1.__importDefault(require(\"../ThemeConsumer\"));\r\nvar lodash_debounce_1 = tslib_1.__importDefault(require(\"lodash.debounce\"));\r\nvar IS_IE = ensureOldIEClassName_1.isIE || ensureOldIEClassName_1.isEdge;\r\nvar DateInput = /** @class */function (_super) {\r\n  tslib_1.__extends(DateInput, _super);\r\n  function DateInput(props) {\r\n    var _this = _super.call(this, props) || this;\r\n    _this.inputLikeText = null;\r\n    _this.divInnerNode = null;\r\n    _this.isMouseDown = false;\r\n    _this.isFirstFocus = false;\r\n    _this.ieFrozen = false;\r\n    _this.divInnerNodeRef = function (el) {\r\n      _this.divInnerNode = el;\r\n    };\r\n    _this.handleMouseDown = function (event) {\r\n      _this.isMouseDown = true;\r\n      if (IS_IE && _this.state.focused && !_this.ieFrozen) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n      }\r\n    };\r\n    _this.handleMouseUp = function () {\r\n      _this.isMouseDown = false;\r\n      _this.setState({ selected: _this.getFirstDateComponentType() });\r\n    };\r\n    _this.handleSelectDateComponent = function (type, event) {\r\n      _this.isMouseDown = false;\r\n      if (_this.isFirstFocus && _this.state.internalDate && _this.state.internalDate.isEmpty()) {\r\n        _this.isFirstFocus = false;\r\n        return;\r\n      }\r\n      _this.selectDateComponent(type);\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      _this.isFirstFocus = false;\r\n    };\r\n    _this.changeSelectedDateComponent = function (type) {\r\n      type = type || _this.state.selected;\r\n      if (type === null) {\r\n        return;\r\n      }\r\n      if (type === types_1.InternalDateComponentType.All) {\r\n        _this.selectNodeContents(_this.divInnerNode);\r\n        return;\r\n      }\r\n      var index = _this.state.typesOrder.indexOf(type);\r\n      if (index > -1) {\r\n        _this.selectNodeContents(_this.divInnerNode, index * 2, index * 2 + 1);\r\n      }\r\n    };\r\n    _this.handleMouseDragStart = function () {return _this.setState({ dragged: true, selected: null });};\r\n    _this.handleMouseDragEnd = function () {return _this.setState({ dragged: false });};\r\n    _this.updateInternalDate = function (_internalDate, state, callback) {\r\n      if (state === void 0) {state = {};}\r\n      if (callback === void 0) {callback = _this.emitChange;}\r\n      var internalDate = (_internalDate || _this.state.internalDate || new InternalDate_1.InternalDate()).clone();\r\n      internalDate.setOrder(_this.locale.order).setSeparator(_this.locale.separator);\r\n      var typesOrder = internalDate.toFragments().map(function (_a) {\r\n        var type = _a.type;\r\n        return type;\r\n      });\r\n      _this.setState(tslib_1.__assign({}, state, { typesOrder: typesOrder, internalDate: internalDate }), callback);\r\n    };\r\n    _this.updateInternalDateFromProps = function () {\r\n      var isMod = false;\r\n      var internalDate = _this.state.internalDate.clone();\r\n      var start = internalDate.getRangeStart();\r\n      var min = start && start.toInternalString();\r\n      var end = internalDate.getRangeEnd();\r\n      var max = end && end.toInternalString();\r\n      var _a = _this.locale,order = _a.order,separator = _a.separator;\r\n      if (_this.props.minDate !== min) {\r\n        isMod = true;\r\n        internalDate.setRangeStart(new InternalDate_1.InternalDate({ order: order, separator: separator, value: _this.props.minDate }));\r\n      }\r\n      if (_this.props.maxDate !== max) {\r\n        isMod = true;\r\n        internalDate.setRangeEnd(new InternalDate_1.InternalDate({ order: order, separator: separator, value: _this.props.maxDate }));\r\n      }\r\n      if (!_this.props.value || _this.props.value !== internalDate.toInternalString()) {\r\n        isMod = true;\r\n        internalDate.parseInternalValue(_this.props.value);\r\n      }\r\n      if (isMod) {\r\n        _this.setState({ internalDate: internalDate });\r\n      }\r\n    };\r\n    _this.handleFocus = function (event) {\r\n      if (_this.props.disabled) {\r\n        return;\r\n      }\r\n      if (IS_IE && _this.ieFrozen) {\r\n        _this.ieFrozen = false;\r\n        event.preventDefault();\r\n        return;\r\n      }\r\n      _this.setState(function (prevState) {\r\n        _this.isFirstFocus = !prevState.focused;\r\n        return {\r\n          focused: true,\r\n          selected: prevState.selected === null && !_this.isMouseDown ? _this.getFirstDateComponentType() : prevState.selected };\r\n\r\n      });\r\n      if (_this.props.onFocus) {\r\n        _this.props.onFocus(event);\r\n      }\r\n    };\r\n    _this.handleBlur = function (event) {\r\n      if (IS_IE && _this.ieFrozen) {\r\n        event.preventDefault();\r\n        return;\r\n      }\r\n      event.persist();\r\n      _this.setState({ focused: false, selected: null, inputMode: false }, function () {\r\n        var internalDate = _this.state.internalDate;\r\n        SelectionHelpers_1.removeAllSelections();\r\n        if (internalDate && internalDate.isIncomplete()) {\r\n          _this.updateInternalDate(internalDate.restore());\r\n        }\r\n        if (_this.props.onBlur) {\r\n          _this.props.onBlur(event);\r\n        }\r\n      });\r\n    };\r\n    _this.handleKeyDown = function (event) {\r\n      if (_this.props.disabled) {\r\n        return;\r\n      }\r\n      if (_this.props.onKeyDown) {\r\n        _this.props.onKeyDown(event);\r\n        if (event.defaultPrevented) {\r\n          return;\r\n        }\r\n      }\r\n      var action = DateInputKeyboardActions_1.extractAction(event);\r\n      if (action === DateInputKeyboardActions_1.Actions.MoveSelectionLeft) {\r\n        _this.moveSelection(-1);\r\n      }\r\n      if (action === DateInputKeyboardActions_1.Actions.MoveSelectionRight) {\r\n        _this.moveSelection(1);\r\n      }\r\n      if (action === DateInputKeyboardActions_1.Actions.Separator) {\r\n        _this.pressDelimiter();\r\n      }\r\n      if (action === DateInputKeyboardActions_1.Actions.MoveSelectionFirst) {\r\n        _this.selectDateComponent(_this.getFirstDateComponentType());\r\n      }\r\n      if (action === DateInputKeyboardActions_1.Actions.MoveSelectionLast) {\r\n        _this.selectDateComponent(_this.getLastDateComponentType());\r\n      }\r\n      if (action === DateInputKeyboardActions_1.Actions.Increment) {\r\n        _this.updateDateComponentBy(1);\r\n      }\r\n      if (action === DateInputKeyboardActions_1.Actions.Decrement) {\r\n        _this.updateDateComponentBy(-1);\r\n      }\r\n      if (action === DateInputKeyboardActions_1.Actions.Digit) {\r\n        _this.inputValue(event);\r\n      }\r\n      if (action === DateInputKeyboardActions_1.Actions.ClearSelection) {\r\n        _this.clearSelected();\r\n      }\r\n      if (action === DateInputKeyboardActions_1.Actions.ClearOneChar) {\r\n        if (_this.state.selected === types_1.InternalDateComponentType.All) {\r\n          _this.clearSelected();\r\n        } else\r\n        {\r\n          _this.clearOneChar();\r\n        }\r\n      }\r\n      if (action === DateInputKeyboardActions_1.Actions.FullSelection) {\r\n        event.nativeEvent.stopImmediatePropagation();\r\n        _this.selectDateComponent(types_1.InternalDateComponentType.All);\r\n      }\r\n      if (action === DateInputKeyboardActions_1.Actions.PasteValue) {\r\n        // @ts-ignore (IE specific api)\r\n        if (ensureOldIEClassName_1.isIE && window.clipboardData) {\r\n          // @ts-ignore\r\n          _this.handlePaste(undefined, window.clipboardData.getData('text'));\r\n        }\r\n      }\r\n      if (action === DateInputKeyboardActions_1.Actions.WrongInput) {\r\n        _this.blink();\r\n      }\r\n      if (_this.state.focused && action !== DateInputKeyboardActions_1.Actions.Ignore) {\r\n        _this.selection();\r\n      }\r\n      if (action !== DateInputKeyboardActions_1.Actions.Ignore && action !== DateInputKeyboardActions_1.Actions.PasteValue && action !== DateInputKeyboardActions_1.Actions.CopyValue) {\r\n        event.preventDefault();\r\n      }\r\n    };\r\n    // tslint:disable:member-ordering\r\n    _this.selectionNotIe = function () {\r\n      _this.changeSelectedDateComponent(_this.state.selected);\r\n    };\r\n    _this.selectionIe = lodash_debounce_1[\"default\"](function () {\r\n      var node = _this.inputLikeText && _this.inputLikeText.getNode();\r\n      if (_this.inputLikeText && node && node.contains(document.activeElement)) {\r\n        _this.ieFrozen = true;\r\n        _this.changeSelectedDateComponent(_this.state.selected);\r\n        if (_this.inputLikeText) {\r\n          _this.inputLikeText.focus();\r\n        }\r\n      }\r\n    }, 10);\r\n    _this.selection = IS_IE ? _this.selectionIe : _this.selectionNotIe;\r\n    // tslint:enable:member-ordering\r\n    _this.pressDelimiter = function () {\r\n      var value = _this.state.internalDate.get(_this.state.selected);\r\n      if (value !== null && value !== '') {\r\n        if (_this.state.autoMoved) {\r\n          _this.setState({ autoMoved: false });\r\n        } else\r\n        {\r\n          _this.moveSelection(1);\r\n        }\r\n      }\r\n    };\r\n    _this.handlePaste = function (e, pasted) {\r\n      pasted = pasted || e && e.clipboardData.getData('text').trim();\r\n      if (pasted && _this.state.internalDate !== null) {\r\n        _this.updateInternalDate(_this.state.internalDate.\r\n        parseValue(pasted).\r\n        restore().\r\n        cutOffExcess());\r\n      }\r\n    };\r\n    _this.emitChange = function () {\r\n      var value = _this.state.internalDate.isEmpty() ? '' : _this.state.internalDate.toInternalString();\r\n      if (_this.props.value === value) {\r\n        return;\r\n      }\r\n      if (_this.props.onChange) {\r\n        _this.props.onChange({ target: { value: value } }, value);\r\n      }\r\n    };\r\n    _this.inputNumberCallBack = function (next, inputMode) {\r\n      var type = _this.state.selected;\r\n      var internalDate = _this.state.internalDate.clone();\r\n      if (type === null || type === types_1.InternalDateComponentType.All) {\r\n        type = _this.getFirstDateComponentType();\r\n        inputMode = false;\r\n        _this.selectDateComponent(type);\r\n      }\r\n      internalDate.set(type, next);\r\n      if (!inputMode) {\r\n        if (type !== types_1.InternalDateComponentType.Year) {\r\n          internalDate.cutOffExcess(type);\r\n        } else\r\n        {\r\n          internalDate.restore(type);\r\n        }\r\n        _this.moveSelection(1, true);\r\n      }\r\n      _this.updateInternalDate(internalDate, { inputMode: inputMode });\r\n    };\r\n    _this.selectNodeContents = function (node, start, end) {\r\n      if (_this.state.focused && node) {\r\n        if (utils_1.isFirefox) {\r\n          SelectionHelpers_1.selectNodeContents(node, start, end);\r\n          setTimeout(function () {return _this.state.focused && SelectionHelpers_1.selectNodeContents(node, start, end);}, 0);\r\n        } else\r\n        {\r\n          SelectionHelpers_1.selectNodeContents(node, start, end);\r\n        }\r\n      }\r\n    };\r\n    _this.selectDateComponent = function (selected) {\r\n      if (IS_IE && _this.ieFrozen) {\r\n        return;\r\n      }\r\n      _this.setState({ selected: selected, inputMode: false });\r\n    };\r\n    _this.handleDoubleClick = function () {\r\n      _this.selectDateComponent(types_1.InternalDateComponentType.All);\r\n    };\r\n    _this.getFirstDateComponentType = function () {return _this.state.typesOrder[0];};\r\n    _this.getLastDateComponentType = function () {\r\n      return _this.state.typesOrder[_this.state.typesOrder.length - 1];\r\n    };\r\n    _this.renderIcon = function () {\r\n      var _a;\r\n      var _b = _this.props,withIcon = _b.withIcon,size = _b.size,_c = _b.disabled,disabled = _c === void 0 ? false : _c;\r\n      if (withIcon) {\r\n        var theme = _this.theme;\r\n        var iconStyles = Emotion_1.cx((_a = {},\r\n        _a[DateInput_module_less_1[\"default\"].icon] = true,\r\n        _a[DateInput_styles_1[\"default\"].icon(theme)] = true,\r\n        _a[DateInput_styles_1[\"default\"].iconSmall(theme)] = size === 'small',\r\n        _a[DateInput_styles_1[\"default\"].iconMedium(theme)] = size === 'medium',\r\n        _a[DateInput_styles_1[\"default\"].iconLarge(theme)] = size === 'large',\r\n        _a[DateInput_module_less_1[\"default\"].iconDisabled] = disabled,\r\n        _a[DateInput_styles_1[\"default\"].iconDisabled(theme)] = disabled,\r\n        _a));\r\n        return React.createElement(\"span\", { className: iconStyles },\r\n        React.createElement(Calendar_1[\"default\"], null));\r\n      }\r\n      return null;\r\n    };\r\n    _this.state = {\r\n      notify: false,\r\n      selected: null,\r\n      internalDate: new InternalDate_1.InternalDate(),\r\n      typesOrder: [],\r\n      inputMode: false,\r\n      focused: false,\r\n      dragged: false,\r\n      autoMoved: false };\r\n\r\n    return _this;\r\n  }\r\n  DateInput.prototype.componentDidUpdate = function (prevProps, prevState) {\r\n    if (prevProps.value !== this.props.value ||\r\n    prevProps.minDate !== this.props.minDate ||\r\n    prevProps.maxDate !== this.props.maxDate ||\r\n    prevState.internalDate.getOrder() !== this.locale.order ||\r\n    prevState.internalDate.getSeparator() !== this.locale.separator) {\r\n      this.updateInternalDate(undefined, {}, this.updateInternalDateFromProps);\r\n    }\r\n    if (this.state.focused && prevState.selected !== this.state.selected) {\r\n      this.selection();\r\n    }\r\n    if (this.state.notify && !prevState.notify) {\r\n      this.notify();\r\n    }\r\n  };\r\n  DateInput.prototype.componentDidMount = function () {\r\n    this.updateInternalDate(undefined, {}, this.updateInternalDateFromProps);\r\n    if (this.divInnerNode) {\r\n      MouseDrag_1[\"default\"].listen(this.divInnerNode);\r\n      this.divInnerNode.addEventListener('mousedragstart', this.handleMouseDragStart);\r\n      this.divInnerNode.addEventListener('mousedragend', this.handleMouseDragEnd);\r\n    }\r\n  };\r\n  DateInput.prototype.render = function () {\r\n    var _this = this;\r\n    return React.createElement(ThemeConsumer_1[\"default\"], null, function (theme) {\r\n      _this.theme = theme;\r\n      return _this.renderMain();\r\n    });\r\n  };\r\n  DateInput.prototype.blur = function () {\r\n    if (this.inputLikeText) {\r\n      this.inputLikeText.blur();\r\n    }\r\n    this.setState({ focused: false });\r\n  };\r\n  DateInput.prototype.focus = function () {\r\n    if (!this.props.disabled) {\r\n      if (this.inputLikeText) {\r\n        this.inputLikeText.focus();\r\n      }\r\n      this.setState({ focused: true });\r\n    }\r\n  };\r\n  DateInput.prototype.blink = function () {\r\n    if (!this.props.disabled) {\r\n      if (this.inputLikeText) {\r\n        this.inputLikeText.blink();\r\n      }\r\n    }\r\n  };\r\n  DateInput.prototype.renderMain = function () {\r\n    var _this = this;\r\n    var _a = this.state,internalDate = _a.internalDate,focused = _a.focused,selected = _a.selected,inputMode = _a.inputMode;\r\n    var fragments = internalDate && (focused || !internalDate.isEmpty()) ?\r\n    internalDate.toFragments({\r\n      withSeparator: true,\r\n      withPad: true }) :\r\n\r\n    [];\r\n    return React.createElement(InputLikeText_1[\"default\"], { width: this.props.width, ref: function ref(el) {\r\n        _this.inputLikeText = el;\r\n      }, size: this.props.size, disabled: this.props.disabled, error: this.props.error, warning: this.props.warning, onBlur: this.handleBlur, onFocus: this.handleFocus, onKeyDown: this.handleKeyDown, onMouseUp: this.handleMouseUp, onMouseDown: this.handleMouseDown, onPaste: this.handlePaste, rightIcon: this.renderIcon, onDoubleClickCapture: this.handleDoubleClick },\r\n    React.createElement(DateFragmentsView_1.DateFragmentsView, { nodeRef: this.divInnerNodeRef, fragments: fragments, onSelectDateComponent: this.handleSelectDateComponent, selected: selected, inputMode: inputMode }));\r\n  };\r\n  DateInput.prototype.clearSelected = function () {\r\n    var selected = this.state.selected === null ? this.getFirstDateComponentType() : this.state.selected;\r\n    this.updateInternalDate(this.state.internalDate.clone().set(selected, null), { inputMode: false, selected: selected });\r\n    if (selected === types_1.InternalDateComponentType.All) {\r\n      this.selectDateComponent(this.getFirstDateComponentType());\r\n    }\r\n  };\r\n  DateInput.prototype.clearOneChar = function () {\r\n    var _a = this.state,selected = _a.selected,internalDate = _a.internalDate,inputMode = _a.inputMode;\r\n    var prevType = selected === null ? this.getLastDateComponentType() : selected;\r\n    var nextType = prevType === types_1.InternalDateComponentType.All ?\r\n    internalDate.\r\n    toFragments({ withSeparator: false }).\r\n    reduce(function (_type, _a) {\r\n      var value = _a.value,type = _a.type;\r\n      return value !== null ? type : _type;\r\n    }, this.getLastDateComponentType()) :\r\n    prevType;\r\n    var prev = internalDate.get(nextType);\r\n    if (prev === null) {\r\n      this.moveSelection(-1);\r\n      return;\r\n    }\r\n    prev = String(inputMode ? prev : InternalDateTransformer_1[\"default\"].padDateComponent(nextType, prev));\r\n    var next = prev.replace(/.$/, '') || null;\r\n    this.updateInternalDate(internalDate.clone().set(nextType, next), {\r\n      inputMode: next !== null,\r\n      selected: nextType });\r\n\r\n  };\r\n  DateInput.prototype.updateDateComponentBy = function (step) {\r\n    var internalDate = this.state.internalDate.clone();\r\n    var initial = internalDate.clone();\r\n    var selected = this.state.selected;\r\n    selected = selected === null ? this.getFirstDateComponentType() : selected;\r\n    var isValidRange = internalDate.validate({ checks: [types_1.InternalDateValidateCheck.Range] });\r\n    var start = internalDate.getRangeStart();\r\n    var end = internalDate.getRangeEnd();\r\n    if (!isValidRange) {\r\n      if (start && InternalDateGetter_1[\"default\"].max([internalDate, start]) === start) {\r\n        internalDate.setComponents(start.getComponentsRaw());\r\n      } else\r\n      if (end && InternalDateGetter_1[\"default\"].min([internalDate, end]) === end) {\r\n        internalDate.setComponents(end.getComponentsRaw());\r\n      }\r\n    } else\r\n    {\r\n      var clone = internalDate.clone().shift(selected, step, { isRange: false, isLoop: true });\r\n      if (clone.validate({ checks: [types_1.InternalDateValidateCheck.Range] })) {\r\n        internalDate.shift(selected, step, { isRange: false, isLoop: true });\r\n      }\r\n    }\r\n    this.updateInternalDate(internalDate, {\r\n      inputMode: false,\r\n      selected: selected === types_1.InternalDateComponentType.All ? this.getFirstDateComponentType() : selected,\r\n      notify: initial.get(selected) === internalDate.get(selected) });\r\n\r\n  };\r\n  DateInput.prototype.moveSelection = function (step, isAutoMoved) {\r\n    if (isAutoMoved === void 0) {isAutoMoved = false;}\r\n    var _a = this.state,internalDate = _a.internalDate,typesOrder = _a.typesOrder,selected = _a.selected;\r\n    var index = selected === null ? 0 : typesOrder.indexOf(selected);\r\n    if (typesOrder[index] === this.getLastDateComponentType() && step > 0 ||\r\n    typesOrder[index] === this.getFirstDateComponentType() && step < 0) {\r\n      return;\r\n    }\r\n    var nextIndex = index + step;\r\n    if (selected === types_1.InternalDateComponentType.All) {\r\n      nextIndex = step < 0 ? 0 : typesOrder.length - 1;\r\n    }\r\n    if (selected === types_1.InternalDateComponentType.Year && internalDate.getYear() !== null) {\r\n      internalDate.restore(selected);\r\n    }\r\n    this.updateInternalDate(internalDate);\r\n    if (nextIndex >= 0 && nextIndex < typesOrder.length) {\r\n      this.setState({\r\n        selected: typesOrder[nextIndex],\r\n        inputMode: false,\r\n        autoMoved: isAutoMoved });\r\n\r\n    }\r\n  };\r\n  DateInput.prototype.notify = function () {\r\n    this.blink();\r\n    this.setState({ notify: false });\r\n  };\r\n  DateInput.prototype.inputValue = function (event) {\r\n    var _this = this;\r\n    event.persist();\r\n    var type = this.state.selected;\r\n    var internalDate = this.state.internalDate.clone();\r\n    var prev = internalDate.get(type);\r\n    if (type === null) {\r\n      type = this.getFirstDateComponentType();\r\n      prev = null;\r\n      internalDate.set(type, null);\r\n    }\r\n    if (type === types_1.InternalDateComponentType.All) {\r\n      type = this.getFirstDateComponentType();\r\n      prev = null;\r\n      internalDate.set(types_1.InternalDateComponentType.All, null);\r\n    }\r\n    this.setState({ selected: type, internalDate: internalDate }, function () {\r\n      inputNumber_1.inputNumber(type, prev, event.key, _this.state.inputMode, _this.inputNumberCallBack);\r\n    });\r\n  };\r\n  DateInput.__KONTUR_REACT_UI__ = 'DateInput';\r\n  DateInput.defaultProps = {\r\n    minDate: constants_1.MIN_FULLDATE,\r\n    maxDate: constants_1.MAX_FULLDATE,\r\n    size: 'small',\r\n    width: 125 };\r\n\r\n  DateInput = tslib_1.__decorate([\r\n  decorators_1.locale('DatePicker', locale_1.DatePickerLocaleHelper)],\r\n  DateInput);\r\n  return DateInput;\r\n}(React.Component);\r\nexports.DateInput = DateInput;\r\nexports[\"default\"] = DateInput;"]},"metadata":{},"sourceType":"script"}