{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar React = tslib_1.__importStar(require(\"react\"));\n\nvar identifiers_1 = require(\"../../lib/events/keyboard/identifiers\");\n\nvar LayoutEvents_1 = tslib_1.__importDefault(require(\"../../lib/LayoutEvents\"));\n\nvar stopPropagation_1 = tslib_1.__importDefault(require(\"../../lib/events/stopPropagation\"));\n\nvar HideBodyVerticalScroll_1 = tslib_1.__importDefault(require(\"../HideBodyVerticalScroll/HideBodyVerticalScroll\"));\n\nvar ModalStack_1 = tslib_1.__importDefault(require(\"../ModalStack\"));\n\nvar RenderContainer_1 = tslib_1.__importDefault(require(\"../RenderContainer/RenderContainer\"));\n\nvar RenderLayer_1 = tslib_1.__importDefault(require(\"../RenderLayer\"));\n\nvar ZIndex_1 = tslib_1.__importDefault(require(\"../ZIndex\"));\n\nvar SidePageBody_1 = require(\"./SidePageBody\");\n\nvar SidePageContainer_1 = tslib_1.__importDefault(require(\"./SidePageContainer\"));\n\nvar SidePageContext_1 = require(\"./SidePageContext\");\n\nvar SidePageFooter_1 = require(\"./SidePageFooter\");\n\nvar SidePageHeader_1 = tslib_1.__importDefault(require(\"./SidePageHeader\"));\n\nvar react_transition_group_1 = require(\"react-transition-group\");\n\nvar SidePage_module_less_1 = tslib_1.__importDefault(require(\"./SidePage.module.css\"));\n\nvar Emotion_1 = require(\"../../lib/theming/Emotion\");\n\nvar SidePage_styles_1 = tslib_1.__importDefault(require(\"./SidePage.styles\"));\n\nvar ThemeConsumer_1 = require(\"../ThemeConsumer\");\n\nvar TRANSITION_TIMEOUT = 200;\n/**\r\n                               * Сайдпейдж\r\n                               *\r\n                               * Содержит в себе три компоненты: **SidePage.Header**,\r\n                               * **SidePage.Body** и **SidePage.Footer**\r\n                               *\r\n                               * Для отображения серой плашки в футере в компонент\r\n                               * **Footer** необходимо передать пропс **panel**\r\n                               */\n\nvar SidePage =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(SidePage, _super);\n\n  function SidePage() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {};\n    _this.stackSubscription = null;\n    _this.layoutRef = null;\n    _this.footer = null;\n    /**\r\n                          * Обновляет разметку компонента.\r\n                          * @public\r\n                          */\n\n    _this.updateLayout = function () {\n      if (_this.footer) {\n        _this.footer.update();\n      }\n    };\n\n    _this.getWidth = function () {\n      if (!_this.layoutRef) {\n        return 'auto';\n      }\n\n      return _this.layoutRef.getBoundingClientRect().width;\n    };\n\n    _this.handleStackChange = function (stack) {\n      var sidePages = stack.filter(function (x) {\n        return x instanceof SidePage;\n      });\n      var currentSidePagePosition = sidePages.indexOf(_this);\n      var isSidePageOnStackTop = stack[0] instanceof SidePage;\n      var hasMargin = sidePages.length > 1 && currentSidePagePosition === sidePages.length - 1;\n      var hasShadow = sidePages.length < 3 || currentSidePagePosition > sidePages.length - 3;\n      var hasBackground = currentSidePagePosition === sidePages.length - 1 && isSidePageOnStackTop;\n\n      _this.setState({\n        stackPosition: stack.indexOf(_this),\n        hasMargin: hasMargin,\n        hasShadow: hasShadow,\n        hasBackground: hasBackground\n      });\n    };\n\n    _this.handleClickOutside = function () {\n      if (_this.state.stackPosition === 0 && !_this.props.ignoreBackgroundClick) {\n        _this.requestClose();\n      }\n    };\n\n    _this.handleKeyDown = function (e) {\n      if (_this.state.stackPosition !== 0) {\n        return;\n      }\n\n      if (identifiers_1.isKeyEscape(e)) {\n        stopPropagation_1[\"default\"](e);\n\n        _this.requestClose();\n      }\n    };\n\n    _this.requestClose = function () {\n      if (_this.props.disableClose) {\n        return;\n      }\n\n      if (_this.props.onClose) {\n        _this.props.onClose();\n      }\n    };\n\n    _this.footerRef = function (ref) {\n      _this.footer = ref;\n    };\n\n    return _this;\n  }\n\n  SidePage.prototype.componentDidMount = function () {\n    window.addEventListener('keydown', this.handleKeyDown);\n    this.stackSubscription = ModalStack_1[\"default\"].add(this, this.handleStackChange);\n  };\n\n  SidePage.prototype.componentWillUnmount = function () {\n    window.removeEventListener('keydown', this.handleKeyDown);\n\n    if (this.stackSubscription != null) {\n      this.stackSubscription.remove();\n    }\n\n    ModalStack_1[\"default\"].remove(this);\n  };\n\n  SidePage.prototype.render = function () {\n    var _this = this;\n\n    return React.createElement(ThemeConsumer_1.ThemeConsumer, null, function (theme) {\n      _this.theme = theme;\n      return _this.renderMain();\n    });\n  };\n\n  SidePage.prototype.renderMain = function () {\n    var disableAnimations = this.props.disableAnimations;\n    return React.createElement(RenderContainer_1[\"default\"], null, React.createElement(\"div\", null, this.renderShadow(), React.createElement(react_transition_group_1.CSSTransition, {\n      \"in\": true,\n      classNames: this.getTransitionNames(),\n      appear: !disableAnimations,\n      enter: !disableAnimations,\n      exit: false,\n      timeout: {\n        enter: TRANSITION_TIMEOUT,\n        exit: TRANSITION_TIMEOUT\n      }\n    }, this.renderContainer())));\n  };\n\n  SidePage.prototype.getZIndexProps = function () {\n    var _a;\n\n    var fromLeft = this.props.fromLeft;\n    return {\n      classes: Emotion_1.cx(SidePage_module_less_1[\"default\"].root, (_a = {}, _a[SidePage_module_less_1[\"default\"].leftSide] = !!fromLeft, _a))\n    };\n  };\n\n  SidePage.prototype.renderContainer = function () {\n    var _this = this;\n\n    var classes = this.getZIndexProps().classes;\n    return React.createElement(ZIndex_1[\"default\"], {\n      priority: 'Sidepage',\n      className: classes,\n      onScroll: LayoutEvents_1[\"default\"].emit,\n      createStackingContext: true\n    }, React.createElement(RenderLayer_1[\"default\"], {\n      onClickOutside: this.handleClickOutside,\n      active: true\n    }, React.createElement(\"div\", {\n      className: Emotion_1.cx(SidePage_module_less_1[\"default\"].container, SidePage_styles_1[\"default\"].container(this.theme), this.state.hasShadow && SidePage_styles_1[\"default\"].shadow(this.theme)),\n      style: this.getSidebarStyle()\n    }, React.createElement(\"div\", {\n      ref: function ref(_) {\n        return _this.layoutRef = _;\n      }\n    }, React.createElement(SidePageContext_1.SidePageContext.Provider, {\n      value: {\n        requestClose: this.requestClose,\n        getWidth: this.getWidth,\n        updateLayout: this.updateLayout,\n        footerRef: this.footerRef\n      }\n    }, React.createElement(\"div\", {\n      className: SidePage_module_less_1[\"default\"].layout\n    }, this.props.children))))));\n  };\n\n  SidePage.prototype.renderShadow = function () {\n    var _a = this.getZIndexProps(),\n        classes = _a.classes,\n        style = _a.style;\n\n    var blockBackground = this.props.blockBackground;\n    return React.createElement(ZIndex_1[\"default\"], {\n      priority: 'Sidepage',\n      className: classes,\n      onScroll: LayoutEvents_1[\"default\"].emit,\n      style: style\n    }, blockBackground && [React.createElement(HideBodyVerticalScroll_1[\"default\"], {\n      key: \"hbvs\"\n    }), React.createElement(\"div\", {\n      key: \"overlay\",\n      className: Emotion_1.cx(SidePage_module_less_1[\"default\"].background, this.state.hasBackground && SidePage_module_less_1[\"default\"].gray)\n    })]);\n  };\n\n  SidePage.prototype.getSidebarStyle = function () {\n    var sidePageStyle = {\n      width: this.props.width || (this.props.blockBackground ? 800 : 500)\n    };\n\n    if (this.state.hasMargin) {\n      if (this.props.fromLeft) {\n        sidePageStyle.marginLeft = 20;\n      } else {\n        sidePageStyle.marginRight = 20;\n      }\n    }\n\n    return sidePageStyle;\n  };\n\n  SidePage.prototype.getTransitionNames = function () {\n    var direction = this.props.fromLeft ? 'right' : 'left';\n    var transitionEnter = Emotion_1.cx(SidePage_module_less_1[\"default\"]['transition-enter-' + direction]);\n    var transitionAppear = Emotion_1.cx(SidePage_module_less_1[\"default\"]['transition-appear-' + direction]);\n    return {\n      enter: transitionEnter,\n      enterActive: SidePage_module_less_1[\"default\"]['transition-enter-active'],\n      exit: SidePage_module_less_1[\"default\"]['transition-leave'],\n      exitActive: SidePage_module_less_1[\"default\"]['transition-leave-active'],\n      appear: transitionAppear,\n      appearActive: SidePage_module_less_1[\"default\"]['transition-appear-active']\n    };\n  };\n\n  SidePage.__KONTUR_REACT_UI__ = 'SidePage';\n  SidePage.Header = SidePageHeader_1[\"default\"];\n  SidePage.Body = SidePageBody_1.SidePageBodyWithContext;\n  SidePage.Footer = SidePageFooter_1.SidePageFooterWithContext;\n  SidePage.Container = SidePageContainer_1[\"default\"];\n  return SidePage;\n}(React.Component);\n\nexports[\"default\"] = SidePage;","map":{"version":3,"sources":["/home/aleksandr/Documents/HwProj-2.0.1/hwproj.courseworks.front/node_modules/@skbkontur/react-ui/components/SidePage/SidePage.js"],"names":["Object","defineProperty","exports","value","tslib_1","require","React","__importStar","identifiers_1","LayoutEvents_1","__importDefault","stopPropagation_1","HideBodyVerticalScroll_1","ModalStack_1","RenderContainer_1","RenderLayer_1","ZIndex_1","SidePageBody_1","SidePageContainer_1","SidePageContext_1","SidePageFooter_1","SidePageHeader_1","react_transition_group_1","SidePage_module_less_1","Emotion_1","SidePage_styles_1","ThemeConsumer_1","TRANSITION_TIMEOUT","SidePage","_super","__extends","_this","apply","arguments","state","stackSubscription","layoutRef","footer","updateLayout","update","getWidth","getBoundingClientRect","width","handleStackChange","stack","sidePages","filter","x","currentSidePagePosition","indexOf","isSidePageOnStackTop","hasMargin","length","hasShadow","hasBackground","setState","stackPosition","handleClickOutside","props","ignoreBackgroundClick","requestClose","handleKeyDown","e","isKeyEscape","disableClose","onClose","footerRef","ref","prototype","componentDidMount","window","addEventListener","add","componentWillUnmount","removeEventListener","remove","render","createElement","ThemeConsumer","theme","renderMain","disableAnimations","renderShadow","CSSTransition","classNames","getTransitionNames","appear","enter","exit","timeout","renderContainer","getZIndexProps","_a","fromLeft","classes","cx","root","leftSide","priority","className","onScroll","emit","createStackingContext","onClickOutside","active","container","shadow","style","getSidebarStyle","_","SidePageContext","Provider","layout","children","blockBackground","key","background","gray","sidePageStyle","marginLeft","marginRight","direction","transitionEnter","transitionAppear","enterActive","exitActive","appearActive","__KONTUR_REACT_UI__","Header","Body","SidePageBodyWithContext","Footer","SidePageFooterWithContext","Container","Component"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = tslib_1.__importStar(require(\"react\"));\nvar identifiers_1 = require(\"../../lib/events/keyboard/identifiers\");\nvar LayoutEvents_1 = tslib_1.__importDefault(require(\"../../lib/LayoutEvents\"));\nvar stopPropagation_1 = tslib_1.__importDefault(require(\"../../lib/events/stopPropagation\"));\nvar HideBodyVerticalScroll_1 = tslib_1.__importDefault(require(\"../HideBodyVerticalScroll/HideBodyVerticalScroll\"));\nvar ModalStack_1 = tslib_1.__importDefault(require(\"../ModalStack\"));\nvar RenderContainer_1 = tslib_1.__importDefault(require(\"../RenderContainer/RenderContainer\"));\nvar RenderLayer_1 = tslib_1.__importDefault(require(\"../RenderLayer\"));\nvar ZIndex_1 = tslib_1.__importDefault(require(\"../ZIndex\"));\nvar SidePageBody_1 = require(\"./SidePageBody\");\nvar SidePageContainer_1 = tslib_1.__importDefault(require(\"./SidePageContainer\"));\nvar SidePageContext_1 = require(\"./SidePageContext\");\nvar SidePageFooter_1 = require(\"./SidePageFooter\");\nvar SidePageHeader_1 = tslib_1.__importDefault(require(\"./SidePageHeader\"));\nvar react_transition_group_1 = require(\"react-transition-group\");\nvar SidePage_module_less_1 = tslib_1.__importDefault(require(\"./SidePage.module.css\"));\nvar Emotion_1 = require(\"../../lib/theming/Emotion\");\nvar SidePage_styles_1 = tslib_1.__importDefault(require(\"./SidePage.styles\"));\nvar ThemeConsumer_1 = require(\"../ThemeConsumer\");\nvar TRANSITION_TIMEOUT = 200;\n/**\r\n                               * Сайдпейдж\r\n                               *\r\n                               * Содержит в себе три компоненты: **SidePage.Header**,\r\n                               * **SidePage.Body** и **SidePage.Footer**\r\n                               *\r\n                               * Для отображения серой плашки в футере в компонент\r\n                               * **Footer** необходимо передать пропс **panel**\r\n                               */\nvar SidePage = /** @class */function (_super) {\n  tslib_1.__extends(SidePage, _super);\n  function SidePage() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.state = {};\n    _this.stackSubscription = null;\n    _this.layoutRef = null;\n    _this.footer = null;\n    /**\r\n                          * Обновляет разметку компонента.\r\n                          * @public\r\n                          */\n    _this.updateLayout = function () {\n      if (_this.footer) {\n        _this.footer.update();\n      }\n    };\n    _this.getWidth = function () {\n      if (!_this.layoutRef) {\n        return 'auto';\n      }\n      return _this.layoutRef.getBoundingClientRect().width;\n    };\n    _this.handleStackChange = function (stack) {\n      var sidePages = stack.filter(function (x) {return x instanceof SidePage;});\n      var currentSidePagePosition = sidePages.indexOf(_this);\n      var isSidePageOnStackTop = stack[0] instanceof SidePage;\n      var hasMargin = sidePages.length > 1 && currentSidePagePosition === sidePages.length - 1;\n      var hasShadow = sidePages.length < 3 || currentSidePagePosition > sidePages.length - 3;\n      var hasBackground = currentSidePagePosition === sidePages.length - 1 && isSidePageOnStackTop;\n      _this.setState({\n        stackPosition: stack.indexOf(_this),\n        hasMargin: hasMargin,\n        hasShadow: hasShadow,\n        hasBackground: hasBackground });\n\n    };\n    _this.handleClickOutside = function () {\n      if (_this.state.stackPosition === 0 && !_this.props.ignoreBackgroundClick) {\n        _this.requestClose();\n      }\n    };\n    _this.handleKeyDown = function (e) {\n      if (_this.state.stackPosition !== 0) {\n        return;\n      }\n      if (identifiers_1.isKeyEscape(e)) {\n        stopPropagation_1[\"default\"](e);\n        _this.requestClose();\n      }\n    };\n    _this.requestClose = function () {\n      if (_this.props.disableClose) {\n        return;\n      }\n      if (_this.props.onClose) {\n        _this.props.onClose();\n      }\n    };\n    _this.footerRef = function (ref) {\n      _this.footer = ref;\n    };\n    return _this;\n  }\n  SidePage.prototype.componentDidMount = function () {\n    window.addEventListener('keydown', this.handleKeyDown);\n    this.stackSubscription = ModalStack_1[\"default\"].add(this, this.handleStackChange);\n  };\n  SidePage.prototype.componentWillUnmount = function () {\n    window.removeEventListener('keydown', this.handleKeyDown);\n    if (this.stackSubscription != null) {\n      this.stackSubscription.remove();\n    }\n    ModalStack_1[\"default\"].remove(this);\n  };\n  SidePage.prototype.render = function () {\n    var _this = this;\n    return React.createElement(ThemeConsumer_1.ThemeConsumer, null, function (theme) {\n      _this.theme = theme;\n      return _this.renderMain();\n    });\n  };\n  SidePage.prototype.renderMain = function () {\n    var disableAnimations = this.props.disableAnimations;\n    return React.createElement(RenderContainer_1[\"default\"], null,\n    React.createElement(\"div\", null,\n    this.renderShadow(),\n    React.createElement(react_transition_group_1.CSSTransition, { \"in\": true, classNames: this.getTransitionNames(), appear: !disableAnimations, enter: !disableAnimations, exit: false, timeout: {\n        enter: TRANSITION_TIMEOUT,\n        exit: TRANSITION_TIMEOUT } },\n    this.renderContainer())));\n  };\n  SidePage.prototype.getZIndexProps = function () {\n    var _a;\n    var fromLeft = this.props.fromLeft;\n    return {\n      classes: Emotion_1.cx(SidePage_module_less_1[\"default\"].root, (_a = {},\n      _a[SidePage_module_less_1[\"default\"].leftSide] = !!fromLeft,\n      _a)) };\n\n  };\n  SidePage.prototype.renderContainer = function () {\n    var _this = this;\n    var classes = this.getZIndexProps().classes;\n    return React.createElement(ZIndex_1[\"default\"], { priority: 'Sidepage', className: classes, onScroll: LayoutEvents_1[\"default\"].emit, createStackingContext: true },\n    React.createElement(RenderLayer_1[\"default\"], { onClickOutside: this.handleClickOutside, active: true },\n    React.createElement(\"div\", { className: Emotion_1.cx(SidePage_module_less_1[\"default\"].container, SidePage_styles_1[\"default\"].container(this.theme), this.state.hasShadow && SidePage_styles_1[\"default\"].shadow(this.theme)), style: this.getSidebarStyle() },\n    React.createElement(\"div\", { ref: function ref(_) {return _this.layoutRef = _;} },\n    React.createElement(SidePageContext_1.SidePageContext.Provider, { value: {\n        requestClose: this.requestClose,\n        getWidth: this.getWidth,\n        updateLayout: this.updateLayout,\n        footerRef: this.footerRef } },\n\n    React.createElement(\"div\", { className: SidePage_module_less_1[\"default\"].layout }, this.props.children))))));\n  };\n  SidePage.prototype.renderShadow = function () {\n    var _a = this.getZIndexProps(),classes = _a.classes,style = _a.style;\n    var blockBackground = this.props.blockBackground;\n    return React.createElement(ZIndex_1[\"default\"], { priority: 'Sidepage', className: classes, onScroll: LayoutEvents_1[\"default\"].emit, style: style }, blockBackground && [\n    React.createElement(HideBodyVerticalScroll_1[\"default\"], { key: \"hbvs\" }),\n    React.createElement(\"div\", { key: \"overlay\", className: Emotion_1.cx(SidePage_module_less_1[\"default\"].background, this.state.hasBackground && SidePage_module_less_1[\"default\"].gray) })]);\n\n  };\n  SidePage.prototype.getSidebarStyle = function () {\n    var sidePageStyle = {\n      width: this.props.width || (this.props.blockBackground ? 800 : 500) };\n\n    if (this.state.hasMargin) {\n      if (this.props.fromLeft) {\n        sidePageStyle.marginLeft = 20;\n      } else\n      {\n        sidePageStyle.marginRight = 20;\n      }\n    }\n    return sidePageStyle;\n  };\n  SidePage.prototype.getTransitionNames = function () {\n    var direction = this.props.fromLeft ? 'right' : 'left';\n    var transitionEnter = Emotion_1.cx(SidePage_module_less_1[\"default\"]['transition-enter-' + direction]);\n    var transitionAppear = Emotion_1.cx(SidePage_module_less_1[\"default\"]['transition-appear-' + direction]);\n    return {\n      enter: transitionEnter,\n      enterActive: SidePage_module_less_1[\"default\"]['transition-enter-active'],\n      exit: SidePage_module_less_1[\"default\"]['transition-leave'],\n      exitActive: SidePage_module_less_1[\"default\"]['transition-leave-active'],\n      appear: transitionAppear,\n      appearActive: SidePage_module_less_1[\"default\"]['transition-appear-active'] };\n\n  };\n  SidePage.__KONTUR_REACT_UI__ = 'SidePage';\n  SidePage.Header = SidePageHeader_1[\"default\"];\n  SidePage.Body = SidePageBody_1.SidePageBodyWithContext;\n  SidePage.Footer = SidePageFooter_1.SidePageFooterWithContext;\n  SidePage.Container = SidePageContainer_1[\"default\"];\n  return SidePage;\n}(React.Component);\nexports[\"default\"] = SidePage;"]},"metadata":{},"sourceType":"script"}