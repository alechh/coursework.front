{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar config_1 = tslib_1.__importDefault(require(\"./config\"));\n\nvar MonthViewModel_1 = require(\"./MonthViewModel\");\n\nexports.calculateScrollPosition = function (months, scrollPosition, deltaY) {\n  var scrollDirection = deltaY > 0 ? 1 : -1;\n  var nextScrollPosition = scrollPosition - deltaY;\n  var nextMonths = months;\n  var firstMonth = months[0];\n\n  if (scrollDirection < 0 && nextScrollPosition >= firstMonth.height) {\n    do {\n      nextScrollPosition -= nextMonths[0].height;\n      nextMonths = exports.getMonths(firstMonth.month, firstMonth.year);\n    } while (nextScrollPosition >= nextMonths[0].height);\n  }\n\n  var lastMonth = months[months.length - 1];\n\n  if (scrollDirection > 0 && nextScrollPosition < 0) {\n    do {\n      nextScrollPosition += nextMonths[1].height;\n      nextMonths = exports.getMonths(lastMonth.month, lastMonth.year);\n    } while (nextScrollPosition < 0);\n  }\n\n  return {\n    scrollPosition: nextScrollPosition,\n    months: nextMonths,\n    scrollDirection: scrollDirection\n  };\n};\n\nexports.applyDelta = function (deltaY) {\n  return function (_a, _b) {\n    var scrollPosition = _a.scrollPosition,\n        months = _a.months;\n    var minDate = _b.minDate,\n        maxDate = _b.maxDate;\n    var scrollDirection = deltaY > 0 ? 1 : -1;\n    var isMinDateExceeded = minDate && scrollDirection < 0 && minDate.year * 12 + minDate.month > months[0].year * 12 + months[0].month;\n    var isMaxDateExceeded = maxDate && scrollDirection > 0 && maxDate.year * 12 + maxDate.month < months[1].year * 12 + months[1].month;\n\n    if (isMinDateExceeded) {\n      return {\n        scrollPosition: 0,\n        scrollDirection: scrollDirection\n      };\n    }\n\n    if (isMaxDateExceeded) {\n      return {\n        scrollPosition: months[2].height,\n        scrollDirection: scrollDirection\n      };\n    }\n\n    return exports.calculateScrollPosition(months, scrollPosition, deltaY);\n  };\n};\n\nexports.isMonthVisible = function (top, month) {\n  return top < config_1[\"default\"].WRAPPER_HEIGHT && top > -month.height;\n};\n\nexports.getMonthsHeight = function (months) {\n  return months.reduce(function (a, b) {\n    return a + b.height;\n  }, 0);\n};\n\nexports.getMonths = function (month, year) {\n  return [-1, 0, 1].map(function (x) {\n    return MonthViewModel_1.MonthViewModel.create(month + x, year);\n  });\n};","map":{"version":3,"sources":["C:/Users/Sasha/Documents/coursework.front/node_modules/@skbkontur/react-ui/components/Calendar/CalendarUtils.js"],"names":["Object","defineProperty","exports","value","tslib_1","require","config_1","__importDefault","MonthViewModel_1","calculateScrollPosition","months","scrollPosition","deltaY","scrollDirection","nextScrollPosition","nextMonths","firstMonth","height","getMonths","month","year","lastMonth","length","applyDelta","_a","_b","minDate","maxDate","isMinDateExceeded","isMaxDateExceeded","isMonthVisible","top","WRAPPER_HEIGHT","getMonthsHeight","reduce","a","b","map","x","MonthViewModel","create"],"mappings":"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","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar config_1 = tslib_1.__importDefault(require(\"./config\"));\r\nvar MonthViewModel_1 = require(\"./MonthViewModel\");\r\nexports.calculateScrollPosition = function (months, scrollPosition, deltaY) {\r\n  var scrollDirection = deltaY > 0 ? 1 : -1;\r\n  var nextScrollPosition = scrollPosition - deltaY;\r\n  var nextMonths = months;\r\n  var firstMonth = months[0];\r\n  if (scrollDirection < 0 && nextScrollPosition >= firstMonth.height) {\r\n    do {\r\n      nextScrollPosition -= nextMonths[0].height;\r\n      nextMonths = exports.getMonths(firstMonth.month, firstMonth.year);\r\n    } while (nextScrollPosition >= nextMonths[0].height);\r\n  }\r\n  var lastMonth = months[months.length - 1];\r\n  if (scrollDirection > 0 && nextScrollPosition < 0) {\r\n    do {\r\n      nextScrollPosition += nextMonths[1].height;\r\n      nextMonths = exports.getMonths(lastMonth.month, lastMonth.year);\r\n    } while (nextScrollPosition < 0);\r\n  }\r\n  return {\r\n    scrollPosition: nextScrollPosition,\r\n    months: nextMonths,\r\n    scrollDirection: scrollDirection };\r\n\r\n};\r\nexports.applyDelta = function (deltaY) {return function (_a, _b) {\r\n    var scrollPosition = _a.scrollPosition,months = _a.months;\r\n    var minDate = _b.minDate,maxDate = _b.maxDate;\r\n    var scrollDirection = deltaY > 0 ? 1 : -1;\r\n    var isMinDateExceeded = minDate && scrollDirection < 0 && minDate.year * 12 + minDate.month > months[0].year * 12 + months[0].month;\r\n    var isMaxDateExceeded = maxDate && scrollDirection > 0 && maxDate.year * 12 + maxDate.month < months[1].year * 12 + months[1].month;\r\n    if (isMinDateExceeded) {\r\n      return { scrollPosition: 0, scrollDirection: scrollDirection };\r\n    }\r\n    if (isMaxDateExceeded) {\r\n      return { scrollPosition: months[2].height, scrollDirection: scrollDirection };\r\n    }\r\n    return exports.calculateScrollPosition(months, scrollPosition, deltaY);\r\n  };};\r\nexports.isMonthVisible = function (top, month) {\r\n  return top < config_1[\"default\"].WRAPPER_HEIGHT && top > -month.height;\r\n};\r\nexports.getMonthsHeight = function (months) {return months.reduce(function (a, b) {return a + b.height;}, 0);};\r\nexports.getMonths = function (month, year) {\r\n  return [-1, 0, 1].map(function (x) {return MonthViewModel_1.MonthViewModel.create(month + x, year);});\r\n};"]},"metadata":{},"sourceType":"script"}