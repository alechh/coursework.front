{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar React = tslib_1.__importStar(require(\"react\"));\n\nvar identifiers_1 = require(\"../../lib/events/keyboard/identifiers\");\n\nvar polyfillPlaceholder_1 = tslib_1.__importDefault(require(\"../polyfillPlaceholder\"));\n\nrequire(\"../ensureOldIEClassName\");\n\nvar invariant_1 = tslib_1.__importDefault(require(\"invariant\"));\n\nvar MaskedInput_1 = tslib_1.__importDefault(require(\"../internal/MaskedInput/MaskedInput\"));\n\nvar Emotion_1 = require(\"../../lib/theming/Emotion\");\n\nvar Input_module_less_1 = tslib_1.__importDefault(require(\"./Input.module.css\"));\n\nvar Input_styles_1 = tslib_1.__importDefault(require(\"./Input.styles\"));\n\nvar ThemeConsumer_1 = require(\"../ThemeConsumer\");\n\nvar raf_1 = tslib_1.__importDefault(require(\"raf\"));\n/**\r\n                                                      * Интерфес пропсов наследуется от `React.InputHTMLAttributes<HTMLInputElement>`.\r\n                                                      *  Все пропсы кроме перечисленных, `className` и `style` передаются в `<input>`\r\n                                                      */\n\n\nvar Input =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Input, _super);\n\n  function Input() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      polyfillPlaceholder: false,\n      blinking: false,\n      focused: false\n    };\n    _this.selectAllId = null;\n    _this.blinkTimeout = 0;\n    _this.input = null;\n    /**\r\n                         * @public\r\n                         */\n\n    _this.selectAll = function () {\n      if (_this.input) {\n        _this.setSelectionRange(0, _this.input.value.length);\n      }\n    };\n\n    _this.delaySelectAll = function () {\n      return _this.selectAllId = raf_1[\"default\"](_this.selectAll);\n    };\n\n    _this.cancelDelayedSelectAll = function () {\n      if (_this.selectAllId) {\n        raf_1[\"default\"].cancel(_this.selectAllId);\n        _this.selectAllId = null;\n      }\n    };\n\n    _this.cancelBlink = function (callback) {\n      if (_this.blinkTimeout) {\n        clearTimeout(_this.blinkTimeout);\n        _this.blinkTimeout = 0;\n\n        if (_this.state.blinking) {\n          _this.setState({\n            blinking: false\n          }, callback);\n\n          return;\n        }\n      }\n\n      if (callback) {\n        callback();\n      }\n    };\n\n    _this.refInput = function (element) {\n      if (element instanceof MaskedInput_1[\"default\"]) {\n        _this.input = element.input;\n      } else {\n        _this.input = element;\n      }\n    };\n\n    _this.handleChange = function (event) {\n      if (polyfillPlaceholder_1[\"default\"]) {\n        var fieldIsEmpty = event.target.value === '';\n\n        if (_this.state.polyfillPlaceholder !== fieldIsEmpty) {\n          _this.setState({\n            polyfillPlaceholder: fieldIsEmpty\n          });\n        }\n      }\n\n      if (_this.props.onChange) {\n        _this.props.onChange(event, event.target.value);\n      }\n    };\n\n    _this.handleFocus = function (event) {\n      _this.setState({\n        focused: true\n      });\n\n      if (_this.props.selectAllOnFocus) {\n        // https://github.com/facebook/react/issues/7769\n        _this.input ? _this.selectAll() : _this.delaySelectAll();\n      }\n\n      if (_this.props.onFocus) {\n        _this.props.onFocus(event);\n      }\n    };\n\n    _this.handleKeyDown = function (e) {\n      if (_this.props.onKeyDown) {\n        _this.props.onKeyDown(e);\n      }\n\n      var isDeleteKey = identifiers_1.someKeys(identifiers_1.isKeyBackspace, identifiers_1.isKeyDelete)(e);\n\n      if (!e.currentTarget.value && isDeleteKey && !e.repeat) {\n        _this.handleUnexpectedInput();\n      }\n    };\n\n    _this.handleKeyPress = function (event) {\n      if (_this.props.onKeyPress) {\n        _this.props.onKeyPress(event);\n      }\n\n      if (_this.props.maxLength === event.currentTarget.value.length) {\n        _this.handleUnexpectedInput();\n      }\n    };\n\n    _this.handleUnexpectedInput = function () {\n      if (_this.props.onUnexpectedInput) {\n        _this.props.onUnexpectedInput();\n      } else {\n        _this.blink();\n      }\n    };\n\n    _this.handleBlur = function (event) {\n      _this.setState({\n        focused: false\n      });\n\n      if (_this.props.onBlur) {\n        _this.props.onBlur(event);\n      }\n    };\n\n    _this.renderPrefix = function () {\n      var prefix = _this.props.prefix;\n\n      if (!prefix) {\n        return null;\n      }\n\n      return React.createElement(\"span\", {\n        className: Input_styles_1[\"default\"].prefix(_this.theme)\n      }, prefix);\n    };\n\n    _this.renderSuffix = function () {\n      var suffix = _this.props.suffix;\n\n      if (!suffix) {\n        return null;\n      }\n\n      return React.createElement(\"span\", {\n        className: Input_styles_1[\"default\"].suffix(_this.theme)\n      }, suffix);\n    };\n\n    return _this;\n  }\n\n  Input.prototype.componentDidMount = function () {\n    if (polyfillPlaceholder_1[\"default\"]) {\n      this.setState({\n        polyfillPlaceholder: true\n      });\n    }\n  };\n\n  Input.prototype.componentWillUnmount = function () {\n    if (this.blinkTimeout) {\n      clearTimeout(this.blinkTimeout);\n    }\n\n    this.cancelDelayedSelectAll();\n  };\n\n  Input.prototype.componentWillReceiveProps = function (nextProps) {\n    if (polyfillPlaceholder_1[\"default\"] && !nextProps.value) {\n      this.setState({\n        polyfillPlaceholder: true\n      });\n    }\n  };\n  /**\r\n      * @public\r\n      */\n\n\n  Input.prototype.focus = function () {\n    invariant_1[\"default\"](this.input, 'Cannot call \"focus\" because Input is not mounted');\n    this.input.focus();\n  };\n  /**\r\n      * @public\r\n      */\n\n\n  Input.prototype.blur = function () {\n    invariant_1[\"default\"](this.input, 'Cannot call \"blur\" because Input is not mounted');\n    this.input.blur();\n  };\n  /**\r\n      * @public\r\n      */\n\n\n  Input.prototype.blink = function () {\n    var _this = this;\n\n    if (this.blinkTimeout) {\n      this.cancelBlink(function () {\n        // trigger reflow to restart animation\n        // @see https://css-tricks.com/restart-css-animation/#article-header-id-0\n        // tslint:disable-next-line:no-unused-expression\n        void (_this.input && _this.input.offsetWidth);\n\n        _this.blink();\n      });\n      return;\n    }\n\n    this.setState({\n      blinking: true\n    }, function () {\n      _this.blinkTimeout = window.setTimeout(_this.cancelBlink, 150);\n    });\n  };\n  /**\r\n      * @public\r\n      */\n\n\n  Input.prototype.setSelectionRange = function (start, end) {\n    if (!this.input) {\n      throw new Error('Cannot call \"setSelectionRange\" on unmounted Input');\n    }\n\n    if (document.activeElement !== this.input) {\n      this.focus();\n    }\n\n    this.input.setSelectionRange(start, end);\n  };\n\n  Object.defineProperty(Input.prototype, \"isMaskVisible\", {\n    get: function get() {\n      var _a = this.props,\n          mask = _a.mask,\n          alwaysShowMask = _a.alwaysShowMask;\n      var focused = this.state.focused;\n      return Boolean(mask && (focused || alwaysShowMask));\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Input.prototype.render = function () {\n    var _this = this;\n\n    return React.createElement(ThemeConsumer_1.ThemeConsumer, null, function (theme) {\n      _this.theme = theme;\n      return _this.renderMain();\n    });\n  };\n\n  Input.prototype.renderMain = function () {\n    var _a;\n\n    var _b = this.props,\n        onMouseEnter = _b.onMouseEnter,\n        onMouseLeave = _b.onMouseLeave,\n        onMouseOver = _b.onMouseOver,\n        onKeyDown = _b.onKeyDown,\n        onKeyPress = _b.onKeyPress,\n        width = _b.width,\n        error = _b.error,\n        warning = _b.warning,\n        leftIcon = _b.leftIcon,\n        rightIcon = _b.rightIcon,\n        borderless = _b.borderless,\n        value = _b.value,\n        align = _b.align,\n        type = _b.type,\n        mask = _b.mask,\n        maskChar = _b.maskChar,\n        alwaysShowMask = _b.alwaysShowMask,\n        style = _b.style,\n        className = _b.className,\n        size = _b.size,\n        placeholder = _b.placeholder,\n        mainInGroup = _b.mainInGroup,\n        selectAllOnFocus = _b.selectAllOnFocus,\n        disabled = _b.disabled,\n        onUnexpectedInput = _b.onUnexpectedInput,\n        prefix = _b.prefix,\n        suffix = _b.suffix,\n        formatChars = _b.formatChars,\n        rest = tslib_1.__rest(_b, [\"onMouseEnter\", \"onMouseLeave\", \"onMouseOver\", \"onKeyDown\", \"onKeyPress\", \"width\", \"error\", \"warning\", \"leftIcon\", \"rightIcon\", \"borderless\", \"value\", \"align\", \"type\", \"mask\", \"maskChar\", \"alwaysShowMask\", \"style\", \"className\", \"size\", \"placeholder\", \"mainInGroup\", \"selectAllOnFocus\", \"disabled\", \"onUnexpectedInput\", \"prefix\", \"suffix\", \"formatChars\"]);\n\n    var _c = this.state,\n        blinking = _c.blinking,\n        focused = _c.focused;\n    var labelProps = {\n      className: Emotion_1.cx(Input_module_less_1[\"default\"].root, Input_styles_1[\"default\"].root(this.theme), this.getSizeClassName(), (_a = {}, _a[Input_module_less_1[\"default\"].focus] = focused, _a[Input_module_less_1[\"default\"].disabled] = !!disabled, _a[Input_module_less_1[\"default\"].error] = !!error, _a[Input_module_less_1[\"default\"].warning] = !!warning, _a[Input_module_less_1[\"default\"].borderless] = !!borderless, _a[Input_styles_1[\"default\"].focus(this.theme)] = focused, _a[Input_styles_1[\"default\"].blink(this.theme)] = !!blinking, _a[Input_styles_1[\"default\"].warning(this.theme)] = !!warning, _a[Input_styles_1[\"default\"].error(this.theme)] = !!error, _a[Input_styles_1[\"default\"].disabled(this.theme)] = !!disabled, _a)),\n      style: {\n        width: width\n      },\n      onMouseEnter: onMouseEnter,\n      onMouseLeave: onMouseLeave,\n      onMouseOver: onMouseOver\n    };\n\n    var inputProps = tslib_1.__assign({}, rest, {\n      className: Emotion_1.cx(Input_module_less_1[\"default\"].input, Input_styles_1[\"default\"].input(this.theme)),\n      value: value,\n      onChange: this.handleChange,\n      onFocus: this.handleFocus,\n      onKeyDown: this.handleKeyDown,\n      onKeyPress: this.handleKeyPress,\n      onBlur: this.handleBlur,\n      style: {\n        textAlign: align\n      },\n      ref: this.refInput,\n      type: 'text',\n      placeholder: !this.isMaskVisible && !polyfillPlaceholder_1[\"default\"] ? placeholder : undefined,\n      disabled: disabled\n    });\n\n    if (type === 'password') {\n      inputProps.type = type;\n    }\n\n    var input = !!mask ? this.renderMaskedInput(inputProps, mask) : React.createElement('input', inputProps);\n    return React.createElement(\"label\", tslib_1.__assign({}, labelProps), React.createElement(\"span\", {\n      className: Input_module_less_1[\"default\"].sideContainer\n    }, this.renderLeftIcon(), this.renderPrefix()), React.createElement(\"span\", {\n      className: Input_module_less_1[\"default\"].wrapper\n    }, input, this.renderPlaceholder()), React.createElement(\"span\", {\n      className: Emotion_1.cx(Input_module_less_1[\"default\"].sideContainer, Input_module_less_1[\"default\"].rightContainer)\n    }, this.renderSuffix(), this.renderRightIcon()));\n  };\n\n  Input.prototype.renderMaskedInput = function (inputProps, mask) {\n    return React.createElement(MaskedInput_1[\"default\"], tslib_1.__assign({}, inputProps, {\n      mask: mask,\n      maskChar: this.props.maskChar === undefined ? '_' : this.props.maskChar,\n      alwaysShowMask: this.props.alwaysShowMask,\n      onUnexpectedInput: this.handleUnexpectedInput,\n      formatChars: this.props.formatChars\n    }));\n  };\n\n  Input.prototype.renderLeftIcon = function () {\n    return this.renderIcon(this.props.leftIcon, Input_module_less_1[\"default\"].leftIcon);\n  };\n\n  Input.prototype.renderRightIcon = function () {\n    return this.renderIcon(this.props.rightIcon, Input_module_less_1[\"default\"].rightIcon);\n  };\n\n  Input.prototype.renderIcon = function (icon, className) {\n    if (!icon) {\n      return null;\n    }\n\n    if (icon instanceof Function) {\n      return React.createElement(\"span\", {\n        className: className\n      }, icon());\n    }\n\n    return React.createElement(\"span\", {\n      className: Emotion_1.cx(className, Input_module_less_1[\"default\"].useDefaultColor, Input_styles_1[\"default\"].useDefaultColor(this.theme))\n    }, icon);\n  };\n\n  Input.prototype.renderPlaceholder = function () {\n    var placeholder = null;\n\n    if (this.state.polyfillPlaceholder && this.props.placeholder && !this.isMaskVisible && !this.props.value) {\n      placeholder = React.createElement(\"div\", {\n        className: Emotion_1.cx(Input_module_less_1[\"default\"].placeholder, Input_styles_1[\"default\"].placeholder(this.theme)),\n        style: {\n          textAlign: this.props.align || 'inherit'\n        }\n      }, this.props.placeholder);\n    }\n\n    return placeholder;\n  };\n\n  Input.prototype.getSizeClassName = function () {\n    switch (this.props.size) {\n      case 'large':\n        return Input_styles_1[\"default\"].sizeLarge(this.theme);\n\n      case 'medium':\n        return Input_styles_1[\"default\"].sizeMedium(this.theme);\n\n      case 'small':\n      default:\n        return Input_styles_1[\"default\"].sizeSmall(this.theme);\n    }\n  };\n\n  Input.__KONTUR_REACT_UI__ = 'Input';\n  Input.defaultProps = {\n    size: 'small'\n  };\n  return Input;\n}(React.Component);\n\nexports[\"default\"] = Input;","map":{"version":3,"sources":["C:/Users/Sasha/Documents/coursework.front/node_modules/@skbkontur/react-ui/components/Input/Input.js"],"names":["Object","defineProperty","exports","value","tslib_1","require","React","__importStar","identifiers_1","polyfillPlaceholder_1","__importDefault","invariant_1","MaskedInput_1","Emotion_1","Input_module_less_1","Input_styles_1","ThemeConsumer_1","raf_1","Input","_super","__extends","_this","apply","arguments","state","polyfillPlaceholder","blinking","focused","selectAllId","blinkTimeout","input","selectAll","setSelectionRange","length","delaySelectAll","cancelDelayedSelectAll","cancel","cancelBlink","callback","clearTimeout","setState","refInput","element","handleChange","event","fieldIsEmpty","target","props","onChange","handleFocus","selectAllOnFocus","onFocus","handleKeyDown","e","onKeyDown","isDeleteKey","someKeys","isKeyBackspace","isKeyDelete","currentTarget","repeat","handleUnexpectedInput","handleKeyPress","onKeyPress","maxLength","onUnexpectedInput","blink","handleBlur","onBlur","renderPrefix","prefix","createElement","className","theme","renderSuffix","suffix","prototype","componentDidMount","componentWillUnmount","componentWillReceiveProps","nextProps","focus","blur","offsetWidth","window","setTimeout","start","end","Error","document","activeElement","get","_a","mask","alwaysShowMask","Boolean","enumerable","configurable","render","ThemeConsumer","renderMain","_b","onMouseEnter","onMouseLeave","onMouseOver","width","error","warning","leftIcon","rightIcon","borderless","align","type","maskChar","style","size","placeholder","mainInGroup","disabled","formatChars","rest","__rest","_c","labelProps","cx","root","getSizeClassName","inputProps","__assign","textAlign","ref","isMaskVisible","undefined","renderMaskedInput","sideContainer","renderLeftIcon","wrapper","renderPlaceholder","rightContainer","renderRightIcon","renderIcon","icon","Function","useDefaultColor","sizeLarge","sizeMedium","sizeSmall","__KONTUR_REACT_UI__","defaultProps","Component"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = tslib_1.__importStar(require(\"react\"));\nvar identifiers_1 = require(\"../../lib/events/keyboard/identifiers\");\nvar polyfillPlaceholder_1 = tslib_1.__importDefault(require(\"../polyfillPlaceholder\"));\nrequire(\"../ensureOldIEClassName\");\nvar invariant_1 = tslib_1.__importDefault(require(\"invariant\"));\nvar MaskedInput_1 = tslib_1.__importDefault(require(\"../internal/MaskedInput/MaskedInput\"));\nvar Emotion_1 = require(\"../../lib/theming/Emotion\");\nvar Input_module_less_1 = tslib_1.__importDefault(require(\"./Input.module.css\"));\nvar Input_styles_1 = tslib_1.__importDefault(require(\"./Input.styles\"));\nvar ThemeConsumer_1 = require(\"../ThemeConsumer\");\nvar raf_1 = tslib_1.__importDefault(require(\"raf\"));\n/**\r\n                                                      * Интерфес пропсов наследуется от `React.InputHTMLAttributes<HTMLInputElement>`.\r\n                                                      *  Все пропсы кроме перечисленных, `className` и `style` передаются в `<input>`\r\n                                                      */\nvar Input = /** @class */function (_super) {\n  tslib_1.__extends(Input, _super);\n  function Input() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.state = {\n      polyfillPlaceholder: false,\n      blinking: false,\n      focused: false };\n\n    _this.selectAllId = null;\n    _this.blinkTimeout = 0;\n    _this.input = null;\n    /**\r\n                         * @public\r\n                         */\n    _this.selectAll = function () {\n      if (_this.input) {\n        _this.setSelectionRange(0, _this.input.value.length);\n      }\n    };\n    _this.delaySelectAll = function () {return _this.selectAllId = raf_1[\"default\"](_this.selectAll);};\n    _this.cancelDelayedSelectAll = function () {\n      if (_this.selectAllId) {\n        raf_1[\"default\"].cancel(_this.selectAllId);\n        _this.selectAllId = null;\n      }\n    };\n    _this.cancelBlink = function (callback) {\n      if (_this.blinkTimeout) {\n        clearTimeout(_this.blinkTimeout);\n        _this.blinkTimeout = 0;\n        if (_this.state.blinking) {\n          _this.setState({ blinking: false }, callback);\n          return;\n        }\n      }\n      if (callback) {\n        callback();\n      }\n    };\n    _this.refInput = function (element) {\n      if (element instanceof MaskedInput_1[\"default\"]) {\n        _this.input = element.input;\n      } else\n      {\n        _this.input = element;\n      }\n    };\n    _this.handleChange = function (event) {\n      if (polyfillPlaceholder_1[\"default\"]) {\n        var fieldIsEmpty = event.target.value === '';\n        if (_this.state.polyfillPlaceholder !== fieldIsEmpty) {\n          _this.setState({ polyfillPlaceholder: fieldIsEmpty });\n        }\n      }\n      if (_this.props.onChange) {\n        _this.props.onChange(event, event.target.value);\n      }\n    };\n    _this.handleFocus = function (event) {\n      _this.setState({\n        focused: true });\n\n      if (_this.props.selectAllOnFocus) {\n        // https://github.com/facebook/react/issues/7769\n        _this.input ? _this.selectAll() : _this.delaySelectAll();\n      }\n      if (_this.props.onFocus) {\n        _this.props.onFocus(event);\n      }\n    };\n    _this.handleKeyDown = function (e) {\n      if (_this.props.onKeyDown) {\n        _this.props.onKeyDown(e);\n      }\n      var isDeleteKey = identifiers_1.someKeys(identifiers_1.isKeyBackspace, identifiers_1.isKeyDelete)(e);\n      if (!e.currentTarget.value && isDeleteKey && !e.repeat) {\n        _this.handleUnexpectedInput();\n      }\n    };\n    _this.handleKeyPress = function (event) {\n      if (_this.props.onKeyPress) {\n        _this.props.onKeyPress(event);\n      }\n      if (_this.props.maxLength === event.currentTarget.value.length) {\n        _this.handleUnexpectedInput();\n      }\n    };\n    _this.handleUnexpectedInput = function () {\n      if (_this.props.onUnexpectedInput) {\n        _this.props.onUnexpectedInput();\n      } else\n      {\n        _this.blink();\n      }\n    };\n    _this.handleBlur = function (event) {\n      _this.setState({ focused: false });\n      if (_this.props.onBlur) {\n        _this.props.onBlur(event);\n      }\n    };\n    _this.renderPrefix = function () {\n      var prefix = _this.props.prefix;\n      if (!prefix) {\n        return null;\n      }\n      return React.createElement(\"span\", { className: Input_styles_1[\"default\"].prefix(_this.theme) }, prefix);\n    };\n    _this.renderSuffix = function () {\n      var suffix = _this.props.suffix;\n      if (!suffix) {\n        return null;\n      }\n      return React.createElement(\"span\", { className: Input_styles_1[\"default\"].suffix(_this.theme) }, suffix);\n    };\n    return _this;\n  }\n  Input.prototype.componentDidMount = function () {\n    if (polyfillPlaceholder_1[\"default\"]) {\n      this.setState({ polyfillPlaceholder: true });\n    }\n  };\n  Input.prototype.componentWillUnmount = function () {\n    if (this.blinkTimeout) {\n      clearTimeout(this.blinkTimeout);\n    }\n    this.cancelDelayedSelectAll();\n  };\n  Input.prototype.componentWillReceiveProps = function (nextProps) {\n    if (polyfillPlaceholder_1[\"default\"] && !nextProps.value) {\n      this.setState({ polyfillPlaceholder: true });\n    }\n  };\n  /**\r\n      * @public\r\n      */\n  Input.prototype.focus = function () {\n    invariant_1[\"default\"](this.input, 'Cannot call \"focus\" because Input is not mounted');\n    this.input.focus();\n  };\n  /**\r\n      * @public\r\n      */\n  Input.prototype.blur = function () {\n    invariant_1[\"default\"](this.input, 'Cannot call \"blur\" because Input is not mounted');\n    this.input.blur();\n  };\n  /**\r\n      * @public\r\n      */\n  Input.prototype.blink = function () {\n    var _this = this;\n    if (this.blinkTimeout) {\n      this.cancelBlink(function () {\n        // trigger reflow to restart animation\n        // @see https://css-tricks.com/restart-css-animation/#article-header-id-0\n        // tslint:disable-next-line:no-unused-expression\n        void (_this.input && _this.input.offsetWidth);\n        _this.blink();\n      });\n      return;\n    }\n    this.setState({ blinking: true }, function () {\n      _this.blinkTimeout = window.setTimeout(_this.cancelBlink, 150);\n    });\n  };\n  /**\r\n      * @public\r\n      */\n  Input.prototype.setSelectionRange = function (start, end) {\n    if (!this.input) {\n      throw new Error('Cannot call \"setSelectionRange\" on unmounted Input');\n    }\n    if (document.activeElement !== this.input) {\n      this.focus();\n    }\n    this.input.setSelectionRange(start, end);\n  };\n  Object.defineProperty(Input.prototype, \"isMaskVisible\", {\n    get: function get() {\n      var _a = this.props,mask = _a.mask,alwaysShowMask = _a.alwaysShowMask;\n      var focused = this.state.focused;\n      return Boolean(mask && (focused || alwaysShowMask));\n    },\n    enumerable: true,\n    configurable: true });\n\n  Input.prototype.render = function () {\n    var _this = this;\n    return React.createElement(ThemeConsumer_1.ThemeConsumer, null, function (theme) {\n      _this.theme = theme;\n      return _this.renderMain();\n    });\n  };\n  Input.prototype.renderMain = function () {\n    var _a;\n    var _b = this.props,onMouseEnter = _b.onMouseEnter,onMouseLeave = _b.onMouseLeave,onMouseOver = _b.onMouseOver,onKeyDown = _b.onKeyDown,onKeyPress = _b.onKeyPress,width = _b.width,error = _b.error,warning = _b.warning,leftIcon = _b.leftIcon,rightIcon = _b.rightIcon,borderless = _b.borderless,value = _b.value,align = _b.align,type = _b.type,mask = _b.mask,maskChar = _b.maskChar,alwaysShowMask = _b.alwaysShowMask,style = _b.style,className = _b.className,size = _b.size,placeholder = _b.placeholder,mainInGroup = _b.mainInGroup,selectAllOnFocus = _b.selectAllOnFocus,disabled = _b.disabled,onUnexpectedInput = _b.onUnexpectedInput,prefix = _b.prefix,suffix = _b.suffix,formatChars = _b.formatChars,rest = tslib_1.__rest(_b, [\"onMouseEnter\", \"onMouseLeave\", \"onMouseOver\", \"onKeyDown\", \"onKeyPress\", \"width\", \"error\", \"warning\", \"leftIcon\", \"rightIcon\", \"borderless\", \"value\", \"align\", \"type\", \"mask\", \"maskChar\", \"alwaysShowMask\", \"style\", \"className\", \"size\", \"placeholder\", \"mainInGroup\", \"selectAllOnFocus\", \"disabled\", \"onUnexpectedInput\", \"prefix\", \"suffix\", \"formatChars\"]);\n    var _c = this.state,blinking = _c.blinking,focused = _c.focused;\n    var labelProps = {\n      className: Emotion_1.cx(Input_module_less_1[\"default\"].root, Input_styles_1[\"default\"].root(this.theme), this.getSizeClassName(), (_a = {},\n      _a[Input_module_less_1[\"default\"].focus] = focused,\n      _a[Input_module_less_1[\"default\"].disabled] = !!disabled,\n      _a[Input_module_less_1[\"default\"].error] = !!error,\n      _a[Input_module_less_1[\"default\"].warning] = !!warning,\n      _a[Input_module_less_1[\"default\"].borderless] = !!borderless,\n      _a[Input_styles_1[\"default\"].focus(this.theme)] = focused,\n      _a[Input_styles_1[\"default\"].blink(this.theme)] = !!blinking,\n      _a[Input_styles_1[\"default\"].warning(this.theme)] = !!warning,\n      _a[Input_styles_1[\"default\"].error(this.theme)] = !!error,\n      _a[Input_styles_1[\"default\"].disabled(this.theme)] = !!disabled,\n      _a)),\n      style: { width: width },\n      onMouseEnter: onMouseEnter,\n      onMouseLeave: onMouseLeave,\n      onMouseOver: onMouseOver };\n\n    var inputProps = tslib_1.__assign({}, rest, { className: Emotion_1.cx(Input_module_less_1[\"default\"].input, Input_styles_1[\"default\"].input(this.theme)), value: value, onChange: this.handleChange, onFocus: this.handleFocus, onKeyDown: this.handleKeyDown, onKeyPress: this.handleKeyPress, onBlur: this.handleBlur, style: { textAlign: align }, ref: this.refInput, type: 'text', placeholder: !this.isMaskVisible && !polyfillPlaceholder_1[\"default\"] ? placeholder : undefined, disabled: disabled });\n    if (type === 'password') {\n      inputProps.type = type;\n    }\n    var input = !!mask ? this.renderMaskedInput(inputProps, mask) : React.createElement('input', inputProps);\n    return React.createElement(\"label\", tslib_1.__assign({}, labelProps),\n    React.createElement(\"span\", { className: Input_module_less_1[\"default\"].sideContainer },\n    this.renderLeftIcon(),\n    this.renderPrefix()),\n    React.createElement(\"span\", { className: Input_module_less_1[\"default\"].wrapper },\n    input,\n    this.renderPlaceholder()),\n    React.createElement(\"span\", { className: Emotion_1.cx(Input_module_less_1[\"default\"].sideContainer, Input_module_less_1[\"default\"].rightContainer) },\n    this.renderSuffix(),\n    this.renderRightIcon()));\n  };\n  Input.prototype.renderMaskedInput = function (inputProps, mask) {\n    return React.createElement(MaskedInput_1[\"default\"], tslib_1.__assign({}, inputProps, { mask: mask, maskChar: this.props.maskChar === undefined ? '_' : this.props.maskChar, alwaysShowMask: this.props.alwaysShowMask, onUnexpectedInput: this.handleUnexpectedInput, formatChars: this.props.formatChars }));\n  };\n  Input.prototype.renderLeftIcon = function () {\n    return this.renderIcon(this.props.leftIcon, Input_module_less_1[\"default\"].leftIcon);\n  };\n  Input.prototype.renderRightIcon = function () {\n    return this.renderIcon(this.props.rightIcon, Input_module_less_1[\"default\"].rightIcon);\n  };\n  Input.prototype.renderIcon = function (icon, className) {\n    if (!icon) {\n      return null;\n    }\n    if (icon instanceof Function) {\n      return React.createElement(\"span\", { className: className }, icon());\n    }\n    return React.createElement(\"span\", { className: Emotion_1.cx(className, Input_module_less_1[\"default\"].useDefaultColor, Input_styles_1[\"default\"].useDefaultColor(this.theme)) }, icon);\n  };\n  Input.prototype.renderPlaceholder = function () {\n    var placeholder = null;\n    if (this.state.polyfillPlaceholder && this.props.placeholder && !this.isMaskVisible && !this.props.value) {\n      placeholder = React.createElement(\"div\", { className: Emotion_1.cx(Input_module_less_1[\"default\"].placeholder, Input_styles_1[\"default\"].placeholder(this.theme)), style: { textAlign: this.props.align || 'inherit' } }, this.props.placeholder);\n    }\n    return placeholder;\n  };\n  Input.prototype.getSizeClassName = function () {\n    switch (this.props.size) {\n      case 'large':\n        return Input_styles_1[\"default\"].sizeLarge(this.theme);\n      case 'medium':\n        return Input_styles_1[\"default\"].sizeMedium(this.theme);\n      case 'small':\n      default:\n        return Input_styles_1[\"default\"].sizeSmall(this.theme);}\n\n  };\n  Input.__KONTUR_REACT_UI__ = 'Input';\n  Input.defaultProps = {\n    size: 'small' };\n\n  return Input;\n}(React.Component);\nexports[\"default\"] = Input;"]},"metadata":{},"sourceType":"script"}