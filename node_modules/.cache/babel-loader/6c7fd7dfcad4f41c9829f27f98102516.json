{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar React = tslib_1.__importStar(require(\"react\"));\n\nvar RenderContainer_1 = tslib_1.__importDefault(require(\"../RenderContainer\"));\n\nvar react_transition_group_1 = require(\"react-transition-group\");\n\nvar ToastView_1 = tslib_1.__importDefault(require(\"./ToastView\"));\n\nvar ToastStatic_1 = tslib_1.__importDefault(require(\"./ToastStatic\"));\n\nrequire(\"./Toast.module.css\");\n/**\r\n                                * Toast manages notifications\r\n                                * method `push` is sending notification,\r\n                                * then automatically hides it after 3 or 7 seconds,\r\n                                * depending on if this notification contains action or not.\r\n                                *\r\n                                * Can be used like `Toast.push('message')` or\r\n                                * `Toast.push('message', {label: 'Cancel', handler: cancelHandler})`\r\n                                */\n\n\nvar Toast =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Toast, _super);\n\n  function Toast(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this._timeout = null;\n    /**\r\n                            * @public\r\n                            */\n\n    _this.close = function () {\n      safelyCall(_this.props.onClose, _this.state.notification, _this.state.action);\n\n      _this.setState({\n        notification: null,\n        action: null\n      });\n    };\n\n    _this._clearTimer = function () {\n      if (_this._timeout) {\n        clearTimeout(_this._timeout);\n        _this._timeout = null;\n      }\n    };\n\n    _this._setTimer = function () {\n      _this._clearTimer();\n\n      var timeOut = _this.state.action ? 7 : 3;\n      _this._timeout = window.setTimeout(_this.close, timeOut * 1000);\n    };\n\n    _this._refToast = function (element) {\n      _this._toast = element;\n    };\n\n    _this.state = {\n      notification: null,\n      action: null,\n      id: 0\n    };\n    return _this;\n  }\n\n  Toast.push = function (notification, action) {\n    ToastStatic_1[\"default\"].push(notification, action);\n  };\n\n  Toast.close = function () {\n    ToastStatic_1[\"default\"].close();\n  };\n\n  Toast.prototype.componentWillUnmount = function () {\n    this._clearTimer();\n  };\n\n  Toast.prototype.render = function () {\n    return React.createElement(RenderContainer_1[\"default\"], null, React.createElement(react_transition_group_1.TransitionGroup, null, this._renderToast()));\n  };\n  /**\r\n      * Показывает тост с `notification` в качестве сообщения.\r\n      *\r\n      * `action` опциональный параметр формата `{ label: string, handler: function }` добавляет кнопку в виде ссылки при клике на которую вызывается переданный handler\r\n      * @public\r\n      * @param notification\r\n      * @param action\r\n      */\n\n\n  Toast.prototype.push = function (notification, action) {\n    if (this.state.notification) {\n      this.close();\n    }\n\n    safelyCall(this.props.onPush, notification, action);\n    this.setState(function (_a) {\n      var id = _a.id;\n      return {\n        notification: notification,\n        action: action,\n        id: id + 1\n      };\n    }, this._setTimer);\n  };\n\n  Toast.prototype._renderToast = function () {\n    var _a = this.state,\n        notification = _a.notification,\n        action = _a.action,\n        id = _a.id;\n\n    if (!notification) {\n      return null;\n    }\n\n    var toastProps = {\n      onMouseEnter: this._clearTimer,\n      onMouseLeave: this._setTimer,\n      onClose: this.close,\n      children: notification,\n      action: action\n    };\n    return React.createElement(react_transition_group_1.CSSTransition, {\n      key: id,\n      classNames: \"slide-and-fade\",\n      timeout: {\n        enter: 200,\n        exit: 150\n      }\n    }, React.createElement(ToastView_1[\"default\"], tslib_1.__assign({\n      ref: this._refToast\n    }, toastProps)));\n  };\n\n  Toast.__KONTUR_REACT_UI__ = 'Toast';\n  return Toast;\n}(React.Component);\n\nexports[\"default\"] = Toast;\n\nfunction safelyCall(fn) {\n  var args = [];\n\n  for (var _i = 1; _i < arguments.length; _i++) {\n    args[_i - 1] = arguments[_i];\n  }\n\n  if (fn) {\n    fn.apply(void 0, args);\n  }\n}","map":{"version":3,"sources":["/home/aleksandr/hwproj.courseworks.front/node_modules/@skbkontur/react-ui/components/Toast/Toast.js"],"names":["Object","defineProperty","exports","value","tslib_1","require","React","__importStar","RenderContainer_1","__importDefault","react_transition_group_1","ToastView_1","ToastStatic_1","Toast","_super","__extends","props","_this","call","_timeout","close","safelyCall","onClose","state","notification","action","setState","_clearTimer","clearTimeout","_setTimer","timeOut","window","setTimeout","_refToast","element","_toast","id","push","prototype","componentWillUnmount","render","createElement","TransitionGroup","_renderToast","onPush","_a","toastProps","onMouseEnter","onMouseLeave","children","CSSTransition","key","classNames","timeout","enter","exit","__assign","ref","__KONTUR_REACT_UI__","Component","fn","args","_i","arguments","length","apply"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = tslib_1.__importStar(require(\"react\"));\nvar RenderContainer_1 = tslib_1.__importDefault(require(\"../RenderContainer\"));\nvar react_transition_group_1 = require(\"react-transition-group\");\nvar ToastView_1 = tslib_1.__importDefault(require(\"./ToastView\"));\nvar ToastStatic_1 = tslib_1.__importDefault(require(\"./ToastStatic\"));\nrequire(\"./Toast.module.css\");\n/**\r\n                                * Toast manages notifications\r\n                                * method `push` is sending notification,\r\n                                * then automatically hides it after 3 or 7 seconds,\r\n                                * depending on if this notification contains action or not.\r\n                                *\r\n                                * Can be used like `Toast.push('message')` or\r\n                                * `Toast.push('message', {label: 'Cancel', handler: cancelHandler})`\r\n                                */\nvar Toast = /** @class */function (_super) {\n  tslib_1.__extends(Toast, _super);\n  function Toast(props) {\n    var _this = _super.call(this, props) || this;\n    _this._timeout = null;\n    /**\r\n                            * @public\r\n                            */\n    _this.close = function () {\n      safelyCall(_this.props.onClose, _this.state.notification, _this.state.action);\n      _this.setState({ notification: null, action: null });\n    };\n    _this._clearTimer = function () {\n      if (_this._timeout) {\n        clearTimeout(_this._timeout);\n        _this._timeout = null;\n      }\n    };\n    _this._setTimer = function () {\n      _this._clearTimer();\n      var timeOut = _this.state.action ? 7 : 3;\n      _this._timeout = window.setTimeout(_this.close, timeOut * 1000);\n    };\n    _this._refToast = function (element) {\n      _this._toast = element;\n    };\n    _this.state = {\n      notification: null,\n      action: null,\n      id: 0 };\n\n    return _this;\n  }\n  Toast.push = function (notification, action) {\n    ToastStatic_1[\"default\"].push(notification, action);\n  };\n  Toast.close = function () {\n    ToastStatic_1[\"default\"].close();\n  };\n  Toast.prototype.componentWillUnmount = function () {\n    this._clearTimer();\n  };\n  Toast.prototype.render = function () {\n    return React.createElement(RenderContainer_1[\"default\"], null,\n    React.createElement(react_transition_group_1.TransitionGroup, null, this._renderToast()));\n  };\n  /**\r\n      * Показывает тост с `notification` в качестве сообщения.\r\n      *\r\n      * `action` опциональный параметр формата `{ label: string, handler: function }` добавляет кнопку в виде ссылки при клике на которую вызывается переданный handler\r\n      * @public\r\n      * @param notification\r\n      * @param action\r\n      */\n  Toast.prototype.push = function (notification, action) {\n    if (this.state.notification) {\n      this.close();\n    }\n    safelyCall(this.props.onPush, notification, action);\n    this.setState(function (_a) {\n      var id = _a.id;\n      return { notification: notification, action: action, id: id + 1 };\n    }, this._setTimer);\n  };\n  Toast.prototype._renderToast = function () {\n    var _a = this.state,notification = _a.notification,action = _a.action,id = _a.id;\n    if (!notification) {\n      return null;\n    }\n    var toastProps = {\n      onMouseEnter: this._clearTimer,\n      onMouseLeave: this._setTimer,\n      onClose: this.close,\n      children: notification,\n      action: action };\n\n    return React.createElement(react_transition_group_1.CSSTransition, { key: id, classNames: \"slide-and-fade\", timeout: {\n        enter: 200,\n        exit: 150 } },\n\n    React.createElement(ToastView_1[\"default\"], tslib_1.__assign({ ref: this._refToast }, toastProps)));\n  };\n  Toast.__KONTUR_REACT_UI__ = 'Toast';\n  return Toast;\n}(React.Component);\nexports[\"default\"] = Toast;\nfunction safelyCall(fn) {\n  var args = [];\n  for (var _i = 1; _i < arguments.length; _i++) {\n    args[_i - 1] = arguments[_i];\n  }\n  if (fn) {\n    fn.apply(void 0, args);\n  }\n}"]},"metadata":{},"sourceType":"script"}