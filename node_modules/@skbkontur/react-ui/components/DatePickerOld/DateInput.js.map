{"version":3,"sources":["DateInput.js"],"names":["DateBlocks","index","start","end","INPUT_PASS_PROPS","autoFocus","disabled","warning","error","size","placeholder","onInput","onKeyDown","onKeyPress","onKeyUp","onMouseEnter","onMouseLeave","onMouseOver","isIE8","ieVerison","DateInput","cursorPosition","_input","setSelectionRange","input","trim","props","value","_selectBlock","_getSelectedBlock","getInputSelection","event","_focused","_selectCurrentBlock","target","_checkIfBadKeyDownEvent","_isVerticalArrows","preventDefault","_handleVerticalKey","_isHorizontalArrows","_moveSelectionBlock","_isSeparatorKey","_handleSeparatorKey","key","onSubmit","text","clipboardData","getData","re","execData","exec","day","month","year","nextValue","filter","Boolean","map","pad2","join","onChange","setTimeout","AllowedKeys","includes","currentTarget","currentSelectedBlock","step","nextSelectedBlockIndex","Math","max","min","replace","length","isBackspace","dateValue","isValid","test","selectedBlock","split","Number","date","Date","UTC","TypeError","newDay","getUTCDate","newMonth","getUTCMonth","newYear","getUTCFullYear","newDate","onFocus","e","onBlur","ref","_icon","render","maskChar","withMask","_handleBlur","_handleFocus","_handleChange","_handleClick","_handleKeyDown","_handleInputPaste","getInputRef","componentDidMount","Component","PropTypes","func","opened","bool","isRequired","string","oneOf","v","toString","padStart","str","el","selectionStart","selectionEnd","document","selection","range","createRange","parentElement","len","normalizedValue","textInputRange","createTextRange","moveToBookmark","getBookmark","endRange","collapse","compareEndPoints","moveStart","slice","moveEnd"],"mappings":"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","sourcesContent":["// @flow\r\n\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Input from '../Input';\r\n\r\nimport filterProps from '../filterProps';\r\nimport { ieVerison } from '../ensureOldIEClassName';\r\n\r\nconst DateBlocks = [{ index: 0, start: 0, end: 2 }, { index: 1, start: 3, end: 5 }, { index: 2, start: 6, end: 10 }];\r\n\r\nconst INPUT_PASS_PROPS = {\r\n  autoFocus: true,\r\n  disabled: true,\r\n  warning: true,\r\n  error: true,\r\n  size: true,\r\n  placeholder: true,\r\n\r\n  onInput: true,\r\n  onKeyDown: true,\r\n  onKeyPress: true,\r\n  onKeyUp: true,\r\n  onMouseEnter: true,\r\n  onMouseLeave: true,\r\n  onMouseOver: true,\r\n};\r\n\r\ntype Props = {\r\n  autoFocus?: boolean,\r\n  error?: boolean,\r\n  warning?: boolean,\r\n  disabled?: boolean,\r\n  getInputRef?: (ref: Input) => void,\r\n  onBlur?: (e: SyntheticFocusEvent<HTMLElement>) => void,\r\n  onSubmit?: () => void,\r\n  onChange: (value: string) => void,\r\n  onFocus?: () => void,\r\n  opened: boolean,\r\n  placeholder?: string,\r\n  size: 'small' | 'medium' | 'large',\r\n  value: string,\r\n  onInput: *,\r\n  onKeyDown: *,\r\n  onKeyPress: *,\r\n  onKeyUp: *,\r\n  onMouseEnter: *,\r\n  onMouseLeave: *,\r\n  onMouseOver: *,\r\n};\r\n\r\nconst isIE8 = ieVerison === 8;\r\n\r\nexport default class DateInput extends Component<Props> {\r\n  static __KONTUR_REACT_UI__ = 'DateInputOld';\r\n\r\n  static propTypes = {\r\n    getInputRef: PropTypes.func,\r\n    opened: PropTypes.bool.isRequired,\r\n    placeholder: PropTypes.string,\r\n    size: PropTypes.oneOf(['small', 'medium', 'large']),\r\n    value: PropTypes.string.isRequired,\r\n    onBlur: PropTypes.func,\r\n    onChange: PropTypes.func.isRequired,\r\n    onFocus: PropTypes.func,\r\n  };\r\n\r\n  _input: ?Input;\r\n  _focused: boolean = false;\r\n  _icon: ?HTMLElement;\r\n  _cursorPosition: number = 0;\r\n\r\n  render() {\r\n    const maskChar = this.props.withMask ? '_' : null;\r\n    return (\r\n      <Input\r\n        {...filterProps(this.props, INPUT_PASS_PROPS)}\r\n        mask=\"99.99.9999\"\r\n        maskChar={maskChar}\r\n        maxLength={12}\r\n        value={this.props.value}\r\n        width=\"100%\"\r\n        onBlur={this._handleBlur}\r\n        onFocus={this._handleFocus}\r\n        onChange={this._handleChange}\r\n        onMouseUp={this._handleClick}\r\n        onKeyDown={this._handleKeyDown}\r\n        onPaste={this._handleInputPaste}\r\n        ref={this.getInputRef}\r\n      />\r\n    );\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.getInputRef && this._input) {\r\n      this.props.getInputRef(this._input);\r\n    }\r\n  }\r\n\r\n  _setCursorPosition = cursorPosition => {\r\n    this._input && this._input.setSelectionRange(cursorPosition, cursorPosition);\r\n  };\r\n\r\n  _selectCurrentBlock = (input: HTMLInputElement) => {\r\n    if (trim(this.props.value) === '') {\r\n      this._selectBlock(this._getSelectedBlock(0));\r\n      return;\r\n    }\r\n    const { start, end } = getInputSelection(input);\r\n    if (start !== end) {\r\n      return;\r\n    }\r\n    this._selectBlock(this._getSelectedBlock(start));\r\n  };\r\n\r\n  _handleClick = (event: SyntheticMouseEvent<HTMLInputElement>) => {\r\n    if (this._focused) {\r\n      // $FlowIgnore\r\n      this._selectCurrentBlock(event.target);\r\n    }\r\n  };\r\n\r\n  _handleKeyDown = (event: SyntheticKeyboardEvent<HTMLInputElement>) => {\r\n    if (this._checkIfBadKeyDownEvent(event)) {\r\n      return;\r\n    }\r\n    if (this._isVerticalArrows(event)) {\r\n      event.preventDefault();\r\n      this._handleVerticalKey(event);\r\n    }\r\n    if (!isIE8 && this._isHorizontalArrows(event)) {\r\n      event.preventDefault();\r\n      this._moveSelectionBlock(event);\r\n    }\r\n    if (this._isSeparatorKey(event)) {\r\n      event.preventDefault();\r\n      this._handleSeparatorKey(event);\r\n    }\r\n    if (event.key === 'Enter') {\r\n      event.preventDefault();\r\n      this.props.onSubmit && this.props.onSubmit();\r\n    }\r\n  };\r\n\r\n  _handleInputPaste = (event: SyntheticClipboardEvent<HTMLInputElement>) => {\r\n    const text = event.clipboardData.getData('text').trim();\r\n    const re = /([\\d\\_]{1,2}).([\\d\\_]{1,2}).([\\d\\_]{4})/;\r\n    const execData = re.exec(text);\r\n    if (!execData) {\r\n      return;\r\n    }\r\n    const [, day, month, year] = execData;\r\n    const nextValue = [day, month, year]\r\n      .filter(Boolean)\r\n      .map(pad2)\r\n      .join('.');\r\n\r\n    if (this.props.onChange) {\r\n      this.props.onChange(nextValue);\r\n    }\r\n    setTimeout(() => {\r\n      this._input && this._input.setSelectionRange(0, 12);\r\n    }, 100);\r\n  };\r\n\r\n  _checkIfBadKeyDownEvent = (event: SyntheticKeyboardEvent<HTMLInputElement>) => {\r\n    const AllowedKeys = ['Enter', 'ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', '.', ',', ' '];\r\n    return !AllowedKeys.includes(event.key);\r\n  };\r\n\r\n  _isVerticalArrows = (event: SyntheticKeyboardEvent<HTMLInputElement>) => {\r\n    return event.key === 'ArrowUp' || event.key === 'ArrowDown';\r\n  };\r\n\r\n  _isHorizontalArrows = (event: SyntheticKeyboardEvent<HTMLInputElement>) => {\r\n    return event.key === 'ArrowLeft' || event.key === 'ArrowRight';\r\n  };\r\n\r\n  _isSeparatorKey = (event: SyntheticKeyboardEvent<HTMLInputElement>) => {\r\n    return [' ', ',', '.'].includes(event.key);\r\n  };\r\n\r\n  _moveSelectionBlock = event => {\r\n    const { start } = getInputSelection(event.currentTarget);\r\n    const currentSelectedBlock = this._getSelectedBlock(start);\r\n    const step = event.key === 'ArrowLeft' ? -1 : 1;\r\n    const nextSelectedBlockIndex = Math.max(Math.min(currentSelectedBlock.index + step, 2), 0);\r\n    this._selectBlock(DateBlocks[nextSelectedBlockIndex]);\r\n  };\r\n\r\n  _selectBlock = ({ index, start, end }) => {\r\n    setTimeout(() => {\r\n      this._input && this._input.setSelectionRange(start, end);\r\n    }, 10);\r\n  };\r\n\r\n  _handleSeparatorKey = event => {\r\n    const re = /([\\d\\_]{0,2}).?([\\d\\_]{0,2}).?([\\d\\_]{0,4})/;\r\n    const { start } = getInputSelection(event.currentTarget);\r\n    if (start !== 1 && start !== 4) {\r\n      return;\r\n    }\r\n    const [, day = '', month = '', year = ''] = re.exec(this.props.value.replace('_', ''));\r\n\r\n    let nextValue = [day, month, year]\r\n      .filter(Boolean)\r\n      .map(pad2)\r\n      .join('.');\r\n\r\n    if (nextValue.length < 7) {\r\n      nextValue += '.';\r\n    }\r\n\r\n    if (this.props.onChange) {\r\n      this.props.onChange(nextValue);\r\n    }\r\n    this._moveSelectionBlock(event);\r\n  };\r\n\r\n  _getSelectedBlock = cursorPosition => {\r\n    return cursorPosition < 3 ? DateBlocks[0] : cursorPosition < 6 ? DateBlocks[1] : DateBlocks[2];\r\n  };\r\n\r\n  _handleChange = (event: SyntheticInputEvent<HTMLInputElement>, value: string) => {\r\n    const isBackspace = trim(this.props.value).length >= trim(value).length;\r\n\r\n    this.props.onChange(value);\r\n\r\n    const { currentTarget } = event;\r\n    if (!isBackspace && !isIE8) {\r\n      setTimeout(() => {\r\n        const start = getInputSelection(currentTarget).start;\r\n        if (start === 3 || start === 6) {\r\n          this._selectBlock(this._getSelectedBlock(start));\r\n        }\r\n      }, 100);\r\n    }\r\n  };\r\n\r\n  _handleVerticalKey = (event: SyntheticKeyboardEvent<HTMLInputElement>) => {\r\n    event.preventDefault();\r\n\r\n    const dateValue = event.currentTarget.value;\r\n\r\n    const isValid = /\\d{2}.\\d{2}.\\d{4}/.test(dateValue);\r\n    if (!isValid) {\r\n      return;\r\n    }\r\n\r\n    const { start } = getInputSelection(event.currentTarget);\r\n    const selectedBlock = this._getSelectedBlock(start);\r\n\r\n    let step = 0;\r\n    if (event.key === 'ArrowUp') {\r\n      step = 1;\r\n    }\r\n    if (event.key === 'ArrowDown') {\r\n      step = -1;\r\n    }\r\n\r\n    let [day, month, year] = dateValue.split('.');\r\n    day = Number(day);\r\n    month = Number(month) - 1;\r\n    year = Number(year);\r\n\r\n    let date;\r\n    switch (selectedBlock.index) {\r\n      case 0:\r\n        date = new Date(Date.UTC(year, month, day + step));\r\n        break;\r\n      case 1:\r\n        date = new Date(Date.UTC(year, month + step, day));\r\n        break;\r\n      case 2:\r\n        date = new Date(Date.UTC(year + step, month, day));\r\n        break;\r\n      default:\r\n        throw new TypeError('Unexpected block index ' + selectedBlock.index);\r\n    }\r\n\r\n    const newDay = date.getUTCDate();\r\n    const newMonth = date.getUTCMonth() + 1;\r\n    const newYear = date.getUTCFullYear();\r\n    const newDate = [newDay, newMonth, newYear]\r\n      .filter(Boolean)\r\n      .map(pad2)\r\n      .join('.');\r\n\r\n    this.props.onChange(newDate);\r\n    this._selectBlock(selectedBlock);\r\n  };\r\n\r\n  _handleFocus = event => {\r\n    this._focused = true;\r\n    if (this.props.onFocus) {\r\n      this.props.onFocus();\r\n    }\r\n  };\r\n\r\n  _handleBlur = e => {\r\n    this._focused = false;\r\n    if (this.props.onBlur) {\r\n      this.props.onBlur(e);\r\n    }\r\n  };\r\n\r\n  getInputRef = (ref: ?Input) => {\r\n    this._input = ref;\r\n  };\r\n\r\n  getIconRef = (ref: ?HTMLElement) => {\r\n    this._icon = ref;\r\n  };\r\n}\r\n\r\nconst pad2 = v => v.toString().padStart(2, '0');\r\n\r\nfunction trim(str) {\r\n  return str.replace(/[\\_\\.]/g, '');\r\n}\r\n\r\n/**\r\n * imported from http://stackoverflow.com/questions/4928586/ddg#4931963\r\n */\r\nfunction getInputSelection(el) {\r\n  let start = 0;\r\n  let end = 0;\r\n\r\n  if (typeof el.selectionStart === 'number' && typeof el.selectionEnd === 'number') {\r\n    start = el.selectionStart;\r\n    end = el.selectionEnd;\r\n  } else if (document.selection) {\r\n    // eslint-disable-next-line flowtype/no-weak-types\r\n    const range = (document: any).selection.createRange();\r\n\r\n    if (range && range.parentElement() === el) {\r\n      const len = el.value.length;\r\n      const normalizedValue = el.value.replace(/\\r\\n/g, '\\n');\r\n\r\n      // Create a working TextRange that lives only in the input\r\n      const textInputRange = el.createTextRange();\r\n      textInputRange.moveToBookmark(range.getBookmark());\r\n\r\n      // Check if the start and end of the selection are at the very end\r\n      // of the input, since moveStart/moveEnd doesn't return what we want\r\n      // in those cases\r\n      const endRange = el.createTextRange();\r\n      endRange.collapse(false);\r\n\r\n      if (textInputRange.compareEndPoints('StartToEnd', endRange) > -1) {\r\n        start = end = len;\r\n      } else {\r\n        start = -textInputRange.moveStart('character', -len);\r\n        start += normalizedValue.slice(0, start).split('\\n').length - 1;\r\n\r\n        if (textInputRange.compareEndPoints('EndToEnd', endRange) > -1) {\r\n          end = len;\r\n        } else {\r\n          end = -textInputRange.moveEnd('character', -len);\r\n          end += normalizedValue.slice(0, end).split('\\n').length - 1;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    start,\r\n    end,\r\n  };\r\n}\r\n"]}