{"version":3,"sources":["CalendarCell.js"],"names":["DAY_WIDTH","DAY_HEIGHT","FIRST_CELL_OFFSET","HOLIDAYS_OFFSET","CalendarCell","props","event","button","onPick","date","_today","Date","render","weekIdx","offset","value","day","getDay","isHolyday","getUTCDay","y","x","width","style","left","top","height","cellClass","styles","cell","cellToday","_isToday","cellCurrent","isSameDate","grey","getUTCMonth","cellHoly","cellInner","activate","deactivate","pick","getUTCDate","React","Component","a","b","getUTCFullYear"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport classNames from 'classnames';\r\nimport styles from './Calendar.module.less';\r\n\r\nconst DAY_WIDTH = 26;\r\nconst DAY_HEIGHT = 31;\r\nconst FIRST_CELL_OFFSET = 6;\r\nconst HOLIDAYS_OFFSET = 3;\r\n\r\nexport default class CalendarCell extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this._today = new Date();\r\n  }\r\n\r\n  render() {\r\n    const { date, weekIdx, offset, value } = this.props;\r\n\r\n    const day = getDay(date);\r\n    const isHolyday = date.getUTCDay() === 0 || date.getUTCDay() === 6;\r\n\r\n    const y = weekIdx * DAY_HEIGHT - offset;\r\n    let x = day * DAY_WIDTH + FIRST_CELL_OFFSET;\r\n    let width = DAY_WIDTH;\r\n    if (day === 0) {\r\n      x = 0;\r\n      width += FIRST_CELL_OFFSET;\r\n    }\r\n    if (day === 5) {\r\n      width += HOLIDAYS_OFFSET;\r\n    }\r\n    if (day === 6) {\r\n      x += HOLIDAYS_OFFSET;\r\n    }\r\n    const style = { left: x, top: y, width, height: DAY_HEIGHT };\r\n\r\n    const cellClass = classNames({\r\n      [styles.cell]: true,\r\n      [styles.cellToday]: this._isToday(date),\r\n      [styles.cellCurrent]: isSameDate(value, date),\r\n      [styles.grey]: date.getUTCMonth() % 2,\r\n      [styles.cellHoly]: isHolyday,\r\n    });\r\n\r\n    return (\r\n      <span className={cellClass} style={style}>\r\n        <div\r\n          className={styles.cellInner}\r\n          onMouseOver={this.activate}\r\n          onMouseLeave={this.deactivate}\r\n          onClick={this.pick}\r\n        >\r\n          {date.getUTCDate()}\r\n        </div>\r\n      </span>\r\n    );\r\n  }\r\n\r\n  _isToday(date) {\r\n    return isSameDate(date, this._today);\r\n  }\r\n\r\n  pick = event => {\r\n    if (event.button !== 0) {\r\n      return;\r\n    }\r\n\r\n    if (this.props.onPick) {\r\n      this.props.onPick(this.props.date);\r\n    }\r\n  };\r\n}\r\n\r\nfunction isSameDate(a, b) {\r\n  return (\r\n    a &&\r\n    b &&\r\n    a.getUTCFullYear() === b.getUTCFullYear() &&\r\n    a.getUTCMonth() === b.getUTCMonth() &&\r\n    a.getUTCDate() === b.getUTCDate()\r\n  );\r\n}\r\n\r\nfunction getDay(date) {\r\n  const day = date.getUTCDay();\r\n  return day ? day - 1 : 6;\r\n}\r\n"]}