"use strict";exports.__esModule = true;exports["default"] = void 0;

var React = _interopRequireWildcard(require("react"));
var _propTypes = _interopRequireDefault(require("prop-types"));
var _Edit = _interopRequireDefault(require("@skbkontur/react-icons/Edit"));
var _warning = _interopRequireDefault(require("warning"));
var _AddressModal = _interopRequireDefault(require("./AddressModal"));
var _Colors = _interopRequireDefault(require("../../lib/Colors"));
var _Link = _interopRequireDefault(require("../Link"));

var util = _interopRequireWildcard(require("./util"));function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { "default": obj };}function _getRequireWildcardCache() {if (typeof WeakMap !== "function") return null;var cache = new WeakMap();_getRequireWildcardCache = function _getRequireWildcardCache() {return cache;};return cache;}function _interopRequireWildcard(obj) {if (obj && obj.__esModule) {return obj;}if (obj === null || typeof obj !== "object" && typeof obj !== "function") {return { "default": obj };}var cache = _getRequireWildcardCache();if (cache && cache.has(obj)) {return cache.get(obj);}var newObj = {};var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;for (var key in obj) {if (Object.prototype.hasOwnProperty.call(obj, key)) {var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;if (desc && (desc.get || desc.set)) {Object.defineProperty(newObj, key, desc);} else {newObj[key] = obj[key];}}}newObj["default"] = obj;if (cache) {cache.set(obj, newObj);}return newObj;}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _inheritsLoose(subClass, superClass) {subClass.prototype = Object.create(superClass.prototype);subClass.prototype.constructor = subClass;subClass.__proto__ = superClass;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}













/**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @deprecated Компонент устарел и, вероятно, будет удален в версии 2.0.0. Рассмотрите возможность перехода на [Fias](#/Components/Fias).
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */var
Kladr = /*#__PURE__*/function (_React$Component) {_inheritsLoose(Kladr, _React$Component);










  function Kladr(props) {var _this;
    _this = _React$Component.call(this, props) || this;_defineProperty(_assertThisInitialized(_this), "_handleOpen",
































































    function () {
      _this.setState({ opened: true });
    });_defineProperty(_assertThisInitialized(_this), "_handleChange",

    function (value) {
      var onChange = _this.props.onChange;
      onChange && onChange(null, value);
    });_defineProperty(_assertThisInitialized(_this), "_handleClose",

    function () {
      _this.setState({ opened: false });
    });_this.state = { opened: false };(0, _warning["default"])(false, 'Kladr is deprecated and will be removed in v2.0.0. Please, consider to move on Fias instead.');return _this;}var _proto = Kladr.prototype;_proto.render = function render() {var value = this.props.value || {};var empty = isEmpty(value);var change = empty ? 'Заполнить адрес' : 'Изменить адрес';var validation = null;if (this.props.error) {validation = React.createElement("div", { style: { color: _Colors["default"].ERROR, marginBottom: 5 } }, this.props.error);} else if (this.props.warning) {validation = React.createElement("div", { style: { color: _Colors["default"].WARNING, marginBottom: 5 } }, this.props.warning);}return React.createElement("span", null, !empty && React.createElement("div", { style: { marginBottom: 5 } }, this._renderAddress(value.address)), validation, React.createElement(_Link["default"], { icon: React.createElement(_Edit["default"], null), onClick: this._handleOpen }, change), this.state.opened && this._renderModal());};_proto._renderAddress = function _renderAddress(address) {if (!address) {return null;}var place = function place(_place) {return _place && util.placeName(_place);};return [address.index, place(address.region), place(address.district), place(address.city), place(address.settlement), place(address.street), address.house && "\u0434\u043E\u043C " + address.house, address.building && "\u043A\u043E\u0440\u043F\u0443\u0441 " + address.building, address.room && "\u043A\u0432\u0430\u0440\u0442\u0438\u0440\u0430 " + address.room].filter(function (x) {return !!x;}).join(', ');};_proto._renderModal = function _renderModal() {return React.createElement(_AddressModal["default"], { address: this.props.value && this.props.value.address, title: this.props.title, onChange: this._handleChange, onClose: this._handleClose });};return Kladr;}(React.Component);exports["default"] = Kladr;_defineProperty(Kladr, "__KONTUR_REACT_UI__", 'Kladr');_defineProperty(Kladr, "propTypes", { error: _propTypes["default"].string, title: _propTypes["default"].string, value: _propTypes["default"].any, warning: _propTypes["default"].string, onChange: _propTypes["default"].func });


function isEmpty(value) {
  var address = value.address;
  if (address) {
    for (var _i = 0, _Object$keys = Object.keys(address); _i < _Object$keys.length; _i++) {var key = _Object$keys[_i];
      if (address[key]) {
        return false;
      }
    }
  }

  return true;
}