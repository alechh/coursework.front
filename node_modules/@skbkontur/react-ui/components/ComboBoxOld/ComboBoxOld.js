"use strict";exports.__esModule = true;exports["default"] = void 0;


var React = _interopRequireWildcard(require("react"));
var _warning = _interopRequireDefault(require("warning"));
var _propTypes = _interopRequireDefault(require("prop-types"));

var _ComboBoxRenderer = _interopRequireDefault(require("./ComboBoxRenderer"));function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { "default": obj };}function _getRequireWildcardCache() {if (typeof WeakMap !== "function") return null;var cache = new WeakMap();_getRequireWildcardCache = function _getRequireWildcardCache() {return cache;};return cache;}function _interopRequireWildcard(obj) {if (obj && obj.__esModule) {return obj;}if (obj === null || typeof obj !== "object" && typeof obj !== "function") {return { "default": obj };}var cache = _getRequireWildcardCache();if (cache && cache.has(obj)) {return cache.get(obj);}var newObj = {};var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;for (var key in obj) {if (Object.prototype.hasOwnProperty.call(obj, key)) {var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;if (desc && (desc.get || desc.set)) {Object.defineProperty(newObj, key, desc);} else {newObj[key] = obj[key];}}}newObj["default"] = obj;if (cache) {cache.set(obj, newObj);}return newObj;}function _extends() {_extends = Object.assign || function (target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i];for (var key in source) {if (Object.prototype.hasOwnProperty.call(source, key)) {target[key] = source[key];}}}return target;};return _extends.apply(this, arguments);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _inheritsLoose(subClass, superClass) {subClass.prototype = Object.create(superClass.prototype);subClass.prototype.constructor = subClass;subClass.__proto__ = superClass;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}






/**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * @deprecated Компонент устарел и будет удален в версии 2.0.0. Используйте актульный [ComboBox](#/Components/ComboBox).
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        */var
ComboBoxOld = /*#__PURE__*/function (_React$Component) {_inheritsLoose(ComboBoxOld, _React$Component);function ComboBoxOld() {var _this;for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {args[_key] = arguments[_key];}_this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;_defineProperty(_assertThisInitialized(_this), "state",

























































































































    {
      info: null });_defineProperty(_assertThisInitialized(_this), "renderer", void 0);_defineProperty(_assertThisInitialized(_this), "_mounted",




    false);_defineProperty(_assertThisInitialized(_this), "_infoPromise", void 0);_defineProperty(_assertThisInitialized(_this), "_ref",




















    function (renderer) {
      _this.renderer = renderer;
    });return _this;}var _proto = ComboBoxOld.prototype;_proto.render = function render() {var info = this.props.info;if (typeof info === 'function') {info = this.state.info;} // Flow needs this for some reason.
    var spread = this.props;return React.createElement(_ComboBoxRenderer["default"], _extends({ ref: this._ref }, spread, { info: info }));};_proto.focus = function focus() {if (this.renderer) {this.renderer._focus();}};_proto.
  componentDidMount = function componentDidMount() {
    (0, _warning["default"])(false, 'ComboBoxOld is deprecated and will be removed in v2.0.0. Please, use the actual ComboBox instead.');
    this._mounted = true;var _this$props =
    this.props,value = _this$props.value,info = _this$props.info;
    if (typeof info === 'function') {
      this._fetchInfo(value, info);
    }
  };_proto.

  componentWillUnmount = function componentWillUnmount() {
    this._mounted = false;
  };_proto.

  componentWillReceiveProps = function componentWillReceiveProps(newProps) {
    this._maybeRefetchInfo(newProps.value, newProps.info);
  };_proto.

  _maybeRefetchInfo = function _maybeRefetchInfo(value, info) {
    if (typeof info !== 'function') {
      return;
    }

    var props = this.props;

    if (value === props.value && typeof props.info === 'function') {
      // Values hasn't changed and info is still a function. So we are already
      // fetching info.
      return;
    }

    this.setState({ info: null });
    this._fetchInfo(value, info);
  };_proto.

  _fetchInfo = function _fetchInfo(value, info) {var _this2 = this;
    var promise = info(value);
    this._infoPromise = promise;

    promise.then(function (info) {
      if (_this2._mounted && _this2._infoPromise === promise) {
        _this2.setState({ info: info });
      }
    });
  };return ComboBoxOld;}(React.Component);exports["default"] = ComboBoxOld;_defineProperty(ComboBoxOld, "__KONTUR_REACT_UI__", 'ComboBoxOld');_defineProperty(ComboBoxOld, "propTypes", { autoFocus: _propTypes["default"].bool, borderless: _propTypes["default"].bool, debounceInterval: _propTypes["default"].number, /**
                                                                                                                                                                                                                                                                                                                          * Не использовать Portal для рендеринга меню.
                                                                                                                                                                                                                                                                                                                          * По-умолчанию `false`.
                                                                                                                                                                                                                                                                                                                          * См. https://github.com/skbkontur/retail-ui/issues/15
                                                                                                                                                                                                                                                                                                                          */disablePortal: _propTypes["default"].bool, disabled: _propTypes["default"].bool, /**
                                                                                                                                                                                                                                                                                                                                                                                                              * Визуально показать наличие ошибки.
                                                                                                                                                                                                                                                                                                                                                                                                              */error: _propTypes["default"].bool, /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                    * Данные, которые будут переданы в функции для отрисовки значений
                                                                                                                                                                                                                                                                                                                                                                                                                                                    * (`renderValue` и `renderItem`).
                                                                                                                                                                                                                                                                                                                                                                                                                                                    */info: _propTypes["default"].oneOfType([_propTypes["default"].any, _propTypes["default"].func]), menuAlign: _propTypes["default"].oneOf(['left', 'right']), /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * Показывать кнопку-треугольник для показа резаультатов.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  */openButton: _propTypes["default"].bool, placeholder: _propTypes["default"].string, /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * Функция для обработки неожиданного ввода. Если пользователь ввел что-то в
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * строку поиска и нажал Enter или ушел из поля, не выбрав значение, то
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * будет вызвана эта функция, которая может вернуть значение, которое будет
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * использовано как будто оно было выбрано.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * Возвращаемое значение может быть `null`, либо объектом такой формы:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * `{value: any, info?: any}`.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * Если задать это поле в `true`, то будет использована такая функция:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * `(searchText) => searchText`.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        */recover: _propTypes["default"].oneOfType([_propTypes["default"].bool, _propTypes["default"].func]), renderItem: _propTypes["default"].func, /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       * Сообщение при отсутствии результатов
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       * `string | (searchText: string) => React$Element<*> | string`
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       */renderNotFound: _propTypes["default"].oneOfType([_propTypes["default"].string, _propTypes["default"].func]), /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       * Общее количество найденных элементов
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       * `(foundCount: number, totalCount: number) => React$Element<*> | string`
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       */renderTotalCount: _propTypes["default"].func, renderValue: _propTypes["default"].func, source: _propTypes["default"].func.isRequired, value: _propTypes["default"].any, /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * Визуально показать наличие предупреждения.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  */warning: _propTypes["default"].bool, width: _propTypes["default"].oneOfType([_propTypes["default"].number, _propTypes["default"].string]), onBlur: _propTypes["default"].func, onChange: _propTypes["default"].func, onClose: _propTypes["default"].func, onFocus: _propTypes["default"].func, /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * Вызывается при изменении текста в поле ввода,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * если результатом функции будет строка,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * то она станет следующим состояним полем ввода
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * `(value: string) => any`
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    */onInputChange: _propTypes["default"].func, /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * Позволяет обработать нажатия клавиш.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * Можно отменить стандартное поведение, используя `event.preventDefault()`
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * `(event: KeyboardSyntheticEvent) => void`
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  */onInputKeyDown: _propTypes["default"].func, onMouseEnter: _propTypes["default"].func, onMouseLeave: _propTypes["default"].func, onMouseOver: _propTypes["default"].func, onOpen: _propTypes["default"].func });_defineProperty(ComboBoxOld, "defaultProps", { menuAlign: 'left', placeholder: '', width: 250 });